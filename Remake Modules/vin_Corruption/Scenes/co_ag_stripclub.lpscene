WHAT: all
WHERE: all, -stripclub
WHEN: 20-3
WHO: Actor = getCompanion(); If !Actor.isRelative() && [perversion - Actor:perversion > 40 || Actor.isVirgin()] && Actor:attractiontoplayer > 10
OTHER: none

    SceneStart()
        Hunger = Player.getActorVar(rk_VB_Hunger)
        HungerEnable = rk_VB_EnableHunger.getGlobal()
        UrgeToPeeEnable = rk_VB_UrgeToPeeEnable.getGlobal()
        UrgeToPee = Player.getActorVar(rk_VB_UrgeToPee)
        If !Actor.isValid() || ForcedTrigger()
            Actor = getCompanion()
        EndIf
        setBackground(street)
        "<Actor.name> is such an innocent <Actor.guy_or_girl>."
        If Actor.isVirgin()
            "I'm pretty sure <Actor.he_or_she> is still a virgin too ..."
        EndIf
        "I reckon a little visit to my favorite stripclub could help <Actor.him_or_her> open up a bit ..."
        0:: "Take <Actor.him_or_her> to a stripclub"
        1:: "Not a good idea"
        
        If 0
            "A while later ..."
            Actor(Surprised):: "<Player.name>, where are you taking me to? Wait, is this a ... stripclub?"
            Player(Flirty):: "Come on. You're an adult - you've got to go to a stripclub at least once in your life, surely?"
            If random(0, 200) < interpersonal + Actor:attractiontoplayer + Actor:incest + Actor:perversion + Actor:masochist 
                Actor(Embarrassed):: "Fine ... I guess since we're already here, I want to see what the fuss is all about."
                Actor:perversion += random(0, 0.5)
                setBackground(nightclub)
                Stripper = generatePersonTemporary()
                While !Actor.isSameGender(Stripper)
                    Stripper = generatePersonTemporary()
                EndWhile
                Stripper2 = generatePersonTemporary()
                While !Actor.isSameGender(Stripper2)
                    Stripper2 = generatePersonTemporary()
                EndWhile
                Stripper.blendPreset(twenties)
                Stripper2.blendPreset(twenties)
                If Stripper.isMale()
                    Stripper.blendPreset(bodybuilder)
                Else
                    Stripper.blendPreset(hourglass1_F)
                EndIf
                Stripper.randomizeFace()
                Stripper.randomizeRace()
                Stripper.randomizeHairs()
                If Stripper2.isMale()
                    Stripper2.blendPreset(bodybuilder)
                Else
                    Stripper2.blendPreset(hourglass1_F)
                EndIf
                Stripper2.randomizeFace()
                Stripper2.randomizeRace()
                Stripper2.randomizeHairs()
                Stripper.show(2)
                Stripper2.show(3)
                "<Actor.name> seems impressed by the strippers' skill ... Maybe I should challenge <Actor.him_or_her> to strip down ... Might just work: <Actor.he_or_she> is quite competitive by nature."
                0:: "Challenge <Actor.name> to strip"
                1:: "Maybe not"
                
                If 0
                    Player(Wink):: "You see how the professionals do it? I bet you can't take off your clothes as seductively as they can ..."                
                    If random(100, 300) < interpersonal + Actor:attractiontoplayer + Actor:incest + Actor:perversion + Actor:masochist 
                        Actor(Angry):: "Of course I can! Do you think I'm not sexy enough?"
                        Actor:perversion += random(0, 1)
                        While !Actor.isNaked()
                            Actor(Flirty):: "Off this goes ..."
                            Actor.stripOne()
                        EndWhile
                        Actor(Angry):: "Happy now? Are you still doubting my ability?"
                        Player(Flirty):: "Not anymore, darling. I didn't see that coming from you."
                        "Oh god, did I just manage to get <Actor.name> to do that? One minute <Actor.he_or_she> is a classy <Actor.gentleman_or_lady>, the next <Actor.he_or_she> becomes a stripper ... Was it <Actor.his_or_her> competitiveness and ego or was it <Actor.his_or_her> inner slut?"
                        Actor.dress()
                    Else
                        Actor(Irritated):: "Well, that's why they're strippers and I'm not."
                    EndIf      
                EndIf
            Else
                Actor(Angry):: "Hey, who do you take me for? No way I'm going in there!"
                masochist -= random(0, 0.25)
                Actor:attractiontoplayer -= random(0, 0.5)
            EndIf
        Else
            "Let's take this slow ... No way <Actor.he_or_she> would agree to go in such a place."
        EndIf
    SceneEnd()  // Improved by Raddeck
    timeout(200, co_ag_stripclub)