WHAT: all
WHERE: university:work
WHEN: 0-24
WHO: Actor = getPerson(rk_VB_tag_Prof); Actor2 = getPerson(rk_VB_tag_Pstudent); If !Actor.isDating() && !Actor2.isDating() && Actor2.isInterestedIn(Actor) && Actor.isInterestedIn(Actor2) && Actor2:rapportwithplayer < 50
OTHER:

    SceneStart()
        FiniLeShow = false
        TeacherUni = rk_VB_job_Teacher_Uni.getGlobal()
        If isModEnabled(rk_vin_Base)
            VraiLoser = false
            FightingLost = false
            IlAPerdu = false
            Hunger = Player.getActorVar(rk_VB_Hunger)
            HungerEnable = rk_VB_EnableHunger.getGlobal()
            UrgeToPeeEnable = rk_VB_UrgeToPeeEnable.getGlobal()
            UrgeToPee = Player.getActorVar(rk_VB_UrgeToPee)
            personal_vids = Player.getActorVar(rk_VB_personal_vids)
            Actor2.dress()
            Actor2.show(3)
            dressFormal()
            Actor.dress()
            Actor.show(2)
            Actor.moveToPerson(Actor2)
            If Actor:perversion + Actor2:perversion > random(75, 150)
                If TeacherUni == 0
                    "Wait, is that my classmate <Actor2.name> and Dr <Actor.name_last> walking together back to <Actor.his_or_her> office?"
                Else
                    "Wait, is that my student <Actor2.name> and Dr <Actor.name_last> walking together back to <Actor.his_or_her> office?"
                EndIf
                "What should I do?"
                0:: "Follow them"
                1:: "No big deal"
                
                If 0
                    If TeacherUni == 0
                        "Could they be having an affair? Having sex with a lecturer, <Actor2.name> is such a <Actor2.stud_or_slut>!"
                    Else
                        "Could they be having an affair? Having sex with a student, <Actor.name> is such a <Actor.stud_or_slut>!"
                    EndIf
                    "What should I do now?"
                    0:: "Peep"
                    1:: "Leave it"
                    
                    If 0
                        "Do I film them to blackmail them later?" // Edit Raddeck
                        0:: "Yes"
                        1:: "No"
                        
                        If 0
                            Player.animate(camera)
                            "I decided to film them..."
                            filmed = true
                        EndIf
                        sneakGame()
                        If random(0, 100) < sneak
                            sneak += 1
                            "Luckily, they forgot to lock the door behind them, leaving me an easy opening to have a peek."
                            Sex(Actor, Actor2)
                            Actor.hide()
                            Actor2.hide()
                            If filmed // Edit Raddeck
                                "One more video added to my personal xxx videos collection."
                                Player.modifyActorVar(rk_VB_personal_vids, 1)
                                Player.animate()
                            EndIf
                            Player.show(0)
                            If HungerEnable > 0
                                Player.modifyActorVar(rk_VB_Hunger, -1)
                            EndIf
                        Else
                            "Unfortunately, they locked the door as soon as they went inside the office and I couldn't see a thing."
                            sneak -= 0.5
                            mood -= 1
                        EndIf
                    EndIf
                    "Now, what should I do about what I saw?"
                    0:: "Tell everyone"
                    2:: "Offer to join them"
                    1:: "Stay silent"
                    
                    If 0
                        karma -= 10
                        If TeacherUni == 0
                            "I decided to spread the rumour to the rest of the course, which <Actor2.name> firmly denied."
                        Else
                            "I decided to spread the rumour to the rest of the Department, which <Actor.name> firmly denied."        
                        EndIf
                        Actor:rapportwithplayer -= random(0, 5)
                        Actor2:rapportwithplayer -= random(0, 10)
                    ElseIf 2
                        Player(Flirty):: "Looks like you guys are having some fun there? Mind if I join?"
                        If Actor.isInterestedIn(Player) || Actor2.isInterestedIn(Player)
                            Actor(Flirty):: "Of course, my <Player.brother_or_sister>. Come on and join us then, what are you waiting for?"
                            Sex(Actor, Actor2, Player)
                            If HungerEnable > 0
                                Player.modifyActorVar(rk_VB_Hunger, -3)
                            EndIf
                            Actor:rapportwithplayer += random(0, 10)
                            Actor:attractiontoplayer += random(0, 10)
                            Actor2:rapportwithplayer += random(0, 10) // Edit Raddeck
                            Actor2:attractiontoplayer += random(0, 10) // Edit Raddeck
                            perversion += random(0, 1)
                        Else  // Start edit Raddeck
                            Actor(Shocked):: "What are you doing here? Get out and close the door pervert!"
                            Actor:rapportwithplayer -= random(0, 5)
                            Actor:attractiontoplayer -= random(0, 5)
                            perversion += random(0, 1)
                            sneak -= 1
                            "What I should do?"
                            0::"Get out and close the door"
                            1:: filmed ::"Blackmail them"
                            
                            If 1
                                A1M = Actor:masochist
                                A2M = Actor2:masochist
                                TotalM = A1M + A2M
                                Player(Grin)::"No problem if you are not interested but I filmed everything with my phone, so if you don't want me to join you I will publish this nice video on XXX tubes."
                                masochist -= 0.5
                                If masochist < TotalM
                                    Actor(Evil)::"You're such a jerk, come here so I can beat your stupid face!"
                                    Actor.moveToPersonStand(Player, 50)
                                    Actor.animate(martialart)
                                    "I receive a punch in the face without having time to retaliate"
                                    If Actor:martial > martial
                                        Player.animate(fightlost)
                                        "A punch so intense that I fell down"
                                        Player.animate(knockedout)
                                        "<Actor.name> take time to erased all my Personal xxx videos collection."
                                        Player.setActorVar(rk_VB_personal_vids, 0)
                                    Else
                                        Player.animate(martialart)
                                        "The fight begin..."
                                        Player.moveToPersonStand(Actor, 50)
                                        faceEachOther(Actor, Player)
                                        Roundcount = 0
                                        FightInAction = 0
                                        While FightInAction < 1 && energy > 10
                                            FightAction = random(0, 2)
                                            FightAction = FightAction.round()
                                            BlockAction = random(0, 3)
                                            BlockAction = BlockAction.round()
                                            JFightAction = random(0, 1)
                                            JFightAction = JFightAction.round()
                                            JFightHit = random(3, 6)
                                            "What should I do?"
                                            0:: Roundcount > 5::"Try to stop the fight"
                                            1:: "Hit <Actor.him_or_her>"
                                            
                                            If 0
                                                Player(Pain)::"C'mon <Actor.name>, let's stop that fight?"
                                                If Roundcount >= 20 || Actor:energy < 50 && Roundcount >= 5
                                                    Actor(Pain)::"Ok for now, consider yourself lucky...!"
                                                    Actor(Pain)::"But please delete that video...!"
                                                    Player(Embarrassed)::"Ok, Fine!"
                                                    Player.modifyActorVar(rk_VB_personal_vids, -1)
                                                    FightInAction = 2
                                                    FiniLeShow = true
                                                Else
                                                    Actor(Evil)::"Fuck off little pussy...c'mon come..."
                                                    FightInAction = 0
                                                EndIf
                                            Else
                                                Roundcount += 1
                                                If FightAction == 0
                                                    Actor.moveToPersonStand(Player, 25)
                                                    faceEachOther(Actor, Player)
                                                    Player.animate(martialart)
                                                    Actor.animate(martialart)
                                                    "You completely missed your attack ... <Actor.name> blocked your move!"
                                                    energy -= 1
                                                    FightInAction = 0
                                                ElseIf FightAction == 1
                                                    
                                                    Actor.moveToPersonStand(Player, 25)
                                                    faceEachOther(Actor, Player)
                                                    Player.animate(martialart)
                                                    Actor.animate(martialart)
                                                    If BlockAction == 0
                                                        Random
                                                            "You manage to hit <Actor.name> in <Actor.his_or_her> genitals."
                                                            "You manage to hit <Actor.name> in <Actor.his_or_her> rib cage."
                                                            "You manage to hit <Actor.name> with a nice uppercut punch."
                                                            "You manage to give <Actor.name> a good punch in the throat." 
                                                        EndRandom
                                                        Actor:energy -= 5
                                                    ElseIf BlockAction == 1
                                                        Random
                                                            "You manage to hit <Actor.name> with a double punch in the face."
                                                            "You manage to hit <Actor.name> with a front kick."
                                                            "You manage to hit <Actor.name> with a knee kick." 
                                                        EndRandom
                                                        Actor:energy -= 3
                                                    ElseIf BlockAction == 2
                                                        Random
                                                            "You manage to hit <Actor.name> with an elbow to the face."
                                                            "You manage to hit <Actor.name> with a good palm strike."
                                                        EndRandom
                                                        Actor:energy -= 2
                                                    ElseIf BlockAction == 3
                                                        "You manage to hit <Actor.name> with a straight punch in the face."
                                                        Actor:energy -= 1
                                                    EndIf
                                                    If JFightAction > 0
                                                        Actor.animate(martialart)
                                                        DefendHit = random(0, 7)
                                                        DefendHit = DefendHit.round()
                                                        If DefendHit == 0
                                                            "<Actor.name> respond with <Actor.his_or_her> fist in your face!"
                                                            energy -= JFightHit 
                                                        ElseIf DefendHit == 1
                                                            "<Actor.name> respond with a hit in your genitals."
                                                            energy -= JFightHit + 2
                                                        ElseIf DefendHit == 2
                                                            "<Actor.name> respond with a hit in your rib cage."
                                                            energy -= JFightHit + 1
                                                        ElseIf DefendHit == 3
                                                            "<Actor.name> respond with a front kick."
                                                            energy -= JFightHit + 3
                                                        ElseIf DefendHit == 4
                                                            "<Actor.name> respond with a knee kick." 
                                                            energy -= JFightHit + 3
                                                        ElseIf DefendHit >= 5
                                                            "<Actor.name> gets back into fighting position."
                                                        EndIf
                                                    EndIf
                                                    FightInAction = 0
                                                    
                                                ElseIf FightAction == 2
                                                    BlockAction = random(0, 5) //Typeofhits
                                                    BlockAction = BlockAction.round()
                                                    Actor.moveToPersonStand(Player, 25)
                                                    faceEachOther(Actor, Player)
                                                    Player.animate(martialart)
                                                    Actor.animate(martialart)
                                                    If BlockAction == 0
                                                        Random
                                                            "<Actor.name> manage to hit you in your genitals."
                                                            "<Actor.name> manage to hit you in your rib cage."
                                                            "<Actor.name> manage to hit you with a nice uppercut punch."
                                                            "<Actor.name> manage to give you a good punch in the throat." 
                                                        EndRandom
                                                        energy -= 5
                                                    ElseIf BlockAction == 1
                                                        Random
                                                            "<Actor.name> manage to hit you with a double punch in the face."
                                                            "<Actor.name> manage to hit you with a front kick."
                                                            "<Actor.name> manage to hit you with a knee kick." 
                                                        EndRandom
                                                        energy -= 3
                                                    ElseIf BlockAction == 2
                                                        Random
                                                            "<Actor.name> manage to hit you with an elbow to the face."
                                                            "<Actor.name> manage to hit you with a good palm strike."
                                                        EndRandom
                                                        energy -= 2
                                                    ElseIf BlockAction == 3
                                                        "<Actor.name> manage to hit you with a straight punch in the face."
                                                        energy -= 1
                                                    Else
                                                        Actor.moveToPersonStand(Player, 25)
                                                        faceEachOther(Actor, Player)
                                                        Player.animate(martialart)
                                                        Actor.animate(martialart)
                                                        "<Actor.name> completely missed <Actor.his_or_her> attack ... You managed to block <Actor.his_or_her> move!"
                                                        energy -= 1
                                                    EndIf
                                                        
                                                    If JFightAction > 0
                                                        Actor.animate(martialart)
                                                        DefendHit = random(0, 7)
                                                        DefendHit = DefendHit.round()
                                                        If DefendHit == 0
                                                            "You respond with your fist in <Actor.his_or_her> face!"
                                                            Actor:energy -= JFightHit
                                                        ElseIf DefendHit == 1
                                                            "I respond with a hit in <Actor.his_or_her> genitals."
                                                            Actor:energy -= JFightHit + 2
                                                        ElseIf DefendHit == 2
                                                            "I respond with a hit in <Actor.his_or_her> rib cage."
                                                            Actor:energy -= JFightHit + 1
                                                        ElseIf DefendHit == 3
                                                            "I respond with a front kick."
                                                            Actor:energy -= JFightHit + 3
                                                        ElseIf DefendHit == 4
                                                            "I respond with a knee kick." 
                                                            Actor:energy -= JFightHit + 3
                                                        ElseIf DefendHit >= 5
                                                            "I gets back into fighting position."
                                                        EndIf
                                                    EndIf
                                                    FightInAction = 0
                                                EndIf
                                            EndIf
                                            If energy < 10
                                                FightingLost = true
                                                FightInAction = 2
                                            ElseIf Actor:energy < 10
                                                IlAPerdu = true
                                                FightInAction = 2
                                            EndIf
                                        EndWhile
                                    EndIf
                                Else
                                    perversion += 1
                                    Actor(Annoyed)::"Ok come join us!"
                                    Actor:rapportwithplayer -= random(0, 5)
                                    Actor:attractiontoplayer += random(0, 5)
                                    Actor2:rapportwithplayer -= random(0, 3)
                                    Actor2:attractiontoplayer += random(0, 5)
                                    masochist -= random(0, 3)
                                    mood += 1
                                    Player.strip()
                                    Sex(Actor, Actor2, Player)
                                    If HungerEnable > 0
                                        Player.modifyActorVar(rk_VB_Hunger, -3)
                                    EndIf
                                EndIf
                                If energy < 10
                                    FightingLost = true
                                    FightInAction = 2
                                ElseIf Actor:energy < 10
                                    IlAPerdu = true
                                    FightInAction = 2
                                EndIf
                                TempStatA = Actor:energy
                                TempStatP = energy
                                TempStatA > TempStatP
                                If FightingLost && TempStatA > TempStatP
                                    VraiLoser = true
                                ElseIf FightingLost && TempStatP > TempStatA
                                    IlAPerdu = true
                                ElseIf TempStatA > TempStatP
                                    VraiLoser = true
                                Else TempStatP > TempStatA
                                    IlAPerdu = true
                                EndIf
                                If !FiniLeShow
                                    If VraiLoser
                                        Actor.animate()
                                        "<Actor.name> win the fight, <Actor.he_or_she> beat me all the way..."
                                        "Suddenly everything goes black ... you lost your consciousness."
                                        Player.animate(knockedout)
                                        Player.closeEyes(true)
                                        Actor:rapportwithplayer -= 5
                                        Actor:attractiontoplayer -= 1
                                        If isModEnabled(vin_NonConsensual) && Actor:arousal > 10 && Actor:perversion > 50
                                            Actor(Angry)::"I'm not done with you, <Player.scum_or_bitch>!"
                                            "<Actor.name> stripped off all my clothes and started fucking me right here!"
                                            Player.strip()
                                            Actor.dressExcept(Outerwear, Bottom, Bottom_Under)
                                            Filter(Aggressive)
                                            SexNoAffair(Actor, Player)
                                            If HungerEnable > 0
                                                Player.modifyActorVar(rk_VB_Hunger, -3)
                                            EndIf
                                            passTime(0.50, 1.50)
                                            Actor.hide()
                                            "After a few minutes, I woke up but I'm still a little stunned…"
                                            Player.animate()
                                            "As you try to stand up you notice that you are naked ... and your whole body hurts. It feels like you have been beaten up."
                                            Player.show()
                                            "You feel something running down your <Player.ass_or_pussy>..."
                                            "You touch your <Player.ass_or_pussy> to see what it is ..."
                                            "It's cum, a lot of cum! It gushes literally out of your <Player.ass_or_pussy>, running down both legs ..."
                                            Player(Disgusted)::"WTF..."
                                            "I wiped a bit and put my clothes back on..."
                                            Player.dress()
                                            mood => 0
                                            energy => 5
                                        ElseIf random(0, 100) > 60
                                            ActorLooting = random(1, 10)
                                            ActorLooting = ActorLooting.round()
                                            ActorLootingCash = random(10, 200)
                                            ActorLootingCash_loc = ActorLootingCash.convertToLocalCurrency()
                                            If ActorLooting > 6
                                                "<Actor.name> stole you <ActorLootingCash_loc> from your pockets."
                                                money -= ActorLootingCash
                                            EndIf
                                            Actor.hide()
                                            Actor:rapportwithplayer -= 50
                                            Actor:attractiontoplayer -= 50
                                            passTime(0.15, 0.50)
                                        Else
                                            "After a few minutes, I woke up but I'm still a little stunned…"
                                        EndIf
                                        Player.closeEyes(false)
                                        Player.animate()
                                        mood => 5
                                        energy => 5
                                        Actor.hide()
                                        Player.animate() 
                                        Teacher = generatePersonTemporary()
                                        Teacher.dress()
                                        Teacher.show()
                                        Teacher.moveToPersonStand(Player, 50)
                                        Teacher(Wink)::"Hey my friend! Are you ok! Do you want a glass of water before you go?"
                                        "Do I accept or I'm going home?"
                                        0::"Yeah sure, that'll wake me up a bit more..."
                                        1::"No thanks, I think I will go home instead..."
                                                
                                        If 0
                                            RapeChance = random(0, 10)
                                            If isModEnabled(vin_NonConsensual) && Teacher.isInterestedIn(Player) && RapeChance > 7
                                                "I think <Teacher.he_or_she> put some drug inside the drink because I feel dizzy..."
                                                "The teacher take off my clothes, but I can barely move or say anything... WTF..."
                                                intoxication += 75
                                                Player.strip()
                                                Teacher.strip()
                                                Filter(Aggressive)
                                                SexNoAffair(Teacher, Player)
                                                "That's really not my day..."
                                                "Now my holes are red and in real bad shapes,.... fuck!"
                                                "I'm going home right now!"
                                                intoxication => 15
                                                energy => 10
                                            Else
                                                "I drink my glass with difficulty..."
                                                energy += 10
                                                "Once my drink is finished, I go straight home..."
                                                mood += 2
                                            EndIf
                                            "I decided to go back home..."
                                            moveTo(home)
                                        Else
                                            "Going back home..."
                                            moveTo(home)
                                        EndIf
                                    EndIf
                                    If IlAPerdu
                                        "I win the fight, <Actor.he_or_she> will stay quiet for a few..."
                                        "<Actor2.name> get scared and runs away..."
                                        Actor.animate(knockedout)
                                        Actor.closeEyes(true)
                                        "What do I do?"
                                        0::"Loot <Actor.him_or_her>"
                                        1::"Fuck <Actor.him_or_her>"
                                        99::"Nothing"
                                        
                                        If 0
                                            FindMoney = random(20, 500)
                                            FindMoney_Loc = FindMoney.convertToLocalCurrency()
                                            FindWeedg = random(2, 7) 
                                            WeedVar = random(1, 4)
                                            WeedVar = WeedVar.round()
                                            If WeedVar == 1
                                                VarWeed = "<FindWeedg>g of Sunset Sherbet"
                                                Player.modifyActorVar(stock_SSweed, FindWeedg)
                                            ElseIf WeedVar == 2
                                                divideWeed = FindWeedg/2
                                                divideWeed2 = FindWeedg/2
                                                VarWeed = "<divideWeed>g of Bruce Banner and <divideWeed2>g of Gorilla Glue"
                                                Player.modifyActorVar(stock_BBweed, divideWeed)
                                                Player.modifyActorVar(stock_GGweed, divideWeed2)
                                            ElseIf WeedVar == 3
                                                divideWeed = FindWeedg/2
                                                divideWeed1 = FindWeedg/2
                                                divideWeed2 = FindWeedg/2
                                                VarWeed = "<divideWeed>g of Sunset Sherbet, <divideWeed1>g of AK 47 and <divideWeed2>g of Gorilla Glue"
                                                Player.modifyActorVar(stock_SSweed, divideWeed)
                                                Player.modifyActorVar(stock_GGweed, divideWeed2)
                                                Player.modifyActorVar(stock_AK47weed, divideWeed1)
                                            ElseIf WeedVar == 4
                                                divideWeed = FindWeedg/2
                                                divideWeed1 = FindWeedg/2
                                                divideWeed2 = FindWeedg/2
                                                divideWeed3 = FindWeedg/2
                                                VarWeed = "<divideWeed>g of Sunset Sherbet, <divideWeed3>g of Pineapple Express, <divideWeed1>g of AK 47 and <divideWeed2>g of Gorilla Glue"
                                                Player.modifyActorVar(stock_SSweed, divideWeed)
                                                Player.modifyActorVar(stock_AK47weed, divideWeed1)
                                                Player.modifyActorVar(stock_GGweed, divideWeed2)
                                                Player.modifyActorVar(stock_PEweed, divideWeed3)
                                            EndIf
                                            "You find <FindMoney_Loc> and <FindWeedg>g of weeds! <VarWeed>."
                                            mood += 1
                                            money += FindMoney
                                        ElseIf 1
                                            Player.dressExcept(Outerwear, Bottom, Bottom_Under)
                                            Actor.strip()
                                            Filter(Aggressive)
                                            SexNoAffair(Player, Actor)
                                            If HungerEnable > 0
                                                Player.modifyActorVar(rk_VB_Hunger, -2)
                                            EndIf
                                            passTime(0.50, 1.50)
                                        EndIf
                                    EndIf
                                EndIf
                            EndIf
                        EndIf
                    Else
                        If TeacherUni == 0
                            "Let's be honest: I would totally bang a lecturer myself if I have the chance. I feel for <Actor2.name> here. Let's not destroy <Actor2.his_or_her> reputation and Dr <Actor.name_last>'s career."
                        Else
                            "Let's be honest: I would totally bang a student myself if I have the chance. I feel for <Actor.name> here. Let's not destroy <Actor.his_or_her> career and <Actor2.name>'s reputation."            
                        EndIf
                    EndIf
                Else
                    "Who cares? <Actor.name> is probably just asking for help with coursework."
                EndIf
            Else
                If TeacherUni == 0
                    "Wait, is that my classmate <Actor2.name> and Dr <Actor.name_last> walking together back to <Actor.his_or_her> office?"
                Else
                    "Wait, is that my student <Actor2.name> and Dr <Actor.name_last> walking together back to <Actor.his_or_her> office?"
                EndIf
                "What should I do?"
                0:: "Gossip"
                1:: "No big deal"
                
                If 0
                    If TeacherUni == 0
                        "Could they be having an affair? Having sex with a lecturer, <Actor2.name> is such a <Actor2.stud_or_slut>!"
                        "I decided to spread the rumour to the rest of the course, which <Actor2.name> firmly denied."
                    Else
                        "Could they be having an affair? Having sex with a student, <Actor.name> is such a <Actor.stud_or_slut>!"
                        "I decided to spread the rumour to the rest of the Department, which <Actor.name> firmly denied."        
                    EndIf
                    Actor:rapportwithplayer -= random(0, 2.5)
                    Actor2:rapportwithplayer -= random(0, 5)
                Else
                    "Who cares? <Actor.name> is probably just asking for help with coursework."
                EndIf
            EndIf
        Else
            "No good!"
        EndIf
    SceneEnd() // Improved by Raddeck
    timeout(500, rk_VB_coursemate_affair)