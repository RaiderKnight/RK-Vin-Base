WHAT: all, -sleep_hotel, -nap_hotel, -rk_VB_small_sleep
WHERE: fraternity
WHEN: 18-24
WHO: Actor = getPerson(rk_VB_tag_Student); If Actor:perversion > 50 && Actor:masochist < 0 && !Actor.isAsexual()
OTHER: none


    SceneStart()
        If !Player.isMale()
            While Actor.isValid() && Actor.isMale()
                Actor = getPerson(rk_VB_tag_ExeSoroS)
            EndWhile
        Else
            While Actor.isValid() && !Actor.isMale()
                Actor = getPerson(rk_VB_tag_ExeFratF)
            EndWhile
        EndIf
        choiceCourseMajor = rk_VB_choiceCourseMajor.getGlobal()
        Hunger = Player.getActorVar(rk_VB_Hunger)
        HungerEnable = rk_VB_EnableHunger.getGlobal()
        UrgeToPeeEnable = rk_VB_UrgeToPeeEnable.getGlobal()
        UrgeToPee = Player.getActorVar(rk_VB_UrgeToPee)
        If choiceCourseMajor == 1
            choiceCourseMajorT = 1
            TextMajorChosen = "architecture"
        ElseIf choiceCourseMajor == 2
            choiceCourseMajorT = 2
            TextMajorChosen = "chemical engineering"
        ElseIf choiceCourseMajor == 3
            choiceCourseMajorT = 3
            TextMajorChosen = "classics"
        ElseIf choiceCourseMajor == 4
            choiceCourseMajorT = 4
            TextMajorChosen = "computer science"
        ElseIf choiceCourseMajor == 31
            choiceCourseMajorT = 17
            TextMajorChosen = "dental"
        ElseIf choiceCourseMajor == 5
            choiceCourseMajorT = 5
            TextMajorChosen = "economics"
        ElseIf choiceCourseMajor == 6
            choiceCourseMajorT = 6
            TextMajorChosen = "education"
        ElseIf choiceCourseMajor == 7
            choiceCourseMajorT = 7
            TextMajorChosen = "English"
        ElseIf choiceCourseMajor == 8
            choiceCourseMajorT = 8
            TextMajorChosen = "geography"
        ElseIf choiceCourseMajor == 9
            choiceCourseMajorT = 9
            TextMajorChosen = "history"
        ElseIf choiceCourseMajor == 10
            choiceCourseMajorT = 10
            TextMajorChosen = "law"
        ElseIf choiceCourseMajor == 11
            choiceCourseMajorT = 11
            TextMajorChosen = "mathematics"
        ElseIf choiceCourseMajor == 12
            choiceCourseMajorT = 12
            TextMajorChosen = "medicine"
        ElseIf choiceCourseMajor == 13
            choiceCourseMajorT = 13
            TextMajorChosen = "music"
        ElseIf choiceCourseMajor == 14
            choiceCourseMajorT = 14
            TextMajorChosen = "philosophy"
        ElseIf choiceCourseMajor == 15
            choiceCourseMajorT = 15
            TextMajorChosen = "psychology"
        ElseIf choiceCourseMajor == 16
            choiceCourseMajorT = 16
            TextMajorChosen = "political sciences"
        ElseIf choiceCourseMajor == 60
            choiceCourseMajorT = 18
            TextMajorChosen = "sales and marketing"
        ElseIf choiceCourseMajor == 80
            choiceCourseMajorT = 19
            TextMajorChosen = "travel and tourism"
        ElseIf choiceCourseMajor == 90
            choiceCourseMajorT = 20
            TextMajorChosen = "veterinary"
        EndIf
        Actor.dress()
        Actor.show()
        "I'm currently at yet another party thrown by my <Player.fraternity_or_sorority>. As expected, drinks are flowing and there's hardly anyone still sober left."
        Actor2 = getPerson(rk_VB_tag_Student)
        If !Actor2.isValid()
            Actor2 = generatePerson()
            While !Actor.isInterestedIn(Actor2)
                Actor2 = generatePerson()
            EndWhile
            Actor2:age => random(18, 22)
            Actor2.randomizeHairs()
            Actor2.randomizeFace()
            Actor2.randomizeRace()
            Actor2.makePermanent()
            AcID = Actor2.getID()
            If choiceCourseMajor == 1
                Actor2.setActorVar(rk_VB_Architecture_Major_Actor, 1)
                Actor2.setActorVar(rk_VB_tag_TAR, 1)
                Actor2.setActorVar(rk_VB_AcIdCC_TAR, AcID)
            ElseIf choiceCourseMajor == 2
                Actor2.setActorVar(rk_VB_Chemical_Engineering_Major_Actor, 1)
                Actor2.setActorVar(rk_VB_tag_TCE, 1)
                Actor2.setActorVar(rk_VB_AcIdCC_TCE, AcID)
            ElseIf choiceCourseMajor == 3
                Actor2.setActorVar(rk_VB_Classics_Major_Actor, 1)
                Actor2.setActorVar(rk_VB_tag_TCL, 1)
                Actor2.setActorVar(rk_VB_AcIdCC_TCL, AcID)
            ElseIf choiceCourseMajor == 31
                Actor2.setActorVar(rk_VB_Dental_Major_Actor, 1)
                Actor2.setActorVar(rk_VB_tag_TDM, 1)
                Actor2.setActorVar(rk_VB_AcIdCC_TDM, AcID)
            ElseIf choiceCourseMajor == 4
                Actor2.setActorVar(rk_VB_Computer_Science_Major_Actor, 1)
                Actor2.setActorVar(rk_VB_tag_TCS, 1)
                Actor2.setActorVar(rk_VB_AcIdCC_TCS, AcID)
            ElseIf choiceCourseMajor == 5
                Actor2.setActorVar(rk_VB_Economics_Major_Actor, 1)
                Actor2.setActorVar(rk_VB_tag_TEC, 1)
                Actor2.setActorVar(rk_VB_AcIdCC_TEC, AcID)
            ElseIf choiceCourseMajor == 6
                Actor2.setActorVar(rk_VB_Education_Major_Actor, 1)
                Actor2.setActorVar(rk_VB_tag_TED, 1)
                Actor2.setActorVar(rk_VB_AcIdCC_TED, AcID)
            ElseIf choiceCourseMajor == 7
                Actor2.setActorVar(rk_VB_English_Major_Actor, 1)
                Actor2.setActorVar(rk_VB_tag_TEN, 1)
                Actor2.setActorVar(rk_VB_AcIdCC_TEN, AcID)
            ElseIf choiceCourseMajor == 8
                Actor2.setActorVar(rk_VB_Geography_Major_Actor, 1)
                Actor2.setActorVar(rk_VB_tag_TGE, 1)
                Actor2.setActorVar(rk_VB_AcIdCC_TGE, AcID)
            ElseIf choiceCourseMajor == 9
                Actor2.setActorVar(rk_VB_History_Major_Actor, 1)
                Actor2.setActorVar(rk_VB_tag_THI, 1)
                Actor2.setActorVar(rk_VB_AcIdCC_THI, AcID)
            ElseIf choiceCourseMajor == 10
                Actor2.setActorVar(rk_VB_Law_Major_Actor, 1)
                Actor2.setActorVar(rk_VB_tag_TLA, 1)
                Actor2.setActorVar(rk_VB_AcIdCC_TLA, AcID)
            ElseIf choiceCourseMajor == 11
                Actor2.setActorVar(rk_VB_Mathematics_Major_Actor, 1)
                Actor2.setActorVar(rk_VB_tag_TMA, 1)
                Actor2.setActorVar(rk_VB_AcIdCC_TMA, AcID)
            ElseIf choiceCourseMajor == 12
                Actor2.setActorVar(rk_VB_Medicine_Major_Actor, 1)
                Actor2.setActorVar(rk_VB_tag_TME, 1)
                Actor2.setActorVar(rk_VB_AcIdCC_TME, AcID)
            ElseIf choiceCourseMajor == 13
                Actor2.setActorVar(rk_VB_Music_Major_Actor, 1)
                Actor2.setActorVar(rk_VB_tag_TMU, 1)
                Actor2.setActorVar(rk_VB_AcIdCC_TMU, AcID)
            ElseIf choiceCourseMajor == 14
                Actor2.setActorVar(rk_VB_Philosophy_Major_Actor, 1)
                Actor2.setActorVar(rk_VB_tag_TPH, 1)
                Actor2.setActorVar(rk_VB_AcIdCC_TPH, AcID)
            ElseIf choiceCourseMajor == 15
                Actor2.setActorVar(rk_VB_Psychology_Major_Actor, 1)
                Actor2.setActorVar(rk_VB_tag_TPS, 1)
                Actor2.setActorVar(rk_VB_AcIdCC_TPS, AcID)
            ElseIf choiceCourseMajor == 16
                Actor2.setActorVar(rk_VB_Political_Sciences_Major_Actor, 1)
                Actor2.setActorVar(rk_VB_tag_TPOL, 1)
                Actor2.setActorVar(rk_VB_AcIdCC_TPOL, AcID)
            ElseIf choiceCourseMajor == 60
                Actor2.setActorVar(rk_VB_SalesMarketing_Major_Actor, 1)
                Actor2.setActorVar(rk_VB_tag_TSM, 1)
                Actor2.setActorVar(rk_VB_AcIdCC_TSM, AcID)
            ElseIf choiceCourseMajor == 80
                Actor2.setActorVar(rk_VB_TravelTourism_Major_Actor, 1)
                Actor2.setActorVar(rk_VB_tag_TTT, 1)
                Actor2.setActorVar(rk_VB_AcIdCC_TTT, AcID)
            ElseIf choiceCourseMajor == 90
                Actor2.setActorVar(rk_VB_Veterinary_Major_Actor, 1)
                Actor2.setActorVar(rk_VB_tag_TVE, 1)
                Actor2.setActorVar(rk_VB_AcIdCC_TVE, AcID)
            EndIf
            Actor2.setActorVar(rk_VB_tag_Student, 1)
        EndIf
        Actor2.dress()
        Actor2.show()
        Actor.moveToPersonStand(Actor2, 50)
        "One of my <Player.fraternity_or_sorority> <Player.brothers_or_sisters> <Actor.name> has been hitting on this <Actor2.guy_or_girl> studying <TextMajorChosen> all night but <Actor2.he_or_she> was having none of it."
        "I wonder how long it would take for <Actor.name> to get the message and leave the poor <Actor2.guy_or_girl> alone."
        Actor2.hide()
        "Looks like <Actor.he_or_she> gave up now ... oh no, <Actor.he_or_she>'s just heading to the bar to make another drink. Drinking down the sorrow of being rejected, I suppose."
        "Wait, <Actor.he_or_she>'s taking out a white powder package and pouring some of it into the drink ... The drink must be intended for the <Actor2.guy_or_girl> <Actor.he_or_she> is trying to get with, no doubt ..."
        0:: "Convince <Actor.name> to stop"
        1:: "Watch what's going to happen"
        
        If 0
            Player.moveToPersonStand(Actor, 50)
            Player:: "<Actor.name>, I saw you pouring that into the drink. Don't even think about it, <Actor.buddy_or_girl>! Think about the consequences!"
            If random(0, 100) < interpersonal
                Ahead = false
                Actor:: "You're right. I almost did something I would regret for the rest of my life ..."
            Else
                Ahead = true
                Actor:: "Huh? You saw me pouring what into what drink? I have no idea what you're talking about."
            EndIf
        Else
            Ahead = true
        EndIf
        If Ahead
            Actor2.show()
            Actor.moveToPersonStand(Actor2, 50)
            "As expected, <Actor.name> proceeded to offer the spiked drink to the <Actor2.guy_or_girl> <Actor.he_or_she> was hitting on earlier."
            "It's pretty much now or never for me to put an end to this."
            0:: "Warn the <Actor2.guy_or_girl>"
            1:: "Let's not cause a scene"
            
            If 0
                karma += 5
                Ahead = false
                "I can't just stand by and watch a terrible crime being committed."
                Player.moveToPersonStand(Actor2, 50)
                Player:: "Wait! Please don't drink that! I saw some white powder being poured into it."
                Actor2:: "What? Oh my God!"
                Actor.hide()
                "Of course, <Actor.name> already escaped the scene as fast as <Actor.he_or_she> could as soon as I opened my mouth."
                Actor2:: "That <Actor.bastard_or_bitch>! I was getting creepy vibes from <Actor.him_or_her> all night."
                Actor2:: "You saved me! Thank you so much!"
                0:: !Actor2.isContactExchanged():: "Exchange numbers with <Actor2.him_or_her>"
                1:: "Try to seduce <Actor2.him_or_her> this very night"
                2:: "It's only the right thing to do"
                
                If 0
                    "We got talking a bit before exchanging numbers to get to know each other better in the future."
                    exchangeContact(Actor2)
                ElseIf 1
                    If Actor2.isInterestedIn(Player) && random(50, 125) < Actor2:perversion + Actor2:attractiontoplayer
                        "We got talking a bit but with the adrenaline of <Actor2.him_or_her> just escaping a potential date rape and me being the hero, the conversation soon turned quite flirtatious."
                        setBackground(home)
                        "And soon, we ended up in bed together"
                        Sex(Player, Actor2)
                        If HungerEnable > 0
                            Player.modifyActorVar(rk_VB_Hunger, -2)
                        EndIf
                        "Yes, <Actor.name>, that's how it's done. It pays to be a <Player.gentleman_or_lady>, not a creepy date rapist."
                    Else
                        "We got talking a bit but unfortunately, as much as I try to flirt, <Actor2.he_or_she> wasn't having anymore of it than <Actor2.he_or_she> did for <Actor.name> earlier."
                        "I guess the date rape threat earlier probably killed off <Actor2.his_or_her> mood for tonight."
                    EndIf
                EndIf
            Else
                karma -= 2
                If isModEnabled(vin_NonConsensual)
                    Ahead = true
                Else
                    Ahead = false
                    "Even without my warning, this <TextMajorChosen> student has enough wits about <Actor2.him_or_her> to not accept the drink."
                    "After all, date rape at a <Player.fraternity_or_sorority> party is hardly unheard of, and it's normal to get suspicious when a <Actor.guy_or_girl> you just rejected come back with a drink."
                EndIf
            EndIf
            If Ahead
                "Not aware of the threat contained in that drink, the poor <Actor2.guy_or_girl> drink it without hesitation."
                "Soon enough, the drug visibly took its effects on the victim and <Actor2.he_or_she> was guided into a bedroom by <Actor.name>."
                Actor2.hide()
                Actor.hide()
                "What should I do now?"
                0:: "Peep on them"
                1:: "None of my business"
                
                If 0
                    setBackground(home)
                    Actor2.show()
                    Actor.show()
                    "I decided to follow them to the bedroom and watch the whole thing unfold ..."
                    TalkNonConsensual()
                    If Actor.isMale() && !Actor2.isMale()
                        Filter(AggressiveFM)
                    Else
                        Filter(Aggressive)
                    EndIf
                    Sex(Actor, Actor2)
                    "I can't believe I just stood there and watched my <Actor.fraternity_or_sorority> date-raping a fellow student. Since I'm basically an accomplice now by not putting a stop to it, might as well get some rewards for it?"
                    0:: "Let's rape <Actor2.him_or_her> together, <Actor.bro_or_sis>."
                    1:: "I'm not that low"
                    
                    If 0
                        Actor:: "Sure, it's not like <Actor2.he_or_she> could say no now ... I gave <Actor2.him_or_her> a rather high dose, you know."
                        TalkNonConsensual()
                        Sex(Player, Actor, Actor2)
                        If HungerEnable > 0
                            Player.modifyActorVar(rk_VB_Hunger, -3)
                        EndIf
                    EndIf
                EndIf
            EndIf
        EndIf
        If Actor2.isValid()
            Actor2.saveAndDelete()
        EndIf
    SceneEnd() // Improved by Raddeck
    timeout(200, frat_spiked)
