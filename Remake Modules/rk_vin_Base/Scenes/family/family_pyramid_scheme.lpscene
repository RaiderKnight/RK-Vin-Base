WHAT: all, -pickpocket, -go_to_the_bathroom, -sleep, -sleep_hotel, -nap, -nap_hotel, -rk_VB_small_sleep
WHERE: home
WHEN: 8 - 22
WHO: Actor = getRelative(); If Actor:rapportwithplayer > -10 && Actor:intelligence < Random(0, 30)*Random(0, 1)
OTHER: none

    SceneStart()
    
        TBstock_IPhone = Player.getActorVar(TBstock_IPhone)
        TBstock_Samsung = Player.getActorVar(TBstock_Samsung)
        TBstock_OnePlus = Player.getActorVar(TBstock_OnePlus)
        TBstock_LPGPower = Player.getActorVar(TBstock_LPGPower)
        
        TBstock_LPX = Player.getActorVar(TBstock_LPX)
        TBstock_LPware = Player.getActorVar(TBstock_LPware)
        TBstock_LPPavilion = Player.getActorVar(TBstock_LPPavilion)
        TBstock_ZellVostro = Player.getActorVar(TBstock_ZellVostro)
        
        Kstock_IPhone = Player.getActorVar(Kstock_IPhone)
        Kstock_Samsung = Player.getActorVar(Kstock_Samsung)
        Kstock_OnePlus = Player.getActorVar(Kstock_OnePlus)
        Kstock_LPGPower = Player.getActorVar(Kstock_LPGPower)
        
        Kstock_LPX = Player.getActorVar(Kstock_LPX)
        Kstock_LPware = Player.getActorVar(Kstock_LPware)
        Kstock_LPPavilion = Player.getActorVar(Kstock_LPPavilion)
        Kstock_ZellVostro = Player.getActorVar(Kstock_ZellVostro)
        
        SBstock_IPhone = Player.getActorVar(SBstock_IPhone)
        SBstock_Samsung = Player.getActorVar(SBstock_Samsung)
        SBstock_OnePlus = Player.getActorVar(SBstock_OnePlus)
        SBstock_LPGPower = Player.getActorVar(SBstock_LPGPower)
        
        SBstock_LPX = Player.getActorVar(SBstock_LPX)
        SBstock_LPware = Player.getActorVar(SBstock_LPware)
        SBstock_LPPavilion = Player.getActorVar(SBstock_LPPavilion)
        SBstock_ZellVostro = Player.getActorVar(SBstock_ZellVostro)
        
        MBstock_IPhone = Player.getActorVar(MBstock_IPhone)
        MBstock_Samsung = Player.getActorVar(MBstock_Samsung)
        MBstock_OnePlus = Player.getActorVar(MBstock_OnePlus)
        MBstock_LPGPower = Player.getActorVar(MBstock_LPGPower)
        
        MBstock_LPX = Player.getActorVar(MBstock_LPX)
        MBstock_LPware = Player.getActorVar(MBstock_LPware)
        MBstock_LPPavilion = Player.getActorVar(MBstock_LPPavilion)
        MBstock_ZellVostro = Player.getActorVar(MBstock_ZellVostro)
        
        Ostock_IPhone = Player.getActorVar(Ostock_IPhone)
        Ostock_Samsung = Player.getActorVar(Ostock_Samsung)
        Ostock_OnePlus = Player.getActorVar(Ostock_OnePlus)
        Ostock_LPGPower = Player.getActorVar(Ostock_LPGPower)
        
        Ostock_LPX = Player.getActorVar(Ostock_LPX)
        Ostock_LPware = Player.getActorVar(Ostock_LPware)
        Ostock_LPPavilion = Player.getActorVar(Ostock_LPPavilion)
        Ostock_ZellVostro = Player.getActorVar(Ostock_ZellVostro)
        
        LRstock_IPhone = Player.getActorVar(LRstock_IPhone)
        LRstock_Samsung = Player.getActorVar(LRstock_Samsung)
        LRstock_OnePlus = Player.getActorVar(LRstock_OnePlus)
        LRstock_LPGPower = Player.getActorVar(LRstock_LPGPower)
        
        LRstock_LPX = Player.getActorVar(LRstock_LPX)
        LRstock_LPware = Player.getActorVar(LRstock_LPware)
        LRstock_LPPavilion = Player.getActorVar(LRstock_LPPavilion)
        LRstock_ZellVostro = Player.getActorVar(LRstock_ZellVostro)
        
        SRstock_IPhone = Player.getActorVar(SRstock_IPhone)
        SRstock_Samsung = Player.getActorVar(SRstock_Samsung)
        SRstock_OnePlus = Player.getActorVar(SRstock_OnePlus)
        SRstock_LPGPower = Player.getActorVar(SRstock_LPGPower)
        
        SRstock_LPX = Player.getActorVar(SRstock_LPX)
        SRstock_LPware = Player.getActorVar(SRstock_LPware)
        SRstock_LPPavilion = Player.getActorVar(SRstock_LPPavilion)
        SRstock_ZellVostro = Player.getActorVar(SRstock_ZellVostro)
        
        stock_IPhone = Player.getActorVar(stock_IPhone)
        stock_Samsung = Player.getActorVar(stock_Samsung)
        stock_OnePlus = Player.getActorVar(stock_OnePlus)
        stock_LPGPower = Player.getActorVar(stock_LPGPower)
        
        stock_ZellVostro = Player.getActorVar(stock_ZellVostro)
        stock_LPPavilion = Player.getActorVar(stock_LPPavilion)
        stock_LPware = Player.getActorVar(stock_LPware)
        stock_LPX = Player.getActorVar(stock_LPX)
        
        TBstock_Computer = TBstock_ZellVostro + TBstock_LPPavilion + TBstock_LPware + TBstock_LPX
        TBStock_phones = TBstock_IPhone + TBstock_Samsung + TBstock_OnePlus + TBstock_LPGPower
        
        Kstock_Computer = Kstock_ZellVostro + Kstock_LPPavilion + Kstock_LPware + Kstock_LPX
        KStock_phones = Kstock_IPhone + Kstock_Samsung + Kstock_OnePlus + Kstock_LPGPower
        
        SBstock_Computer = SBstock_ZellVostro + SBstock_LPPavilion + SBstock_LPware + SBstock_LPX
        SBStock_phones = SBstock_IPhone + SBstock_Samsung + SBstock_OnePlus + SBstock_LPGPower
        
        MBstock_Computer = MBstock_ZellVostro + MBstock_LPPavilion + MBstock_LPware + MBstock_LPX
        MBStock_phones = MBstock_IPhone + MBstock_Samsung + MBstock_OnePlus + MBstock_LPGPower
        
        LRstock_Computer = LRstock_ZellVostro + LRstock_LPPavilion + LRstock_LPware + LRstock_LPX
        LRStock_phones = LRstock_IPhone + LRstock_Samsung + LRstock_OnePlus + LRstock_LPGPower
        
        SRstock_Computer = SRstock_ZellVostro + SRstock_LPPavilion + SRstock_LPware + SRstock_LPX
        SRStock_phones = SRstock_IPhone + SRstock_Samsung + SRstock_OnePlus + SRstock_LPGPower
        
        Ostock_Computer = Ostock_ZellVostro + Ostock_LPPavilion + Ostock_LPware + Ostock_LPX
        OStock_phones = Ostock_IPhone + Ostock_Samsung + Ostock_OnePlus + Ostock_LPGPower
        
        Stock_phonesP = stock_IPhone + stock_Samsung + stock_OnePlus + stock_LPGPower
        Stock_phone = stock_IPhone + stock_Samsung + stock_OnePlus + stock_LPGPower
        stock_Computer = stock_ZellVostro + stock_LPPavilion + stock_LPware + stock_LPX
        
        IBuyaComputer = Player.getActorVar(rk_VB_IBuyaComputer) // How many computers I buy?
        IBuyaPhone = Player.getActorVar(rk_VB_IBuyaPhone) // How many phones I buy?

        Stock_Computers = Ostock_Computer + SRstock_Computer + LRstock_Computer + MBstock_Computer + SBstock_Computer + Kstock_Computer + TBstock_Computer + stock_Computer
        Stock_phones = Stock_phonesP + OStock_phones + SRStock_phones + LRStock_phones + MBStock_phones + SBStock_phones + KStock_phones + TBStock_phones + Stock_phone
        
        If [Stock_Computers <= 0 && Stock_phones <= 0] || [IBuyaComputer <= 0 && IBuyaPhone <= 0]
            SceneEnd()
        Else
            Actor.dress()
            Actor.show(2)
            Actor(Happy):: "<Player.name>, do you have time now for a chat?"
            Player(Happy):: "Of course, <Actor.Relationship>. What is it?"
            Actor(Happy):: "I recently became a distributor for Pyramid Supplements International. Our state-of-the-art R&D team recently came up with a new product: the Magnum XXX snake oil."
            Actor(Happy):: "I have used it for the last month and feel 10 years younger. Don't tell anyone else this but because we're family, I can give you a 50% discount."
            PSImoney = Random(50, 200)
            PSImoney_Loc = PSImoney.convertToLocalCurrency()
            Actor(Happy):: "It cost only <PSImoney_Loc>."
            "Oh no, my naive <Actor.relationship> is tricked into yet another scammy get-rich-quick multi-level marketing scheme again ..."
            0:: "Buy it"
            1:: "Find an excuse not to buy it"
            2:: "Convince <Actor.name> to quit the scheme"
            
            If 0
            
                Player(Annoyed):: "Okay, just to support you!"
                money -= PSImoney
                masochist += Random(0, 0.25)
                "Damn, this thing costs a small fortune, but I just want to support my <Actor.relationship>."
                
            Elseif 1
            
                Random
                    Player(Sad):: "That sounds amazing, but I'm pretty sure that is not legit! No thanks!"
                    Player(Sad):: "That sounds amazing, but I'm a bit broke right now. I'll get back to you after my next paycheck."
                    Player(Sad):: "That sounds illegal, I'm not interested!"
                EndRandom
                Actor:rapportwithplayer -= Random(0, 2)
                
            Else
            
                Player(Angry):: "<Actor.Relationship>! Please stop getting involved with these scams. You'll never make any money, and worse, you'll ruin all your personal relationships."
                karma += 2.5
                
                If Random(0, 200) < interpersonal
                
                    Actor(Sad):: "Maybe you're right. This isn't the first time that I have fallen victim to these pyramid schemes. I probably should just get a normal job."
                    Actor:intelligence => 30
                    Actor:rapportwithplayer += Random(0, 2)
                    
                Else
                
                    Actor(Angry):: "What do you know about entrepreneurship? Just wait, you'll think again when I become a millionaire next year."
                    Actor:rapportwithplayer -= Random(0, 5)
                    Actor:intelligence -= 0.5
                    
                Endif
                
            Endif
        
        Endif
    SceneEnd()  // Scene improved by Raddeck
    timeout(1500, family_pyramid_scheme)