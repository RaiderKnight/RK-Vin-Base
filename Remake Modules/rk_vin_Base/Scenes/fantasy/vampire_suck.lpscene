WHAT: none
WHERE: none
WHEN: 0 - 24
WHO: none
OTHER: none

    SceneStart()
        If isModEnabled(rk_vin_Base)
            TempIntel = Player:intelligence
            TempAttr = Player:attractiveness
            TempFert = Player:fertility
            TempJobp = Player:jobperformance
            TempJobx = Player:jobexperience
            TempMusc = Player:muscle
            TempMart = Player:martial
            TempFitn = Player:fitness
            DrinkVBlood = rk_VB_DrinkVBlood.getGlobal()
            HBloodInv = Player.getActorVar(rk_VB_Hum_BloodInv)
            OBloodInv = Player.getActorVar(rk_VB_Orc_BloodInv)
            EBloodInv = Player.getActorVar(rk_VB_Elf_BloodInv)
            VBloodInv = Player.getActorVar(rk_VB_Vam_BloodInv)
            HypnoLvL = Player.getActorVar(rk_VB_VampHypnoLvL)
            Hunger = Player.getActorVar(rk_VB_Hunger)
            HungerEnable = rk_VB_EnableHunger.getGlobal()
            UrgeToPeeEnable = rk_VB_UrgeToPeeEnable.getGlobal()
            UrgeToPee = Player.getActorVar(rk_VB_UrgeToPee)
            MonEnergAssez = false
            sangEnrg = random(5, 15)
            sangEnrg = sangEnrg.round()
            AgeLVL = Actor:age
            AttractLVL = Actor:attractiveness
            FertiLVL = Actor:fertility
            IntelLVL = Actor:intelligence
            TotalMixture = AttractLVL + FertiLVL + IntelLVL
            MagicNum = TotalMixture/10
            If HypnoLvL > 100
                Player.setActorVar(rk_VB_VampHypnoLvL, 100)
            EndIf
            GEuDuSang = false
            DansMarde = false
            PlusEnerg = false
            ContiShit = false
            VolerSang = false
            If DrinkVBlood == 1
                "Barrfff! I don't know what's wrong with me but I feel really bad!"
                intelligence -= random(0, 5)
                mood -= random(2, 5)
                attractiveness -= random(1, 3)
                fertility -= random(0, 5)
                jobperformance -= random(0, 3)
                jobexperience -= random(0, 3)
                muscle -= random(0, 3)
                martial -= random(1, 3)
                fitness -= random(0, 3)
                "Sure, I've got the symptoms of a guy who sucked the blood of a dead vampire!"
                "I think I should go to the hospital to clean my blood! Before it gets any worse!"
                "Should I go to the hospital?"
                0:: "Yes"
                1:: "No"
                3:: "Check if I have a bottle in my pockets."
                
                If 0
                    followUp(naked_with_doctor)
                ElseIf 3
                    rk_VB_vampire_suck_BC_Temp.setGlobal(1)
                    followUp(rk_VB_check_pockets)
                EndIf
            EndIf
        EndIf
        If energy < 25
            "I can't do that, my energy level is dangerously low ... The blood thrist is killing me. There's other solutions though ..."
            0:: "Steal from a hospital's blood bank"
            1:: "Let's go buy some blood"
            2:: "Let's go home check my blood stash"
            3:: "Check if I have a bottle in my pockets."
            99:: "Let's endure a bit more"
            
            If 0
                Loc = findNearbyBuilding(hospital)
                moveTo(Loc)
                setBackground(hospital)
                Actor.hide()
                Actor2 = generatePersonTemporary()
                Actor2.dressUniform(police)
                Actor2.show()
                "Here it is, the area of the hospital where all the donated blood is stored is guarded by just one security guard."
                0:: "Seduce <Actor2.him_or_her>"
                99:: "Sneak past <Actor2.him_or_her>"
                
                If 0
                    If !Actor2.isInterestedIn(Player)
                        Actor2(Furious):: "What are you doing? Thief! Alert! Alert!"
                        "My charm power, din't work this time! I must leave right now!"
                        sneak -= 1
                        Success = false
                        If MoinChanceux < 100
                            "Damn the cops..."
                            followUp(rk_VB_Steal_Arrest)
                        Else
                            "I must leave right now!"
                        EndIf
                    Else
                        "With my charm power, it was an easy seduction."
                        Player.strip()
                        Actor2.strip()
                        Sex(Actor2, Player)
                        If HungerEnable > 0
                            Player.modifyActorVar(rk_VB_Hunger, -2)
                        EndIf
                        Player.dress()
                        "The guard has fallen asleep, should I try to steal some blood?"
                        0::"Yes"
                        1::"No"
                        
                        If 0
                            SneakPourSang = true
                        EndIf
                    EndIf
                Else
                    SneakGame()
                    If random(0, 100) < sneak
                        "I managed to sneak past <Actor2.him_or_her> quietly and enter quietly into the blood stockroom"
                        sneak += 1
                        Success = true
                    Else
                        Actor2(Furious):: "What are you doing? Thief! Alert! Alert!"
                        "Oh no, the guard spotted me and sounded the alarm."
                        sneak -= 1
                        Success = false
                        If MoinChanceux < 100
                            "Damn the cops..."
                            followUp(rk_VB_Steal_Arrest)
                        Else
                            "I must leave right now!"
                        EndIf
                    EndIf
                EndIf
                If SneakPourSang
                    If random(0, 100) < sneak
                        "I managed to steal <Actor2.his_or_her> and get access quietly to the blood stockroom."
                        sneak += 1
                        Success = true
                    Else
                        Actor2(Furious):: "What are you doing? Thief! Alert! Alert!"
                        "Oh no, the guard spotted me and sounded the alarm."
                        sneak -= 1
                        Success = false
                        If MoinChanceux < 100
                            "Damn the cops..."
                            followUp(rk_VB_Steal_Arrest)
                        Else
                            "I must leave right now!"
                        EndIf
                    EndIf
                EndIf
                If Success
                    VolerSang = true
                    "Oh wow, so much delicious blood in here ... This will keep my energy up for a long time."
                    "Let's take a sip to fill up on energy!"
                    energy += 25
                    If HungerEnable > 0
                        Player.modifyActorVar(rk_VB_Hunger, 15)
                    EndIf
                    "I will try to bring in as many as possible and then hide them in my stash"
                    PuEmmener = random(10, 50)
                    PuEmmener = PuEmmener.round()
                    BLDChanceTo = random(1, 4)
                    BLDChanceTo = BLDChanceTo.round()
                    If BLDChanceTo == 1
                        BLDType = "Elven"
                    ElseIf BLDChanceTo == 2
                        BLDType = "Human"
                    ElseIf BLDChanceTo == 3
                        BLDType = "Orc"
                    ElseIf BLDChanceTo == 4
                        BLDType = "Vampire"
                    EndIf
                    "I finally managed to steal <PuEmmener> bottles of <BLDType> blood"
                    If BLDChanceTo = 1
                        Player.modifyActorVar(rk_VB_Elf_BloodInv, PuEmmener)
                    ElseIf BLDChanceTo == 2
                        Player.modifyActorVar(rk_VB_Hum_BloodInv, PuEmmener)
                    ElseIf BLDChanceTo == 3
                        Player.modifyActorVar(rk_VB_Orc_BloodInv, PuEmmener)
                    ElseIf BLDChanceTo == 4
                        Player.modifyActorVar(rk_VB_Vam_BloodInv, PuEmmener)
                    EndIf
                Else
                    "Let's disappear now ..."
                EndIf
            ElseIf 1
                followUp(rk_VB_Buy_Blood)
            ElseIf 2
                moveTo(home)
                followUp(rk_VB_Vamp_Blood_Stash)
            ElseIf 3
                rk_VB_vampire_suck_Temp.setGlobal(1)
                followUp(rk_VB_check_pockets) 
            EndIf
        ElseIf Actor.isTemporary()
            Actor.show()
            "This is a complete stranger ... a perfect victim. Should I stalk <Actor.him_or_her> to somewhere quiet and suck some of <Actor.his_or_her> blood?"
            0:: "Yes"
            1:: "No"
            
            If 0
                setBackground(street)
                "My target is all alone. Here's my chance. Let's just suck out some blood quickly then disappear. Stealth is the key."
                SneakGame()
                If random(0, 100) < sneak
                    Player(Kiss)::"..."
                    animatePair(Player, Actor, Kissing)
                    energy -= 25
                    Actor:fitness -= 1
                    Actor:attractiveness -= 1
                    If Actor.isRace(Elf)
                        intelligence += random(1, 3)
                        attractiveness += random(1, 3)
                    ElseIf Actor.isRace(Orc)
                        muscle += random(1, 3)
                        martial += random(1, 3)
                    ElseIf Actor.isRace(Vampire)
                        fitness += random(1, 3)
                        attractiveness += random(1, 3)
                    EndIf
                    If energy > 25 && energy < 100
                        MonEnergAssez = true
                    EndIf
                    Player.modifyActorVar(rk_VB_VampHypnoLvL, MagicNum)
                    energy += MagicNum
                    mood += random(1, 3)
                    Player(Happy)::"Oh yeah! Now I feel better!"
                    GEuDuSang = true
                    If Actor.isRace(Vampire)
                        PlusEnerg = true
                    EndIf
                Else
                    Actor(Scared):: "Vampire! Vampire attack! Help me!"
                    "Oh no, my target was alerted and ran off."
                    sneak -= 1
                    mood -= random(1, 5)
                EndIf
            EndIf
        Else
            Actor.show()
            "Should I 'ask' <Actor.name> to let me suck some blood? Asking with a healthy dose of hypnosis of course."
            0:: "Yes"
            1:: "No"
            
            If 0
                Actor(Happy)::"Sure, go on, serve yourself!"
                energy -= 25
                Player.modifyActorVar(rk_VB_VampHypnoLvL, -50)
                Player(Kiss)::"..."
                animatePair(Player, Actor, Kissing)
                If Actor.isRace(Elf)
                    intelligence += random(1, 3)
                    attractiveness += random(1, 3)
                ElseIf Actor.isRace(Orc)
                    muscle += random(1, 3)
                    martial += random(1, 3)
                ElseIf Actor.isRace(Vampire)
                    fitness += random(1, 3)
                    attractiveness += random(1, 3)
                EndIf
                Actor:fitness -= 1
                Actor:attractiveness -= 1
                "That's some yummy blood, enough to keep my energy level up for a while."
                Player.getActorVar(rk_VB_VampHypnoLvL)
                energy += MagicNum
                mood += random(1, 3)
                MonPrix = 100
                MonPrix_loc = MonPrix.convertToLocalCurrency(true)
                "How kind of <Actor.name> to let me do that ... Did I give <Actor.him_or_her> much of a choice though?"
                Player.modifyActorVar(rk_VB_VampHypnoLvL, MagicNum)
                "<Actor.He_or_She> seems quite weakened after I took some blood from <Actor.him_or_her>, we mustn't overdo it as it could have an effect on <Actor.name>'s long term health and attractiveness."
                0:: "Reward <Actor.him_or_her> with sex"
                1:: "Give <Actor.him_or_her> some money (<MonPrix_loc>)"
                99:: "Give no reward"
                
                If 0
                    If Actor:energy > 25 && [Actor.isInterestedIn(Player) || Actor:rapportwithplayer > 5 || Actor:arousal > 5]
                        Actor(Happy)::"Sure, I think it's a good idea in exchange for my blood!"
                        "I think <Actor.he_or_she> is still under the effect of my hypnosis, let's take advantage of this moment to fuck hard!"
                        Actor.strip()
                        Player.strip()
                        Sex(Actor, Player)
                        If HungerEnable > 0
                            Player.modifyActorVar(rk_VB_Hunger, -2)
                        EndIf
                    Else
                        Actor(Happy)::"Sorry <Player.name> but I'm too exhausted to fuck! Maybe another time but not now!"
                    EndIf
                ElseIf 1
                    Player(Happy)::"To thank you for your service here is a small amount of money!"
                    Actor(Happy)::"Cool Thanks!"
                    money -= MonPrix
                Else
                    "Well, I don't feel like rewarding <Actor.him_or_her> for the service!"
                EndIf
                If Actor.isRace(Vampire)
                    PlusEnerg = true
                EndIf
            EndIf
            If energy > 25 && energy < 100
                MonEnergAssez = true
            EndIf
        EndIf
        If isModEnabled(rk_vin_Base)
            If MonEnergAssez
                "Do I suck all <Actor.his_or_her> blood?"
                0:: "Yes"
                1:: "No"
                
                If 0
                    If Actor.isRace(Elf)
                        intelligence += random(1, 3)
                        attractiveness += random(1, 3)
                    ElseIf Actor.isRace(Orc)
                        muscle += random(1, 3)
                        martial += random(1, 3)
                    ElseIf Actor.isRace(Vampire)
                        fitness += random(1, 3)
                        attractiveness += random(1, 3)
                    EndIf
                    Player(Kiss)::"..."
                    animatePair(Player, Actor, Kissing)
                    Player.modifyActorVar(rk_VB_VampHypnoLvL, 100)
                    energy => 100
                    mood += random(5, 10)
                    Player(Happy)::"Oh yeah! Now I'm in top shape, I can feel my energy at its peak!"
                    Actor.deletePerson()
                EndIf
                "Let's disappear now ..."
                If Actor.isRace(Vampire) && intelligence < 50
                    DansMarde = true
                EndIf
            EndIf
            If PlusEnerg
                MagicNumB = MagicNum/2
                Player(Happy)::"Oh yeah vampire blood! It always gives you more energy!"
                energy += MagicNumB
                Player.modifyActorVar(rk_VB_VampHypnoLvL, MagicNumB)
            EndIf
            If GEuDuSang
                Bonus = Player:intelligence
                LotterySTD = random(0, 100)
                TotalSTD = LotterySTD + Bonus
                If VolerSang && TotalSTD <= 50
                    rk_VB_VampSTD.setGlobal(1)
                    "Oh no! It was bad quality blood, I now have an STD."
                ElseIf TotalSTD <= 50
                    rk_VB_VampSTD.setGlobal(1)
                    "Oh no! It was bad quality blood, I now have an STD."
                EndIf
            EndIf
            If GEuDuSang && VolerSang
                "Well on top of getting an STD, I managed to steal some bad blood! Now I'm really in deep shit!"
                ContiShit = true
            ElseIf GEuDuSang
                ContiShit = true
            EndIf
            If DansMarde
                "Damn stupid I am..."
                "Like an amateur I forgot that you should never suck all the blood of a vampire because it makes you extremely sick...."
                "Now I'm really in deep shit!"
                Player.setActorVar(rk_VB_intelligence_Temp, TempIntel)
                Player.setActorVar(rk_VB_attractiveness_Temp, TempAttr)
                Player.setActorVar(rk_VB_fertility_Temp, TempFert)
                Player.setActorVar(rk_VB_jobperformance_Temp, TempJobp)
                Player.setActorVar(rk_VB_jobexperience_Temp, TempJobx)
                Player.setActorVar(rk_VB_muscle_Temp, TempMusc)
                Player.setActorVar(rk_VB_martial_Temp, TempMart)
                Player.setActorVar(rk_VB_fitness_Temp, TempFitn)
                ContiShit = true
            EndIf
            If ContiShit
                rk_VB_DrinkVBlood.setGlobal(1)
                mood -= 50
                energy -= random(25, 50)
                "What I should do?"
                0::"Go to hospital"
                1::"Nothing and go home"
                
                If 0
                    "Let's go see a doctor!"
                    followUp(naked_with_doctor)
                Else
                    "I decided to go home instead of going to the doctor!"
                    moveTo(home)
                EndIf
            EndIf
        EndIf
        Actor.hide()
        Actor2.hide()
    SceneEnd() // Improved by Raddeck