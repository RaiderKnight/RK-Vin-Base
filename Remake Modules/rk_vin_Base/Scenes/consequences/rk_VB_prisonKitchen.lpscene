WHAT: all
WHERE: prison
WHEN: 0 - 24
WHO: none
OTHER: none

    SceneStart()
        // Based on LadyDaisy story - Rewriting/coding by Raddeck
        aloa = false
        preferentialtreatment = Player.getActorVar(rk_VB_preferentialtreatment)
        MID = rk_VB_mateidPris.getGlobal()
        taginmate = Player.getActorVar(rk_VB_taginmate)
        Actor = generatePersonTemporary()
        Actor.dressUniform(Police)
        Actor:arousal => random(15, 50)
        Actor.hide()
        Mate4 = generatePersonTemporary()
        While !Mate4.isSameGender(Player)
            Mate4 = generatePersonTemporary()
        EndWhile
        If MID == taginmate
            Mate5 = getSpecific(taginmate)
            Mate5.hide()
        EndIf
        Mate4.makeInterested(Player)
        Mate4.randomizeRace()
        Mate4.randomizeFace()
        Mate4.randomizeHairs()
        Mate4.dressUniform(Prison)
        Mate4.hide()
        If isModEnabled(rk_vin_Base)
            setBackground(kitchen)
            allonsy = false
            "One morning they assigned me to the kitchen crew. They gave me the job of washing dishes, a rather monotonous job but it allowed me to fraternize with the other inmates."
            If Mate5.isValid()
                Actor.show()
                Mate5.show()
                Mate5.moveToPersonStand(Player, 50)
                Mate5(Happy)::"Hey, baby!"
                Player(Happy)::"Hey, hi <Mate5.name>!"
                Actor.hide()
                animatePair(Mate5, Player, Kissing)
                Player(Curious)::"Why don't we ever eat together?"
                Mate5(Sad)::"I never see you. Maybe they know about us and keep us apart for that reason!"
                Player(Sad)::"I hope not!"
                Mate5(Flirty)::"That reminds me though, I know a spot in the kitchen where we can fuck in peace!"
                Player(Curious)::"How do you know?"
                Mate5(Flirty)::"I've seen people doing it there. You know, I've seen inmates doing it, and even some guards!"
                Player(Curious)::"Do you want to do it there now?"
                Mate5(Flirty)::"Sure. My shift's still got some time left in it!"
                "What should I do?"
                0::"Follow <Mate5.him_or_her>"
                1::"Refuse"
                
                If 0
                    allonsy = true
                Else
                    Player(Happy)::"Are you crazy, not here, we will be caught by the guards, that's for sure!"
                    Mate5(Sad)::"Well, it's up to you! But if you want to fuck, you should take what comes!"
                    perversion -= random(0, 1)
                    Player(Happy)::"Noted!"
                    "Do I changed my mind?"
                    0::"Ok, let' fuck"
                    1::"No"
                    
                    If 0
                        allonsy = true
                        aloa = true
                    Else
                        arousal -= random(0, 1)
                        perversion -= random(0, 1)
                        Player(Happy)::"Noted!"
                    EndIf
                EndIf
            Else
                Actor.show()
                Mate4.show()
                Mate4.moveToPersonStand(Player, 50)
                Mate4(Flirty)::"Hey, baby! Looks like we'll work together today!"
                Mate4(Flirty)::"My name is <Mate4.name>!"
                Player(Happy)::"Hi <Mate4.name>!"
                Actor.hide()
                animatePair(Mate4, Player, Kissing)
                Mate4(Flirty)::"Why don't we ever eat together?"
                Player(Curious)::"I never see you before!"
                Mate4(Flirty)::"I see, but that reminds me though, I know a spot in the kitchen where we can fuck in peace and get to know each other!"
                Player(Curious)::"I don't know!"
                Mate4(Flirty)::"I've seen people doing it there. You know, I've seen inmates doing it, and even some guards!"
                Player(Curious)::"So you want to do it there right now?"
                Mate4(Flirty)::"Sure. My shift's still got some time left in it!"
                "What should I do?"
                0::"Follow <Mate4.him_or_her>"
                1::"Refuse"
                
                If 0
                    allonsy = true
                Else
                    Player(Happy)::"Are you crazy, not here, we will be caught by the guards, that's for sure!"
                    Mate4(Sad)::"Well, it's up to you! But if you want to fuck, you should take what comes!"
                    perversion -= random(0, 1)
                    Player(Happy)::"Noted!"
                    "Do I changed my mind?"
                    0::"Ok, let' fuck"
                    1::"No"
                    
                    If 0
                        allonsy = true
                    Else
                        arousal -= random(0, 1)
                        perversion -= random(0, 1)
                        Player(Happy)::"Noted!"
                    EndIf
                EndIf
            EndIf
            If allonsy
                Player(Happy)::"Ok, let's go to your secret place!"
                setBackground3D(Modules/rk_vin_Base/World/rk_VB_SearchRoom.lpworld)
                Player.strip()
                If aloa
                    Mate5.strip()
                    sex(Mate5, Player)
                    Mate5.dressUniform(Prison)
                    Mate5:rapportwithplayer += random(0, 2)
                    Mate5:attractiontoplayer += random(0, 2)
                Else
                    Mate4.strip()
                    sex(Mate4, Player)
                    Mate4.dressUniform(Prison)
                EndIf
                Player.dressUniform(Prison)
            EndIf
            Actor.show()
            Actor(Serene)::"Time is up, time to go back to your cells!"
            Mate4.moveToPersonStand(Actor, 50)
            Mate5.moveToPersonStand(Actor, 60)
            Player.moveToPersonStand(Actor, 70)
            "The guard escorts each of us to our cells..."
            Actor.hide()
            Mate4.hide()
            Mate5.hide()
            setBackground(prison)
            passTime()
        EndIf  
    SceneEnd()
    timeout(1000, rk_VB_prisonKitchen)