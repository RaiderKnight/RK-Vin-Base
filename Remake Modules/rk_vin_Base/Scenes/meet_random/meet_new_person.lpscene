WHAT: all, -pickpocket, -go_to_the_bathroom, -sleep, -sleep_hotel, -nap, -nap_hotel
WHERE: all, -PC, -fraternity
WHEN: 7-19
WHO: none
OTHER: random(0, 300) < interpersonal || [ [WHAT == socialize || WHERE == nightclub] && random(0, 100) < interpersonal] || [isWithCompanion() && random(0, 200) < CurrentCompanion:interpersonal] || [WHERE == home && random(0, 2000) < interpersonal]


    New_Person = generatePerson()
    SceneStart()
        choiceCourseMajor = rk_VB_choiceCourseMajor.getGlobal()
        UrgeToPeeEnable = rk_VB_UrgeToPeeEnable.getGlobal()
        UrgeToPee = Player.getActorVar(rk_VB_UrgeToPee)
        Hunger = Player.getActorVar(rk_VB_Hunger)
        HungerEnable = rk_VB_EnableHunger.getGlobal()
        New_Person.dress()
        If WHERE == work
            New_Person.addColleague()
            timeout(260, meet_new_person, meet_old_person)
        ElseIf WHERE == home
            If isAtHome()
                New_Person.addNeighbour()
                "Is that a new neighbour moving in?"
                timeout(260, meet_new_person, meet_old_person)
            Else
                New_Person.addDatingFriend()
                "Hmm, who's this? One of my boo's friends perhaps?"
                timeout(260, meet_new_person, meet_old_person)
            EndIf
        ElseIf WHERE == university:work 
            New_Person.setDifferentMajor()
            Actor.setActorVar(rk_VB_tag_Pstudent, 1)
        ElseIf WHERE == university && EnrollDegree >= 1
            If isModEnabled(rk_vin_Base)
                If choiceCourseMajor == 1
                    choiceCourseMajorT = 1
                    TextMajorChosen = "architecture"
                ElseIf choiceCourseMajor == 2
                    choiceCourseMajorT = 2
                    TextMajorChosen = "chemical engineering"
                ElseIf choiceCourseMajor == 3
                    choiceCourseMajorT = 3
                    TextMajorChosen = "classics"
                ElseIf choiceCourseMajor == 4
                    choiceCourseMajorT = 4
                    TextMajorChosen = "computer science"
                ElseIf choiceCourseMajor == 31
                    choiceCourseMajorT = 17
                    TextMajorChosen = "dental"
                ElseIf choiceCourseMajor == 5
                    choiceCourseMajorT = 5
                    TextMajorChosen = "economics"
                ElseIf choiceCourseMajor == 6
                    choiceCourseMajorT = 6
                    TextMajorChosen = "education"
                ElseIf choiceCourseMajor == 7
                    choiceCourseMajorT = 7
                    TextMajorChosen = "English"
                ElseIf choiceCourseMajor == 8
                    choiceCourseMajorT = 8
                    TextMajorChosen = "geography"
                ElseIf choiceCourseMajor == 9
                    choiceCourseMajorT = 9
                    TextMajorChosen = "history"
                ElseIf choiceCourseMajor == 10
                    choiceCourseMajorT = 10
                    TextMajorChosen = "law"
                ElseIf choiceCourseMajor == 11
                    choiceCourseMajorT = 11
                    TextMajorChosen = "mathematics"
                ElseIf choiceCourseMajor == 12
                    choiceCourseMajorT = 12
                    TextMajorChosen = "medicine"
                ElseIf choiceCourseMajor == 13
                    choiceCourseMajorT = 13
                    TextMajorChosen = "music"
                ElseIf choiceCourseMajor == 14
                    choiceCourseMajorT = 14
                    TextMajorChosen = "philosophy"
                ElseIf choiceCourseMajor == 15
                    choiceCourseMajorT = 15
                    TextMajorChosen = "psychology"
                ElseIf choiceCourseMajor == 16
                    choiceCourseMajorT = 16
                    TextMajorChosen = "political sciences"
                ElseIf choiceCourseMajor == 60
                    choiceCourseMajorT = 18
                    TextMajorChosen = "sales and marketing"
                ElseIf choiceCourseMajor == 80
                    choiceCourseMajorT = 19
                    TextMajorChosen = "travel and tourism"
                ElseIf choiceCourseMajor == 90
                    choiceCourseMajorT = 20
                    TextMajorChosen = "veterinary"
                EndIf
                //New_Person.setDifferentMajor()
                AcID = New_Person.getID()
                New_Person.setActorVar(rk_VB_tag_Student, 1)
                ChoixDsonCours = random(1, 20)
                ChoixDsonCours = ChoixDsonCours.round()
                While ChoixDsonCours == choiceCourseMajorT
                    If choiceCourseMajorT == 1
                        New_Person.setActorVar(rk_VB_Architecture_Major_Actor, 1)
                        New_Person.setActorVar(rk_VB_tag_TAR, 1)
                        New_Person.setActorVar(rk_VB_AcIdCC_TAR, AcID)
                    ElseIf choiceCourseMajorT == 2
                        New_Person.setActorVar(rk_VB_Chemical_Engineering_Major_Actor, 1)
                        New_Person.setActorVar(rk_VB_tag_TCE, 1)
                        New_Person.setActorVar(rk_VB_AcIdCC_TCE, AcID)
                    ElseIf choiceCourseMajorT == 3
                        New_Person.setActorVar(rk_VB_Classics_Major_Actor, 1)
                        New_Person.setActorVar(rk_VB_tag_TCL, 1)
                        New_Person.setActorVar(rk_VB_AcIdCC_TCL, AcID)
                    ElseIf choiceCourseMajorT == 17
                        New_Person.setActorVar(rk_VB_Dental_Major_Actor, 1)
                        New_Person.setActorVar(rk_VB_tag_TDM, 1)
                        New_Person.setActorVar(rk_VB_AcIdCC_TDM, AcID)
                    ElseIf choiceCourseMajorT == 4
                        New_Person.setActorVar(rk_VB_Computer_Science_Major_Actor, 1)
                        New_Person.setActorVar(rk_VB_tag_TCS, 1)
                        New_Person.setActorVar(rk_VB_AcIdCC_TCS, AcID)
                    ElseIf choiceCourseMajorT == 5
                        New_Person.setActorVar(rk_VB_Economics_Major_Actor, 1)
                        New_Person.setActorVar(rk_VB_tag_TEC, 1)
                        New_Person.setActorVar(rk_VB_AcIdCC_TEC, AcID)
                    ElseIf choiceCourseMajorT == 6
                        New_Person.setActorVar(rk_VB_Education_Major_Actor, 1)
                        New_Person.setActorVar(rk_VB_tag_TED, 1)
                        New_Person.setActorVar(rk_VB_AcIdCC_TED, AcID)
                    ElseIf choiceCourseMajorT == 7
                        New_Person.setActorVar(rk_VB_English_Major_Actor, 1)
                        New_Person.setActorVar(rk_VB_tag_TEN, 1)
                        New_Person.setActorVar(rk_VB_AcIdCC_TEN, AcID)
                    ElseIf choiceCourseMajorT == 8
                        New_Person.setActorVar(rk_VB_Geography_Major_Actor, 1)
                        New_Person.setActorVar(rk_VB_tag_TGE, 1)
                        New_Person.setActorVar(rk_VB_AcIdCC_TGE, AcID)
                    ElseIf choiceCourseMajorT == 9
                        New_Person.setActorVar(rk_VB_History_Major_Actor, 1)
                        New_Person.setActorVar(rk_VB_tag_THI, 1)
                        New_Person.setActorVar(rk_VB_AcIdCC_THI, AcID)
                    ElseIf choiceCourseMajorT == 10
                        New_Person.setActorVar(rk_VB_Law_Major_Actor, 1)
                        New_Person.setActorVar(rk_VB_tag_TLA, 1)
                        New_Person.setActorVar(rk_VB_AcIdCC_TLA, AcID)
                    ElseIf choiceCourseMajorT == 11
                        New_Person.setActorVar(rk_VB_Mathematics_Major_Actor, 1)
                        New_Person.setActorVar(rk_VB_tag_TMA, 1)
                        New_Person.setActorVar(rk_VB_AcIdCC_TMA, AcID)
                    ElseIf choiceCourseMajorT == 12
                        New_Person.setActorVar(rk_VB_Medicine_Major_Actor, 1)
                        New_Person.setActorVar(rk_VB_tag_TME, 1)
                        New_Person.setActorVar(rk_VB_AcIdCC_TME, AcID)
                    ElseIf choiceCourseMajorT == 13
                        New_Person.setActorVar(rk_VB_Music_Major_Actor, 1)
                        New_Person.setActorVar(rk_VB_tag_TMU, 1)
                        New_Person.setActorVar(rk_VB_AcIdCC_TMU, AcID)
                    ElseIf choiceCourseMajorT == 14
                        New_Person.setActorVar(rk_VB_Philosophy_Major_Actor, 1)
                        New_Person.setActorVar(rk_VB_tag_TPH, 1)
                        New_Person.setActorVar(rk_VB_AcIdCC_TPH, AcID)
                    ElseIf choiceCourseMajorT == 15
                        New_Person.setActorVar(rk_VB_Psychology_Major_Actor, 1)
                        New_Person.setActorVar(rk_VB_tag_TPS, 1)
                        New_Person.setActorVar(rk_VB_AcIdCC_TPS, AcID)
                    ElseIf choiceCourseMajorT == 16
                        New_Person.setActorVar(rk_VB_Political_Sciences_Major_Actor, 1)
                        New_Person.setActorVar(rk_VB_tag_TPOL, 1)
                        New_Person.setActorVar(rk_VB_AcIdCC_TPOL, AcID)
                    ElseIf choiceCourseMajorT == 18
                        New_Person.setActorVar(rk_VB_SalesMarketing_Major_Actor, 1)
                        New_Person.setActorVar(rk_VB_tag_TSM, 1)
                        New_Person.setActorVar(rk_VB_AcIdCC_TSM, AcID)
                    ElseIf choiceCourseMajorT == 19
                        New_Person.setActorVar(rk_VB_TravelTourism_Major_Actor, 1)
                        New_Person.setActorVar(rk_VB_tag_TTT, 1)
                        New_Person.setActorVar(rk_VB_AcIdCC_TTT, AcID)
                    ElseIf choiceCourseMajorT == 20
                        New_Person.setActorVar(rk_VB_Veterinary_Major_Actor, 1)
                        New_Person.setActorVar(rk_VB_tag_TVE, 1)
                        New_Person.setActorVar(rk_VB_AcIdCC_TVE, AcID)
                    EndIf
                EndWhile
            EndIf
        EndIf
        CompanionIntroduced = isWithCompanion()
        If CompanionIntroduced
            Random
                CurrentCompanion(happy):: "Hey <Player.name>, meet <New_Person.name>! <New_Person.He_or_She> is my friend."
                CurrentCompanion(happy):: "Here, let me introduce you two. <New_Person.name>, this is <Player.name>. <Player.name>, this is <New_Person.name>."
                CurrentCompanion(happy):: "<New_Person.name>! Is that you? Come here, let me introduce you to <Player.name>."
            EndRandom
            If CurrentCompanion.IsDating()
                New_Person.addDatingFriend()
            EndIf
        EndIf
        New_Person.show(2)
        InterestedInPC = New_Person.isInterestedIn(Player)
        DominantToPC = New_Person.isDominantSex(Player)
        If InterestedInPC && [DominantToPC || random(0,1) < 0.2] && random(0, 20) < (New_Person:attractiontoplayer + New_Person:interpersonal)
            Random
                "I found myself engaged in a small conversation with someone I just met - <New_Person.name>. Before leaving <New_Person.he_or_she> asked for my number. Should I accept <New_Person.his_or_her> request?"
                "<New_Person.name> approached me and introduced <New_Person.himself_or_herself>. After a small chat, <New_Person.he_or_she> suggested that we exchange contacts. Shall I?"
            EndRandom
            0:: "Yes"
            1:: "No"
                
            If 0
                exchangeContact(New_Person)
                "I happily accepted. We exchanged numbers and went our separate ways."
                If CompanionIntroduced
                    CurrentCompanion(Happy):: "<New_Person.name> is a great person. You made the right choice giving <New_Person.him_or_her> your number."
                    CurrentCompanion:rapportwithplayer += random(0,1)
                EndIf
            Else
                "I found an excuse not to give <New_Person.him_or_her> my number. Disappointed, <New_Person.he_or_she> left."
                If CompanionIntroduced
                    CurrentCompanion(Angry):: "You shouldn't have been so rude to my friend! Next time I won't introduce you to anyone else!"
                    CurrentCompanion:rapportwithplayer -= random(0,2)
                EndIf
            EndIf
        Else
            Random
                "I came across someone interesting, who introduced <New_Person.himself_or_herself> as <New_Person.name>. Should I exchange contacts with <New_Person.him_or_her>?"
                "Just by chance, I met <New_Person.name>, who seemed okay. Perhaps I should ask for <New_Person.his_or_her> number?"
            EndRandom
            0:: interpersonal > 5:: "Yes"
            1:: "No"
                    
            If 0
                If [New_Person:attractiontoplayer < 20 && InterestedInPC] || [!InterestedInPC && New_Person:rapportwithplayer < 0]
                    Random
                        New_Person(Happy):: "Sorry, but I don't feel like I know you well enough to share such personal information just yet."
                        New_Person(Happy):: "It's gonna be a no, I'm afraid. Another day perhaps."
                        New_Person(Irritated):: "Sorry, but I don't normally exchange numbers with someone I've just met."
                    EndRandom
                    New_Person:attractiontoplayer += random(-1, 1)
                    If CompanionIntroduced && [CurrentCompanion:rapportwithplayer > 30 || CurrentCompanion:attractiontoplayer > 30]
                        CurrentCompanion(Irritated):: "Come on, <New_Person.name>. <Player.name> is a good person. You have nothing to worry about!"
                        New_Person(Happy):: "Alright then, if you insist. Sorry for being too cautious!"
                        exchangeContact(New_Person)
                        "We exchanged numbers and parted ways."
                    Else
                        0:: "I understand."
                        1:: masochist < 30:: "It's your loss!"
                                
                        If 0
                            Random
                                Player(Happy):: "That's okay. I understand. You've got to be careful with private information these days."
                                Player(Happy):: "No worries. It's not a big deal."
                                Player(Wink):: "Did I scare you away? Haha! Don't worry. See you around, I guess."
                            EndRandom

                            New_Person:rapportwithplayer += random(1,5)

                            If InterestedInPC
                                New_Person:attractiontoplayer -= ( random(1,10)*New_Person:masochist/100 )
                            EndIf

                        Else
                            Random
                                Player(Angry):: "Fine then. It's your loss being so precious!"
                                Player(Angry):: "Get out of my sight then!"
                                Player(Sarcastic):: "Well, looks like someone has a overly high opinion of <New_Person.himself_or_herself> ..."
                            EndRandom
                                    
                            New_Person:rapportwithplayer -= random(1,10)
                                    
                            If InterestedInPC
                                New_Person:attractiontoplayer += ( random(1,20)*New_Person:masochist/100 )
                                If New_Person:attractiontoplayer > 50
                                    Random
                                        New_Person(Scared):: "Well ... I .... I'm sorry if I came across as arrogant or something. Let's exchange numbers!"
                                        New_Person(Scared):: "Sorry. I didn't mean any offence ... On second thought, here, you can have my number."
                                    EndRandom
                                    
                                    exchangeContact(New_Person)
                                EndIf
                            EndIf
                        EndIf
                    EndIf
                Else
                    exchangeContact(New_Person)
                    "We exchanged numbers and parted ways."
                EndIf
            Else
                "I decided not to give <New_Person.him_or_her> my number."
            EndIf
            If Player.isNaked()
                New_Person(Curious)::"Btw, can you tell me why you're naked?"
                "What should I say?"
                0::"I love playing with strangers!"
                1::"I'm a naturist that's why!"
                2::"Strike back!"
                99::"Just leave!"
                
                If 0
                    If New_Person.isInterestedIn(Player) && New_Person:arousal > 25
                        
                        New_Person:perversion += 1
                        perversion += 1
                        New_Person(Flirty)::"So I'm I... Let's play!"
                        "Do I want to play with <New_Person.him_or_her>?"
                        0::"Yes"
                        1::"No"
                        
                        If 0
                            "We stripped right away and start caressing each other"
                            sex(Player, New_Person)
                            If HungerEnable > 0
                                Player.modifyActorVar(rk_VB_Hunger, -2)
                            EndIf
                        Else
                            Player(Sad)::"Sorry but I've got important things to do first! Maybe next time ..."
                        EndIf 
                        Player.animate()
                        
                    ElseIf New_Person.isInterestedIn(Player)
                    
                        New_Person(Happy)::"You are cute but I should leave before someone see us together ...!"
                        New_Person:attractiontoplayer += random(0, 2)
                        New_Person:rapportwithplayer += random(0, 2)
                        New_Person:arousal += 1
                        New_Person.hide()
                        Player.animate()
                        
                    Else
                    
                        New_Person(Annoyed)::"Fuck off ... pervert!"
                        New_Person:attractiontoplayer -= random(0, 5)
                        New_Person:rapportwithplayer -= random(0, 5)
                        Player.animate()
                    EndIf
                ElseIf 1
                    If New_Person.isInterestedIn(Player) && New_Person:arousal > 25
                        New_Person(Flirty)::"So ... if you're naked it's because you want to get fucked?"
                        0::"I love playing with strangers!"
                        1::"Ew! Not really!"
                        
                        If 0
                            New_Person:perversion += 1
                            perversion += 1
                            "We stripped right away and start caressing each other"
                            sex(Player, New_Person)
                            If HungerEnable > 0
                                Player.modifyActorVar(rk_VB_Hunger, -2)
                            EndIf
                            Player.animate()
                        EndIf
                    ElseIf New_Person.isInterestedIn(Player)
                        New_Person(Happy)::"Interesting..."
                        New_Person:attractiontoplayer += random(0, 2)
                        New_Person:rapportwithplayer += random(0, 2)
                        New_Person:arousal += 1
                        Player.animate()
                    Else
                        New_Person(Annoyed)::"Get out perv..."
                        New_Person:attractiontoplayer -= random(0, 5)
                        New_Person:rapportwithplayer -= random(0, 5)
                        Player.animate()
                    EndIf
                ElseIf 2
                    Player(Angry)::"Go on call the cops, that's my body and I'm proud to expose it to people..."
                    New_Person(Annoyed)::"Cool, if it's what you want..."
                    followUp(rk_VB_public_indecency)
                EndIf
            EndIf
        EndIf
        passTime(0.1, 0.5)
    SceneEnd() // Improved by Raddeck
    If CompanionIntroduced
        timeout(224, meet_new_person, meet_old_person)
    Else
        timeout(236, meet_new_person, meet_old_person)
    EndIf
    