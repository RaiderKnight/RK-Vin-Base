WHAT: all
WHERE: home
WHEN: 8 - 21
WHO: Actor2 = getSpecific(Dating)
OTHER: !isWithCompanion() && !OpenRelationship()

    SceneStart()
        VraiLoser = false
        FightingLost = false
        IlAPerdu = false
        Hunger = Player.getActorVar(rk_VB_Hunger)
        HungerEnable = rk_VB_EnableHunger.getGlobal()
        UrgeToPeeEnable = rk_VB_UrgeToPeeEnable.getGlobal()
        UrgeToPee = Player.getActorVar(rk_VB_UrgeToPee)
        NoBribe_dating = rk_VB_NoBribe_dating_ex_cms.getGlobal()
        CallPolice = false
        BeatShitOf = false
        IgnoreA = false
        DoExtreme = false
        Actor = generatePersonTemporary()
        While !Actor.isSameGender(Player)
            Actor = generatePersonTemporary()
        EndWhile
        Actor.hide()
        IDactor = Actor.getID()
        ACAgain = Actor.getActorVar(rk_VB_bribe_dating_ex_cmsV)
        ACheckExis = rk_VB_bribe_dating_ex_cms.getGlobal()
        FiniLeShow = false
        If ACAgain == 1 && IDactor == ACheckExis
            "The last time <Actor.name> came to see my <Actor2.boyfriend_or_girlfriend>, I told <Actor.him_or_her> not to come back or I was going to call the police or just beat the shit out of <Actor.him_or_her>."
            "<Actor.He_or_she>'s at the door, I guess <Actor.he_or_she> didn't understand last time! What should I do?"
            0::"Call the police"
            1::energy > 10::"Beat the shit out of <Actor.him_or_her>"
            2::"Ignore <Actor.him_or_her>"
            3::"Invite <Actor.him_or_her> over and knock <Actor.him_or_her> out"
            
            If 0
                CallPolice = true
            ElseIf 1
                BeatShitOf = true
            ElseIf 2
                IgnoreA = true
            Else
                DoExtreme = true
            EndIf
            If CallPolice
                Actor.dress()
                Actor.show()
                Player.animate(call)
                Player(Angry)::"Hey, scumbag, I told you last time to not come here again! Sorry but I've had enough, I called the police!" 
                Player.animate()
                "Sure enough, the cops promptly arrived."
                "They immediately arrested this deranged house-sitter..."
                mood += 5
                Actor.hide()
                timeout(5000, bribe_dating_ex_cms)
            ElseIf BeatShitOf
                Actor.dress()
                Actor.show()
                Player(Angry)::"Hey, scumbag, I told you last time to not come here again! Maybe if I break your face you'll understand better!" 
                Actor.moveToPersonStand(Player, 25)
                Player.animate(martialart)
                Roundcount = 0
                FightInAction = 0
                Actor.animate(martialart)
                While FightInAction < 1 && energy > 10
                    Actor.show()
                    FightAction = random(0, 2)
                    FightAction = FightAction.round()
                    BlockAction = random(0, 3)
                    BlockAction = BlockAction.round()
                    // 0 = miss
                    // 2 = small hit
                    // 4 = big hit
                    JFightAction = random(0, 1)
                    JFightAction = JFightAction.round()
                    JFightHit = random(3, 6)
                        
                    "What should I do?"
                    0:: Roundcount > 5::"Try to stop the fight"
                    1:: "Hit him"
    
                    If 0
                        Player(Pain)::"C'mon <Actor.name>, let's stop that fight?"
                        If Roundcount >= 20 || Actor:energy < 50 && Roundcount >= 5
                            Actor(Pain)::"Ok for now, consider yourself lucky...!"
                            FightInAction = 2
                            FiniLeShow = true
                        Else
                            Actor(Evil)::"Fuck off little pussy...c'mon come..."
                            FightInAction = 0
                        EndIf
                    Else
                        Roundcount += 1
                        If FightAction == 0
                            Actor.moveToPersonStand(Player, 25)
                            faceEachOther(Actor, Player)
                            Player.animate(martialart)
                            Actor.animate(martialart)
                            "You completely missed your attack ... <Actor.name> blocked your move!"
                            energy -= 1
                            FightInAction = 0
                        ElseIf FightAction == 1
                            Actor.moveToPersonStand(Player, 25)
                            faceEachOther(Actor, Player)
                            Player.animate(martialart)
                            Actor.animate(martialart)
                            If BlockAction == 0
                                Random
                                    "You manage to hit <Actor.name> in <Actor.his_or_her> genitals."
                                    "You manage to hit <Actor.name> in <Actor.his_or_her> rib cage."
                                    "You manage to hit <Actor.name> with a nice uppercut punch."
                                    "You manage to give <Actor.name> a good punch in the throat." 
                                EndRandom
                                Actor:energy -= 5
                            ElseIf BlockAction == 1
                                Random
                                    "You manage to hit <Actor.name> with a double punch in the face."
                                    "You manage to hit <Actor.name> with a front kick."
                                    "You manage to hit <Actor.name> with a knee kick." 
                                EndRandom
                                Actor:energy -= 3
                            ElseIf BlockAction == 2
                                Random
                                    "You manage to hit <Actor.name> with an elbow to the face."
                                    "You manage to hit <Actor.name> with a good palm strike."
                                EndRandom
                                Actor:energy -= 2
                            ElseIf BlockAction == 3
                                "You manage to hit <Actor.name> with a straight punch in the face."
                                Actor:energy -= 1
                            EndIf
                            If JFightAction > 0
                                Actor.animate(martialart)
                                DefendHit = random(0, 7)
                                DefendHit = DefendHit.round()
                                If DefendHit == 0
                                    "<Actor.name> respond with <Actor.his_or_her> fist in your face!"
                                    energy -= JFightHit 
                                ElseIf DefendHit == 1
                                    "<Actor.name> respond with a hit in your genitals."
                                    energy -= JFightHit + 2
                                ElseIf DefendHit == 2
                                    "<Actor.name> respond with a hit in your rib cage."
                                    energy -= JFightHit + 1
                                ElseIf DefendHit == 3
                                    "<Actor.name> respond with a front kick."
                                    energy -= JFightHit + 3
                                ElseIf DefendHit == 4
                                    "<Actor.name> respond with a knee kick." 
                                    energy -= JFightHit + 3
                                ElseIf DefendHit >= 5
                                    "<Actor.name> gets back into fighting position."
                                EndIf
                            EndIf
                            FightInAction = 0
                            
                        ElseIf FightAction == 2
                            BlockAction = random(0, 5) //Typeofhits
                            BlockAction = BlockAction.round()
                            Actor.moveToPersonStand(Player, 25)
                            faceEachOther(Actor, Player)
                            Player.animate(martialart)
                            Actor.animate(martialart)
                            If BlockAction == 0
                                Random
                                    "<Actor.name> manage to hit you in your genitals."
                                    "<Actor.name> manage to hit you in your rib cage."
                                    "<Actor.name> manage to hit you with a nice uppercut punch."
                                    "<Actor.name> manage to give you a good punch in the throat." 
                                EndRandom
                                energy -= 5
                            ElseIf BlockAction == 1
                                Random
                                    "<Actor.name> manage to hit you with a double punch in the face."
                                    "<Actor.name> manage to hit you with a front kick."
                                    "<Actor.name> manage to hit you with a knee kick." 
                                EndRandom
                                energy -= 3
                            ElseIf BlockAction == 2
                                Random
                                    "<Actor.name> manage to hit you with an elbow to the face."
                                    "<Actor.name> manage to hit you with a good palm strike."
                                EndRandom
                                energy -= 2
                            ElseIf BlockAction == 3
                                "<Actor.name> manage to hit you with a straight punch in the face."
                                energy -= 1
                            Else
                                Actor.moveToPersonStand(Player, 25)
                                faceEachOther(Actor, Player)
                                Player.animate(martialart)
                                Actor.animate(martialart)
                                "<Actor.name> completely missed <Actor.his_or_her> attack ... You managed to block <Actor.his_or_her> move!"
                                energy -= 1
                            EndIf
                            If isModEnabled(rk_vin_Base)
                                If JFightAction > 0
                                    Actor.animate(martialart)
                                    DefendHit = random(0, 7)
                                    DefendHit = DefendHit.round()
                                    If DefendHit == 0
                                        "You respond with your fist in <Actor.his_or_her> face!"
                                        Actor:energy -= JFightHit
                                    ElseIf DefendHit == 1
                                        "I respond with a hit in <Actor.his_or_her> genitals."
                                        Actor:energy -= JFightHit + 2
                                    ElseIf DefendHit == 2
                                        "I respond with a hit in <Actor.his_or_her> rib cage."
                                        Actor:energy -= JFightHit + 1
                                    ElseIf DefendHit == 3
                                        "I respond with a front kick."
                                        Actor:energy -= JFightHit + 3
                                    ElseIf DefendHit == 4
                                        "I respond with a knee kick." 
                                        Actor:energy -= JFightHit + 3
                                    ElseIf DefendHit >= 5
                                        "I gets back into fighting position."
                                    EndIf
                                EndIf
                                FightInAction = 0
                            EndIf
                        EndIf
                    EndIf
                    If energy < 10
                        FightingLost = true
                        FightInAction = 2
                    ElseIf Actor:energy < 10
                        IlAPerdu = true
                        FightInAction = 2
                    EndIf
                EndWhile
                If energy < 10
                    FightingLost = true
                    FightInAction = 2
                ElseIf Actor:energy < 10
                    IlAPerdu = true
                    FightInAction = 2
                EndIf
                TempStatA = Actor:energy
                TempStatP = energy
                TempStatA > TempStatP
                If FightingLost && TempStatA > TempStatP
                    VraiLoser = true
                ElseIf FightingLost && TempStatP > TempStatA
                    IlAPerdu = true
                ElseIf TempStatA > TempStatP
                    VraiLoser = true
                Else TempStatP > TempStatA
                    IlAPerdu = true
                EndIf
                If !FiniLeShow
                    If VraiLoser
                        Actor.animate()
                        "<Actor.name> win the fight, <Actor.he_or_she> beat me all the way..."
                        "Suddenly everything goes black ... you lost your consciousness."
                        Player.animate(knockedout)
                        Player.closeEyes(true)
                        Actor:rapportwithplayer -= 5
                        Actor:attractiontoplayer -= 1
                        If isModEnabled(vin_NonConsensual) && Actor:arousal > 10 && Actor:perversion > 50
                            Actor(Angry)::"I'm not done with you, <Player.scum_or_bitch>!"
                            "<Actor.name> stripped off all my clothes and started fucking me right here!"
                            Player.strip()
                            Actor.dressExcept(Outerwear, Bottom, Bottom_Under)
                            Filter(Aggressive)
                            SexNoAffair(Actor, Player)
                            If HungerEnable > 0
                                Player.modifyActorVar(rk_VB_Hunger, -3)
                            EndIf
                            passTime(0.50, 1.50)
                            Actor.hide()
                            "After a few minutes, I woke up but I'm still a little stunned…"
                            Player.animate()
                            "As you try to stand up you notice that you are naked ... and your whole body hurts. It feels like you have been beaten up."
                            Player.show()
                            "You feel something running down your <Player.ass_or_pussy>..."
                            "You touch your <Player.ass_or_pussy> to see what it is ..."
                            "It's cum, a lot of cum! It gushes literally out of your <Player.ass_or_pussy>, running down both legs ..."
                            Player(Disgusted)::"WTF happen..."
                            "I wiped a bit and put my clothes back on..."
                            Player.dress()
                            mood => 0
                            energy => 5
                        ElseIf random(0, 100) > 60
                            ActorLooting = random(1, 10)
                            ActorLooting = ActorLooting.round()
                            ActorLootingCash = random(10, 200)
                            ActorLootingCash_loc = ActorLootingCash.convertToLocalCurrency()
                            If ActorLooting > 6
                                "<Actor.name> stole you <ActorLootingCash_loc> from your pockets."
                                money -= ActorLootingCash
                            EndIf
                            Actor.hide()
                            Actor:rapportwithplayer -= 50
                            Actor:attractiontoplayer -= 50
                            passTime(0.15, 0.50)
                        Else
                            "After a few minutes, I woke up but I'm still a little stunned…"
                        EndIf
                        Player.closeEyes(false)
                        Player.animate()
                        mood => 5
                        energy => 5
                        "Going back home..."
                        moveTo(home)
                        SceneEnd()
                    EndIf
                    
                    If IlAPerdu
                        "I win the fight, <Actor.he_or_she> will stay quiet for a few..."
                        Actor.animate(knockedout)
                        Actor.closeEyes(true)
                        "What do I do?"
                        0::"Loot <Actor.him_or_her>"
                        1::"Fuck <Actor.him_or_her>"
                        99::"Nothing"
                                        
                        If 0
                            FindMoney = random(20, 500)
                            FindMoney_Loc = FindMoney.convertToLocalCurrency()
                            FindWeedg = random(2, 7) 
                            WeedVar = random(1, 4)
                            WeedVar = WeedVar.round()
                            If WeedVar == 1
                                VarWeed = "<FindWeedg>g of Sunset Sherbet"
                                Player.modifyActorVar(stock_SSweed, FindWeedg)
                            ElseIf WeedVar == 2
                                divideWeed = FindWeedg/2
                                divideWeed2 = FindWeedg/2
                                VarWeed = "<divideWeed>g of Bruce Banner and <divideWeed2>g of Gorilla Glue"
                                Player.modifyActorVar(stock_BBweed, divideWeed)
                                Player.modifyActorVar(stock_GGweed, divideWeed2)
                            ElseIf WeedVar == 3
                                divideWeed = FindWeedg/2
                                divideWeed1 = FindWeedg/2
                                divideWeed2 = FindWeedg/2
                                VarWeed = "<divideWeed>g of Sunset Sherbet, <divideWeed1>g of AK 47 and <divideWeed2>g of Gorilla Glue"
                                Player.modifyActorVar(stock_SSweed, divideWeed)
                                Player.modifyActorVar(stock_GGweed, divideWeed2)
                                Player.modifyActorVar(stock_AK47weed, divideWeed1)
                            ElseIf WeedVar == 4
                                divideWeed = FindWeedg/2
                                divideWeed1 = FindWeedg/2
                                divideWeed2 = FindWeedg/2
                                divideWeed3 = FindWeedg/2
                                VarWeed = "<divideWeed>g of Sunset Sherbet, <divideWeed3>g of Pineapple Express, <divideWeed1>g of AK 47 and <divideWeed2>g of Gorilla Glue"
                                Player.modifyActorVar(stock_SSweed, divideWeed)
                                Player.modifyActorVar(stock_AK47weed, divideWeed1)
                                Player.modifyActorVar(stock_GGweed, divideWeed2)
                                Player.modifyActorVar(stock_PEweed, divideWeed3)
                            EndIf
                            "You find <FindMoney_Loc> and <FindWeedg>g of weeds! <VarWeed>."
                            mood += 1
                            money += FindMoney
                        ElseIf 1
                            Player.dressExcept(Outerwear, Bottom)
                            Actor.strip()
                            Filter(Aggressive)
                            SexNoAffair(Player, Actor)
                            If HungerEnable > 0
                                Player.modifyActorVar(rk_VB_Hunger, -2)
                            EndIf
                            passTime(0.50, 1.50)
                        EndIf
                    EndIf
                    timeout(1000, bribe_dating_ex_cms)
                    Actor.hide()
                EndIf
            ElseIf IgnoreA
                Player(Angry)::"I decided to ignore <Actor.him_or_her> and not answer the door!" 
                mood -= random(1, 3)
                Actor.hide()
                timeout(200, bribe_dating_ex_cms)
            ElseIf DoExtreme
                Actor.dress()
                Actor.show()
                Actor.moveToPersonStand(Player, 50)
                "I decided to pretend to invite <Actor.him_or_her> inside so <Actor.he_or_she> could wait for my <Actor2.boyfriend_or_girlfriend>." 
                Player(Grin)::"Hey hi, come inside!"
                Player.moveToPersonStand(Actor, 30)
                Player.animate(martialart)
                "Once the door closed, I hit <Actor.him_or_her> on the head and <Actor.he_or_she> fell on the floor unconscious."
                Actor.closeEyes(true)
                Actor.animate(knockedout)
                "What should I do?"
                0::"Loot him"
                1::"Fuck him"
                99::"Call the police"
                
                If 0
                    FindMoney = random(100, 2000)
                    FindMoney_Loc = FindMoney.convertToLocalCurrency()
                    FindWeedg = random(4, 20) 
                    WeedVar = random(1, 4)
                    WeedVar = WeedVar.round()
                    If WeedVar == 1
                        VarWeed = "<FindWeedg>g of Sunset Sherbet"
                        Player.modifyActorVar(stock_SSweed, FindWeedg)
                    ElseIf WeedVar == 2
                        divideWeed = FindWeedg/2
                        divideWeed2 = FindWeedg/2
                        VarWeed = "<divideWeed>g of Bruce Banner and <divideWeed2>g of Gorilla Glue"
                        Player.modifyActorVar(stock_BBweed, divideWeed)
                        Player.modifyActorVar(stock_GGweed, divideWeed2)
                    ElseIf WeedVar == 3
                        divideWeed = FindWeedg/3
                        divideWeed1 = FindWeedg/3
                        divideWeed2 = FindWeedg/3
                        VarWeed = "<divideWeed>g of Sunset Sherbet, <divideWeed1>g of AK 47 and <divideWeed2>g of Gorilla Glue"
                        Player.modifyActorVar(stock_SSweed, divideWeed)
                        Player.modifyActorVar(stock_GGweed, divideWeed2)
                        Player.modifyActorVar(stock_AK47weed, divideWeed1)
                    ElseIf WeedVar == 4
                        divideWeed = FindWeedg/4
                        divideWeed1 = FindWeedg/4
                        divideWeed2 = FindWeedg/4
                        divideWeed3 = FindWeedg/4
                        VarWeed = "<divideWeed>g of Sunset Sherbet, <divideWeed3>g of Pineapple Express, <divideWeed1>g of AK 47 and <divideWeed2>g of Gorilla Glue"
                        Player.modifyActorVar(stock_SSweed, divideWeed)
                        Player.modifyActorVar(stock_AK47weed, divideWeed1)
                        Player.modifyActorVar(stock_GGweed, divideWeed2)
                        Player.modifyActorVar(stock_PEweed, divideWeed3)
                    EndIf
                    money += FindMoney  
                    "You find <FindMoney_Loc> and <FindWeedg>g of weeds! <VarWeed>."
                ElseIf 1
                    Player.dressExcept(Outerwear, Bottom)
                    Actor.strip()
                    Filter(Aggressive)
                    SexNoAffair(Player, Actor)
                    If HungerEnable > 0
                        Player.modifyActorVar(rk_VB_Hunger, -3)
                    EndIf
                    passTime(0.50, 1.50)
                Else
                    Player.animate()
                    "Sure enough, the cops promptly arrived."
                    "They immediately arrested this deranged house-sitter..."
                    mood += 5
                    timeout(5000, bribe_dating_ex_cms)
                EndIf
                Actor.hide()
                timeout(1000, bribe_dating_ex_cms)
            EndIf
        Else
            "<Actor2.name>'s ex hasn't got over their separation and since recently, <Actor.he_or_she>'s bothering us at our place. Again today, <Actor.he_or_she>'s at our door again, thankfully this time <Actor2.name> is away."
            "Should I open the door and try to bribe or scold <Actor.him_or_her> to leave my <Actor2.boyfriend_or_girlfriend> alone?"
            0:: "Open the door and talk"
            1:: "Just ignore <Actor.him_or_her>"
            99:: "Scold <Actor.him_or_her>!"
            
            If 0
                setBackgroundCustom(livingroom)
                Actor.dress()
                Actor.show()
                Player(Grin):: "<Actor2.name> isn't home, but I'm here in peace with an offer!"
                0:: "Bribe <Actor.him_or_her> with some cash!"
                1:: "Offer to match-make this ex with a contact!"
                2:: "Offer sex with me!"
                
                If 0
                    Player(Sad)::"If I give you $500, will you leave my <Actor2.boyfriend_or_girlfriend> alone"
                    If Actor.isInterestedIn(Player) && Actor:arousal > 15
                        Actor(Grin)::"For 500, that's acceptable! I won't bother you, or your <Actor2.boyfriend_or_girlfriend>, anymore."
                        Player(Sad):: "Take this money and leave!"
                        Actor(Grin):: "Thanks, I really need this money ... so okay ..."
                        money -= 500
                        rk_VB_NoBribe_dating_ex_cms.setGlobal(1)
                    Else
                        Actor(Sarcastic)::"You may be cute but I'm not gay, so you can keep your money!"
                        Actor(Grin)::"I'll be back later! Bye!"
                        "<Actor.Bastard_or_Bitch>, no way to get rid of <Actor.him_or_her>!"
                    EndIf
                ElseIf 1
                    Player(Grin):: "I'll introduce you to another <Actor2.guy_or_girl> I know, just leave <Actor2.name> alone."
                    "Who should I match make with <Actor2.name>'s ex?"
                    selectNpc()
                    Actor3 = getSelectedNpc()
                    secondScreen(Actor3)
                    Actor3.show()
                    "I decided to introduce the ex to <Actor3.name>>. They agreed to go on a blind date together."
                    If Actor.isInterestedIn(Actor3) && Actor3.isInterestedIn(Actor) && !Actor3.hasRelationship(Spouses, Dating) && !Actor3.isDating()
                        "The date must have gone well as they ended up as a couple. Now I can be sure <Actor.name> will leave my <Actor2.boyfriend_or_girlfriend> alone for good."
                        Actor.makePermanent()
                        addNpcRelationship(Dating, Actor, Actor3)
                        rk_VB_NoBribe_dating_ex_cms.setGlobal(1)
                    Else
                        "The date must have gone badly as they didn't end up as a couple ..."
                    EndIf
                    secondScreen()
                Else
                    Player(Grin):: "You can't have my <Actor2.boyfriend_or_girlfriend>, but you can have me!"
                    Actor(Annoyed):: "Okay then ... it's better than nothing ..."
                    Sex(Actor, Player)
                EndIf
            ElseIf 99
                Player(Angry)::"Hey, scumbag, are you done messing with us? You're going to have to stop that!"
                Player(Evil)::"If you come back again, I'll call the police or I'll break your face."
                Actor(Grin)::"Whatever!"
                "Good, <Actor.he_or_she>'s finally gone!"
                IDactor = Actor.getID()
                rk_VB_bribe_dating_ex_cms.setGlobal(IDactor)
                Actor.modifyActorVar(rk_VB_bribe_dating_ex_cmsV, 1)
            EndIf
        EndIf
        Actor.hide()
    SceneEnd()
    timeout(200, bribe_dating_ex_cms)