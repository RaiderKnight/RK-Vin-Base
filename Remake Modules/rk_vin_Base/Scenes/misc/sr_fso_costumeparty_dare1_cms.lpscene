WHAT: all, -sleep, -nap
WHERE: home
WHEN: 8 - 22
WHO: Actor = getSpecific(Dating); Actor2 = getPerson(true); If !Actor.isMale() && Actor2.isMale() && Actor2.isInterestedIn(Actor) && Actor2:rapportwithplayer > 35
OTHER: Player.isMale() && random(35, 100) > perversion && isModEnabled(vin_NTR)

    
    SceneStart()
        Hunger = Player.getActorVar(rk_VB_Hunger)
        HungerEnable = rk_VB_EnableHunger.getGlobal()
        UrgeToPeeEnable = rk_VB_UrgeToPeeEnable.getGlobal()
        UrgeToPee = Player.getActorVar(rk_VB_UrgeToPee)
        Player.show()
        Player.animate(call)
        IHaveGuests = 0
        GFGetF = false
        PartyAlmostStarted = false
        PartyStarted = false
        FuckisFriend = false
        "I was talking with a friend on the phone and <Actor2.he_or_she> confesses that <Actor2.he_or_she> has <Actor2.his_or_her> eye on my <Actor.boyfriend_or_girlfriend>."
        "What am I supposed to say about what <Actor2.he_or_she> just said?"
        0::"Nothing"
        1::isModEnabled(vin_Polyamorous)::"<Actor.He_or_She>'s cute, I know!"
        2::"Tell <Actor2.him_or_her> <Actor2.he_or_she>'s still dreaming"
        
        If 0
            GFGetF = true
        ElseIf 1
            Actor2.animate(call)
            Player(Happy)::"What, would you like to have sex with <Actor.him_or_her>?"
            secondScreen(Actor2)
            Actor2(Happy)::"Well, yeah,..."
            Actor2:arousal += 2
            GFGetF = true
            secondScreen()
        Else
            Actor2.animate(call)
            secondScreen(Actor2)
            Player(Angry)::"You're sick, my <Actor.boyfriend_or_girlfriend> is not a toy that I share. Keep fantasizing my <Actor2.man_or_girl>!"
            Actor2:rapportwithplayer -= random(1, 5)
            Actor2:attractiontoplayer -= random(1, 5)
            secondScreen()
            Actor2.hide()
            Player.animate()
        EndIf
        
        If GFGetF
            Actor3 = Actor2.getRelatedPerson(Spouses, Dating)
            "<Actor2.He_or_She> would like us to have a costume party together and wear identical criminal costumes...have to wear a mask too."
            "Then <Actor2.he_or_she> tells me that at different times during the party, we will then trick my <Actor.boyfriend_or_girlfriend> into having sex with both of us at seperate times throughout the party."
            "<Actor2.He_or_She> said <Actor2.he_or_she> will pay for everything..."
            "What should I say?"
            0:: "This is a very bad idea. Forget it!"
            1:: "This is a good idea. Let's do it!" 
            2:: Actor2.hasRelationship(Spouses, Dating):: "Ok but, your <Actor2.boyfriend_or_girlfriend> is my victim?" 

            If 0
                Player(Sad)::"Sorry, but if I do this to my <Actor.boyfriend_or_girlfriend>, <Actor.he_or_she> will kill me."
                Actor2:rapportwithplayer -= random(1, 5)
                Actor2:attractiontoplayer -= random(1, 5)
                secondScreen(Actor2)
                Actor2(Wink)::"Ok fine, at least I tried!"
                "After, we talked for a few more minutes on other topics and we finally said goodbye..."
                secondScreen()
            ElseIf 1
                secondScreen(Actor2)
                Actor2(Grin)::"Ok cool, I'm off to your place to prepare our tactics for sex and see if we invite more people..."
                Player(Sad)::"Ok I'm waiting for you..."
                PartyAlmostStarted = true
                secondScreen()
            Else
                secondScreen(Actor2)
                If random(0, 100) > 30
                    Actor2(Grin)::"Ok cool, I'm off to your place to prepare our tactics for sex and see if we invite more people..."
                    Player(Sad)::"Ok I'm waiting for you..."
                    PartyAlmostStarted = true
                    FuckisFriend = true
                EndIf
                secondScreen()
            EndIf
            Actor2.hide()
            Actor2.animate()
            Player.animate()
            If !isAtHome()
                Player(Happy):: "Let's go back home..."
                moveTo(home)
            EndIf
            If PartyAlmostStarted
                Actor2.show()
                "<Actor2.name> finally arrive..."
                "Should we invite other people to the party? Or should I just create a private party?"
                0:: "Handpick the guests"
                1:: "I prefer a private party"
                
                If 0
                    "Who should be our first guest?"
                    selectNPC()
                    Guest1 = getSelectedNPC()
                    If !Guest1.isValid()
                        "I can't quite decide on who to invite."
                    ElseIf Guest1:rapportwithplayer > 0 || Guest1:attractiontoplayer > 0
                        Guest1.hide()
                        "<Guest1.name> happily accepted our invitation."
                        PartyStarted = true
                        IHaveGuests += 1
                    Else
                        Guest1.hide()
                        "<Guest1.name> turned down our invitation. Oh well ..."
                        Guest1.delete()
                    EndIf
                    
                    "Who else should I invite?"
                    selectNPC()
                    Guest2 = getSelectedNPC()
                    If !Guest2.isValid()
                        "I can't quite decide on who to invite."
                    ElseIf Guest2:rapportwithplayer > 0 || Guest2:attractiontoplayer > 0
                        Guest2.hide()
                        "<Guest2.name> happily accepted our invitation."
                        PartyStarted = true
                        IHaveGuests += 1
                    Else
                        Guest2.hide()
                        "<Guest2.name> turned down our invitation. Oh well ..."
                        Guest2.delete()
                    EndIf
                    
                    "Who else should I invite?"
                    selectNPC()
                    Guest3 = getSelectedNPC()
                    If !Guest3.isValid()
                        "I can't quite decide on who to invite."
                    ElseIf Guest3:rapportwithplayer > 0 || Guest3:attractiontoplayer > 0
                        Guest3.hide()
                        "<Guest3.name> happily accepted our invitation."
                        PartyStarted = true
                        IHaveGuests += 1
                    Else
                        Guest3.hide()
                        "<Guest3.name> turned down our invitation. Oh well ..."
                        Guest3.delete()
                    EndIf
                EndIf
                PartyStarted = true
            EndIf
            If PartyStarted
                setBackgroundCustom(livingroom)
                Actor2.dressUniform(Crime)
                Player.dressUniform(Crime)
                Actor2.show()
                Player.show()
                Actor.dressUniform(Crime)
                Actor.show()
                If FuckisFriend
                    txtg = " and <Actor2.his_or_her> <Actor2.boyfriend_or_girlfriend>"
                EndIf
                If IHaveGuests > 0
                    "We decided to do a real party and invite more people<txtg>."
                    "Now, our preparations are all done. it's time to welcome the guests!"
                    
                    If Actor3.isValid()
                        Actor3.dressUniform(Crime)
                        "<Actor3.name> showed up."
                        Actor3.show(4)
                    EndIf
                    
                    If !Guest1.isValid() 
                        Random
                            Guest1 = getPerson()
                            Guest1 = generatePerson()
                        EndRandom
                        If !Guest1.isValid()
                            Guest1 = generatePerson()
                        EndIf
                    EndIf
                    Guest1.dressUniform(Crime)
                    "<Guest1.name> showed up."
                    Guest1.show(1)
                    
                    If !Guest2.isValid() 
                        Random
                            Guest2 = getPerson()
                            Guest2 = generatePerson()
                        EndRandom
                        If !Guest2.isValid()
                            Guest2 = generatePerson()
                        EndIf
                    EndIf
                    Guest2.dressUniform(Crime)
                    "<Guest2.name> came in."
                    Guest2.show(2)
                    
                    If !Guest3.isValid() 
                        Random
                            Guest3 = getPerson()
                            Guest3 = generatePerson()
                        EndRandom
                        If !Guest3.isValid()
                            Guest3 = generatePerson()
                        EndIf
                    EndIf
                    Guest3.dressUniform(Crime)
                    "<Guest3.name> arrived."
                    Guest3.show(3)
                    Player(Happy):: "Come in, everyone! Don't be shy. Everything's ready."
                ElseIf FuckisFriend
                    "We decided to do a private 'Blind swinger' party and invite <Actor2.his_or_her> <Actor2.boyfriend_or_girlfriend>."
                    "Now, our preparations are all done. it's time to welcome the guests!"
                    
                    If Actor3.isValid()
                        Actor3.dressUniform(Crime)
                        "<Actor3.name> showed up."
                        Actor3.show(1)
                    EndIf
                    Player(Happy):: "Come in, everyone! Don't be shy. Everything's ready."
                Else
                    "We decided to do a private party with only three people."
                    "Now, our preparations are all done. It's time to start the party!"
                EndIf
                "Everyone is here now. The party has started!"
                FucMyG = 0
                FucIsG = 0
                PartyOngoing = true
                MagicNumber = random(1, 3)
                MagicNumber.round()
                While PartyOngoing && 
                    passTime(0.2, 0.6)
                    Drank = false
                    Actor:intoxication += random(0, 10)
                    Actor2:intoxication += random(0, 10)
                    Actor3:intoxication += random(0, 10)
                    Guest1:intoxication += random(0, 10)
                    Guest2:intoxication += random(0, 10)
                    Guest3:intoxication += random(0, 10)
                    "What should I do now?"
                    0:: "Drink alcohol"
                    1:: "Try to fuck with <Actor3.name>"
                    2:: "Just dance"
                    99:: timePassed > 1:: "End the party"
                    
                    If 0
                        Player.animate(drinkbottle)
                        intoxication += random(0, 15)
                        "I poured myself a drink and enjoyed it thoroughly."
                        If UrgeToPeeEnable > 0
                            Player.modifyActorVar(rk_VB_UrgeToPee, 1)
                        EndIf
                    ElseIf 2
                        Player.animate(dance)
                        "I decided to dance a bit..."
                    ElseIf 99
                        Player.animate()
                        "As the host, I decided that the party had run its course and ended it. Everyone promptly left ..."
                        PartyOngoing = false
                    Else
                        Player.animate(socialize)
                        Player.moveToPerson(Actor3)
                        "I spent some time chatting with <Actor3.name>"
                        If Actor3.IsInterestedIn(Player) && random(0, 100) < attractiveness
                            Actor3:attractiontoplayer += Random(-1, 2)
                        Else
                            Actor3:rapportwithplayer += Random(-1, 2)
                        EndIf
                        
                        If random(1, 5) >= 2
                            "<Actor2.name> managed to usurp my <Actor.boyfriend_or_girlfriend>, they're off to one of the rooms for a quickie..."
                            secondScreen()
                            setBackgroundCustom(livingroom)
                            Actor2.strip()
                            Actor2.dressExcept(Outerwear, Top, Bottom, Top_Under, Bottom_Under)
                            Actor.strip()
                            Actor.dressExcept(Outerwear, Top, Bottom, Top_Under, Bottom_Under)
                            SexNoAffair(Actor2, Actor)
                            Actor2.dressUniform(Crime)
                            Actor.dressUniform(Crime)
                            FucMyG += 1
                        EndIf
 
                        If random(1, 5) >= 2
                            Player.animate()
                            "I managed to usurp <Actor2.name>'s <Actor3.boyfriend_or_girlfriend> and I take <Actor2.him_or_her> to one of the rooms for a quickie..."
                            sneak += 1
                            secondScreen()
                            setBackgroundCustom(livingroom)
                            Player.strip()
                            Player.dressExcept(Outerwear, Top, Bottom, Top_Under, Bottom_Under)
                            Actor3.strip()
                            Actor3.dressExcept(Outerwear, Top, Bottom, Top_Under, Bottom_Under)
                            SexNoAffair(Player, Actor3)
                            If HungerEnable > 0
                                Player.modifyActorVar(rk_VB_Hunger, -2)
                            EndIf
                            Actor3.dressUniform(Crime)
                            Player.dressUniform(Crime)
                            FucIsG += 1
                        EndIf
                    EndIf
                    If FucMyG > MagicNumber && FucIsG > MagicNumber
                        timePassed = true
                    EndIf
                    If timePassed > random(2.5, 5)
                        "It was getting very late. The party winded down and everyone left ..."
                        PartyWillStart => 0
                        PartyOngoing = false
                        If HungerEnable > 0
                            Player.modifyActorVar(rk_VB_Hunger, -2)
                        EndIf
                    EndIf
                    MagicD = random(1, 6)
                    MagicD = MagicD.round()
                    If MagicD == 1
                        Actor.animate(dance)
                    ElseIf MagicD == 2
                        Actor2.animate(dance)
                    ElseIf MagicD == 3
                        Actor3.animate(dance)
                    ElseIf MagicD == 4
                        Guest1.animate(dance)
                    ElseIf MagicD == 5
                        Guest2.animate(dance)
                    ElseIf MagicD == 6
                        Guest3.animate(dance)
                    EndIf
                EndWhile
            EndIf
        EndIf        

    SceneEnd() // Scene improved by Raddeck
    timeout(220, sr_fso_costumeparty_dare1_cms)