WHAT: all, -pickpocket, -go_to_the_bathroom, -sleep, -sleep_hotel, -nap, -nap_hotel, -rk_VB_small_sleep
WHERE: all
WHEN: 0 - 24
WHO: Actor = getCompanion(); If Actor:rapportwithplayer > 30 && [!Actor.isDating() || OpenRelationship()]
OTHER:

    
    SceneStart()
        Hunger = Player.getActorVar(rk_VB_Hunger)
        HungerEnable = rk_VB_EnableHunger.getGlobal()
        UrgeToPeeEnable = rk_VB_UrgeToPeeEnable.getGlobal()
        UrgeToPee = Player.getActorVar(rk_VB_UrgeToPee)
        invitation = false
        pasvu = false
        Mfacher = false
        shithappen = false
        If isModEnabled(rk_vin_Base)
            "While hanging out with <Actor.name>, <Actor.he_or_she> asks me if I know someone hot that <Actor.he_or_she> could hook up with."
            0:: "Recommend a date"
            1:: "Decline"
            
            If 0
                "Who should I recommend to <Actor.name>?"
                selectNpc()
                Actor2 = getSelectedNPC()
                If Actor2.isInterestedIn(Actor) && Actor.isInterestedIn(Actor2)
                    "<Actor.name> decided to give it a shot and go on a date with <Actor2.name>"
                    0:: "Follow them"
                    1:: "Leave them be"
                    
                    If 0
                        perversion += 1
                        setBackground(restaurant)
                        Actor2.dress()
                        Actor2.show()
                        "<Actor.name> and <Actor2.name> went on a nice date with each other. They seemed to get along well."
                        setBackground(hotel)
                        "So well that they ended up in a hotel room together."
                        If sneak > random(0, 105)
                            sneak += 1
                            arousal += 1
                            setBackground(home)
                            Actor.strip()
                            Actor2.strip()
                            Sex(Actor, Actor2)
                            If Actor.isDating()
                                "<Actor.name> just fucked another <Actor2.guy_or_girl> right in front of me, but that's okay because we're in an open relationship."
                            EndIf
                            If [!Actor.isDating() && Actor:sneak <= 0] || Actor:sneak <= 0
                                Actor:sneak => random(0, 100)
                            EndIf
                            If Actor:sneak > sneak
                                If !Actor.isDating() && [!Actor.isInterestedIn(Player) && !Actor2.isInterestedIn(Player)] || [[Actor:attractiontoplayer < 35 && Actor2:attractiontoplayer < 35] || [Actor:rapportwithplayer < 35 && Actor2:rapportwithplayer < 35]]
                                    Mfacher = true
                                Else
                                    invitation = true
                                EndIf
                            EndIf
                        Else
                            "I was not able to find a way to get to a window to watch the show!"
                            sneak -= 1
                            mood -= 2
                            pasvu = true
                        EndIf
                        If Mfacher
                            sneak -= 1
                            Actor2(Angry)::"WTF!"
                            Actor(Angry)::"Hey! You little pervert, get out of here!"
                            Actor:rapportwithplayer -= random(1, 5)
                            Actor2:rapportwithplayer -= random(1, 5)
                            Actor:attractiontoplayer -= random(0, 3)
                            Actor2:attractiontoplayer -= random(0, 3)
                        EndIf
                        If invitation
                            sneak -= 1
                            Actor(Sarcastic)::"Hey! You little pervert, instead of looking at us, come and join us, making love on three is even better!"
                            Actor2(Flirty)::"Yeah! Join us!!"
                            "What should I do?"
                            0::"Accept their offer"
                            1::"I was just curious"
                            99::"Refuse"
                            
                            If 0
                                Player(Happy)::"Sure!"
                                Player.strip()
                                Sex(Actor, Player, Actor2)
                                If HungerEnable > 0
                                    Player.modifyActorVar(rk_VB_Hunger, -3)
                                EndIf
                            ElseIf 1
                                shithappen = true
                            Else
                                shithappen = true
                            EndIf
                        EndIf
                        If shithappen
                            If Actor:perversion > 70 && Actor2:perversion > 70
                                Actor(Sarcastic)::"So sorry to say you just got yourself into trouble!"
                                Actor2(Grin)::"Yeah! And you're going to stay here my dear friend!"
                                Player(Surprised)::"Huh! What is your problem!"
                                Actor2(Grin)::"The problem is that you spied on us while we were fucking, so we want our share!"
                                Actor:rapportwithplayer -= random(0, 2)
                                Actor2:rapportwithplayer -= random(0, 2)
                                Actor:attractiontoplayer -= random(0, 1)
                                Actor2:attractiontoplayer -= random(0, 1)
                                "No way out, I have to suffer my fate!"
                                Filter(Aggressive)
                                Sex(Actor, Player, Actor2)
                                If HungerEnable > 0
                                    Player.modifyActorVar(rk_VB_Hunger, -4)
                                EndIf
                                mood -= random(5, 15)
                            Else
                                Actor2(Sad)::"So go away, you have no business here, spying on us like an idiot!"
                                Actor:rapportwithplayer -= random(0, 2)
                                Actor2:rapportwithplayer -= random(0, 2)
                                Actor:attractiontoplayer -= random(0, 1)
                                Actor2:attractiontoplayer -= random(0, 1)
                            EndIf
                        EndIf
                        If !Actor.hasRelationship(Spouses, Dating) && !Actor2.hasRelationship(Spouses, Dating) && !Actor.isDating() && !Actor2.isDating()
                            If pasvu
                                "I was informed that, the chemistry between them was instantaneous, and they ended up having a relationship together."
                            Else
                                "The chemistry between them was instant, and they ended up having a relationship together."
                            EndIf
                            "They both thanked me for connecting them so effectively."
                            Actor:rapportwithplayer += random(5, 25)
                            Actor2:rapportwithplayer += random(5, 25)
                            addNpcRelationship(Dating, Actor, Actor2)
                        Else
                            "Despite this, <Actor.name> was not interested in <Actor2.name> after that restaurant outing."
                            Actor:rapportwithplayer += random(0, 1)
                            Actor2:rapportwithplayer += random(0, 1)
                        EndIf
                    EndIf
                Else
                    "Despite my recommendation, <Actor.name> wasn't interested in <Actor2.name> after checking out <Actor2.his_or_her> photos."
                EndIf
            Else
                Player(Sad)::"Sorry, dear, I don't know who I can recommend in my contact list!"
                Actor(Sad)::"Fine, thanks anyway!"
                Actor:rapportwithplayer += random(-1, 1)
                Actor:attractiontoplayer += random(-1, 1)
            EndIf
        EndIf
        Actor2.hide()
    SceneEnd() // Improved by Raddeck
    timeout(200, dating_advice_cms)