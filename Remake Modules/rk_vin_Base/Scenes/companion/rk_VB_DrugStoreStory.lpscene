WHAT: all
WHERE: chemist, pharmacy
WHEN: 0 - 24
WHO: none
OTHER: random(0, 100) > 90

    SceneStart()
        VendID = rk_VB_DrugStoreStoryID.getGlobal()
        Hunger = Player.getActorVar(rk_VB_Hunger)
        HungerEnable = rk_VB_EnableHunger.getGlobal()
        UrgeToPeeEnable = rk_VB_UrgeToPeeEnable.getGlobal()
        UrgeToPee = Player.getActorVar(rk_VB_UrgeToPee)
        Degrees = rk_VB_DrugStoreStory.getGlobal()
        OnyVas = false
        // Based on one of Cristiano Caffieri stories
        If Degrees == 0
            If isModEnabled(rk_vin_Base)
                If Player.isFemale()
                    Vendeur = generatePersonTemporary()
                    While !Vendeur.isMale() && Vendeur.isTrans()
                        Vendeur = generatePersonTemporary()
                    EndWhile
                Else    
                    Vendeur = generatePersonTemporary()
                    While Vendeur.isMale() && Vendeur.isTrans()
                        Vendeur = generatePersonTemporary()
                    EndWhile
                EndIf
                Vendeur:attractiveness => random(70, 100)
                Vendeur.randomizeHairs()
                Vendeur.randomizeRace()
                Vendeur.randomizeFace()
                Vendeur.show()
                arousal += random(0, 1)
                "Wow, the cashier is really beautiful, my kind of <Vendeur.man_or_woman>... Almost love at first sight... Damn!"
                Player.moveToPersonStand(Vendeur, 50)
                "Although I came here to buy a pack of condoms, I'm far too embarrassed to put them in front of <Vendeur.him_or_her> at the checkout. Instead, I decided to buy some candy."
                Vendeur(Happy)::"Is there anything else?"
                "What should I say?"
                0::"Invite <Vendeur.him_or_her> to the cinema"
                1::"Nothing"
                
                If 0
                    interpersonal += random(0.5, 1)
                    Player(Flirty)::"Would you go to the movies with me?"
                    "<Vendeur.He_or_She> froze for a moment, then smiled, perhaps because of my boldness."
                    If Vendeur.isInterestedIn(Player)
                        rk_VB_DrugStoreStory.setGlobal(1)
                        Vendeur(Happy)::"When?"
                        Player(Flirty)::"What about later today?"
                        Vendeur(Curious)::"You’re very impulsive?"
                        "And for a moment there was a look of doubt on <Vendeur.his_or_her> face, in fact, <Vendeur.he_or_she> mumbled something but that turned out to be a little joke."
                        "When I handed <Vendeur.him_or_her> the money for the gum, <Vendeur.he_or_she> said yes and a place and time to meet was agreed upon."
                        If !Vendeur.isContactExchanged()
                            Vendeur.makePermanent()
                            exchangeContact(Vendeur)
                        EndIf
                        Vendeur:rapportwithplayer += random(1, 5)
                        Vendeur:attractiontoplayer += random(1, 5)
                        VendID = Vendeur.getID()
                        rk_VB_DrugStoreStoryID.setGlobal(VendID)
                        startDate()
                        Player(Flirty)::"See you later!"
                        Vendeur(Happy)::"Bye!"
                        Vendeur.hide()
                        timeoutPrecise(2, rk_VB_DrugStoreStory)
                    Else
                        price = 3
                        pricel = price.convertToLocalCurrency()
                        Vendeur(Annoyed)::"Sorry but you are not my type! That'll be <pricel> for the candy!"
                        Player(Flirty)::"Okay, that's fine, at least I tried!"
                        mood -= 1
                        Vendeur.hide()
                    EndIf
                Else
                    Player(Happy)::"Nope, nothing else!"
                    If Vendeur.isInterestedIn(Player) && !Vendeur.isContactExchanged()
                        Vendeur(Flirty)::"Would it be possible to get your numbers so that we can meet again another time?"
                        "What should I do?"
                        0::"Accept"
                        1::"Refuse"
                        
                        If 0
                            Player(Flirty)::"Of course, why not!"
                            "So we exchanged numbers and went our separate ways."
                            Vendeur.makePermanent()
                            exchangeContact(Vendeur)
                            Vendeur:rapportwithplayer += random(1, 5)
                            Vendeur:attractiontoplayer += random(1, 5)
                        Else
                            Player(Sad)"Sorry but I don't share my phone number with strangers!"
                            Vendeur(Sad)::"Ok then!"
                        EndIf
                    EndIf
                    timeoutPrecise(500, rk_VB_DrugStoreStory)
                EndIf
            EndIf
        ElseIf Degrees == 2 || Degrees == 3 || Degrees == 4
            "All of a sudden, my phone rings..."
            "Do I answer it?"
            0::"Yes"
            1::"No"
            
            If 0
                Vendeur(Happy)::"Hi, it's <Vendeur.name>, I'm calling to invite you to the movies, are you interested? I liked it last time!"
                "What should I say?"
                0::"Yes"
                1::"No"
                
                If 0
                    Player(Happy)::"Sure anytime!"
                    Vendeur(Happy)::"Cool, see you soon!"
                    OnyVas = true
                Else
                    Player(Sad)::"Sorry, I'm busy right now, maybe another time!"
                    Vendeur(Sad)::"Ok then!"
                EndIf
            Else
                "I'm busy, I don't have time for this!"
            EndIf
        ElseIf 5
            followUp(rk_VB_DrugStoreStoryD3)
        EndIf 
        timeoutPrecise(36, rk_VB_DrugStoreStory)
        If Degrees == 1 || OnyVas
            followUp(rk_VB_DrugStoreStoryD2)
        EndIf
    SceneEnd()