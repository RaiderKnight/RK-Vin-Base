WHAT: all, -pickpocket, -go_to_the_bathroom, -sleep, -sleep_hotel, -nap, -nap_hotel, -rk_VB_small_sleep
WHERE: all, -toilets, -PC, -office
WHEN: 0-24
WHO: Companion = getCompanion(); If !CurrentCompanion.isRelative() && !CurrentCompanion.isDating() && !CurrentCompanion.hasRelationship(Spouses, Dating) && CurrentCompanion.IsInterestedIn(Player) && CurrentCompanion:attractiontoplayer > random(30, 60)
OTHER: !Player.isDating() || [isModEnabled(vin_Polyamorous) && OpenRelationship()]

    SceneStart()
        Hunger = Player.getActorVar(rk_VB_Hunger)
        HungerEnable = rk_VB_EnableHunger.getGlobal()
        UrgeToPeeEnable = rk_VB_UrgeToPeeEnable.getGlobal()
        UrgeToPee = Player.getActorVar(rk_VB_UrgeToPee)
        CurrentCompanion.show(2)
        If CurrentCompanion.isCreature()
            "An animal can't propose a romantic relationship to a human!"
        Else
            CurrentCompanion(Anxious):: "Listen, can we talk privately for a bit?"
            "<CurrentCompanion.name> has been acting rather weirdly today, as if he had something important to say to me all day."
            Player(Curious):: "Of course, <CurrentCompanion.name>. What is it?"
            If CurrentCompanion:interpersonal > random(0, 30)
                CurrentCompanion(Happy):: "You know, although we haven't known each other for too long, I have grown quite fond of you and I hope you feel the same ..."
                CurrentCompanion(Happy):: "If so, I would love nothing more than to take our relationship to the next level and be able to call you my <Player.boyfriend_or_girlfriend>."
                0:: "Agree to be <CurrentCompanion.his_or_her> <Player.boyfriend_or_girlfriend>"
                1:: "Reject <CurrentCompanion.him_or_her>"
                
                If 0
                    karma += 10
                    Player(Happy):: "I like you a lot too, <CurrentCompanion.name>. Of course I'll be your <Player.boyfriend_or_girlfriend>!"
                    CurrentCompanion.setDating()
                    mood += 100
                    animatePair(CurrentCompanion, Player, Kissing)
                    CurrentCompanion(Kiss)::"..."
                    "So we embraced and kissed, treasuring our first moment as a couple."
                    0:: perversion > random(0, 50) || WHERE == home:: "Celebrate with sex, right here"
                    1:: WHERE != home:: "Let's celebrate with sex, at home"
                    99:: "Continue our date"
                    
                    If 0
                        Player(Wink):: "Baby, I just thought of the perfect way to celebrate the start of our romance!"
                        CurrentCompanion(Flirty):: "I think I know exactly what you mean!"
                        Sex(CurrentCompanion, Player)
                        perversion += random(0, 0.5)
                        CurrentCompanion.show(2)
                        "After having sex, we continued our date, now as a new couple."
                        If HungerEnable > 0
                            Player.modifyActorVar(rk_VB_Hunger, -2)
                        EndIf
                    ElseIf 1
                        Player(Wink):: "Baby, let's go back home to celebrate the start of our romance!"
                        CurrentCompanion(Flirty):: "I think I know exactly what you mean!"
                        moveTo(home)
                        setBackground(home)
                        Sex(CurrentCompanion, Player)
                        perversion += random(0, 0.5)
                        CurrentCompanion.show(2)
                        "After having sex, we continued our date, now as a new couple."
                        If HungerEnable > 0
                            Player.modifyActorVar(rk_VB_Hunger, -2)
                        EndIf
                    Else
                        "We continued our date, now as a new couple."
                    EndIf
                Else
                    Player(Surprised):: "<CurrentCompanion.name> ... I like you too ... but just not that way. I only see you as a friend ..."
                    mood -= 30
                    "It was a difficult conversation to have. On one hand, I don't have any romantic interest in <CurrentCompanion.name>. On another hand, I don't want to lose <CurrentCompanion.him_or_her> as a friend." 
                    "Eventually ..."
                    If CurrentCompanion:rapportwithplayer + interpersonal > random(0, 50)
                        CurrentCompanion(Sad):: "Alright, I respect your decision. Let's just be friends ..."
                        CurrentCompanion:attractiontoplayer -= random(0, 20)
                        "Those words were clearly said with a lot of reluctance, but at least I managed to keep <CurrentCompanion.name> in my life ... for now."
                    Else
                        CurrentCompanion(Offended):: "No, if I cannot have your heart, then I'd rather not have you in my life at all!"
                        "Having said that, <CurrentCompanion.name> stormed off. Was that the last I've seen of <CurrentCompanion.him_or_her>?"
                        CurrentCompanion.hide()
                        setBackground(home)
                        "A few hours later ..."
                        passTime(1, 2)
                        "Thinking that <CurrentCompanion.he_or_she> would have calmed down by now, I tried to call, only to find out that I had been blocked! It's a sad day, I might have forever lost <CurrentCompanion.name> from my life ..."
                        blockContact(CurrentCompanion)
                        endDate()           
                    EndIf
                EndIf
            Else
                CurrentCompanion(Scared):: "I ... I ... Actually, can you believe it? I completely forgot what I wanted to say. Nevermind!"
                "And so <CurrentCompanion.name> went back to acting weird for the rest of the day ..."
            EndIf
            If HungerEnable > 0
                Player.modifyActorVar(rk_VB_Hunger, -0.5)
            EndIf
        EndIf
    SceneEnd() // Scene improved by: Raddeck
    timeout(196, rk_VB_NPC_start_relationship)