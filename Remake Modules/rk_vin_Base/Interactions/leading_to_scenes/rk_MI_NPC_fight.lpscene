WHAT: all, -pickpocket, -go_to_the_bathroom, -sleep, -sleep_hotel, -nap, -nap_hotel, -rk_VB_small_sleep
WHERE: all, -home, -hotel, -police
WHEN: 0 - 24
WHO: none
OTHER: random(0, 100) > 85

    SceneStart()
        FiniLeShow = false
        NPID = rk_VB_EthnicFlavor_NPID.getGlobal()
        Flavor_Fight = rk_VB_EthnicFlavor_Fight.getGlobal()
        NpcBeat = rk_VB_polySibling_Fight.getGlobal()
        NPCB = rk_VB_polySibling_npdID.getGlobal()
        SharkID = rk_VB_Shark_npdID.getGlobal()
        SharkF = rk_VB_Shark_Fight.getGlobal()
        If isModEnabled(rk_vin_Base) || isModEnabled(rk_MoreInteractions)
            APE = random(50, 90)
            AAR = random(5, 50)
            FightingLost = false
            IlAPerdu = false
            VraiLoser = false
            Hunger = Player.getActorVar(rk_VB_Hunger)
            HungerEnable = rk_VB_EnableHunger.getGlobal()
            UrgeToPeeEnable = rk_VB_UrgeToPeeEnable.getGlobal()
            UrgeToPee = Player.getActorVar(rk_VB_UrgeToPee)
            If Flavor_Fight == 1
                Actor = getSpecific(NPID)
                Actor.show()
                Actor.moveToPersonStand(Player, 30)
                Actor(Furious)::"You're choice, so, let's fight loser!"
                Player(Furious)::"WTF!"
            ElseIf NpcBeat == 1
                Actor = getSpecific(NPCB)
                Actor.show()
                Actor.moveToPersonStand(Player, 30)
                Actor(Furious)::"You're choice, so, let's fight loser!"
                Player(Furious)::"WTF!"
            ElseIf SharkF == 1
                Actor = getSpecific(SharkID)
                Actor.show()
                Actor.moveToPersonStand(Player, 30)
                Actor(Furious)::"Come here ugly face, let's fight!"
                Player(Furious)::"WTF!"
            Else
                If [Player.isMale() && !Player.isGay()] || [!Player.isMale() && Player.isGay()]
                    Actor = generatePersonTemporary()
                    While !Actor.isMale()
                        Actor = generatePersonTemporary()
                    Endwhile
                    Actor.blendPreset(bodybuilder)
                ElseIf [!Player.isMale() && !Player.isGay()] || [Player.isMale() && Player.isGay()]
                    Actor = generatePersonTemporary()
                    While Actor.isMale()
                        Actor = generatePersonTemporary()
                    Endwhile
                    Actor.blendPreset(bodybuilder_F)
                EndIf
                Actor:perversion => APE
                Actor:arousal => AAR
                Actor.randomizeHairs()
                Actor.randomizeFace()
                Actor.dressUniform(Crime)
                Actor.show()
                Actor.moveToPersonStand(Player, 30)
                Actor(Furious)::"Come here ugly face, let's fight!"
                Player(Furious)::"WTF!"
            EndIf
        EndIf 
        Actor:rapportwithplayer -= random(2, 5)
        Actor:attractiontoplayer -= random(2, 5)
        ISuccess = random(0, 100)
        jsuisfourre = false
        If ISuccess > 75 && WHERE != home && WHERE != prison
            jsuisfourre = true
        EndIf
        If jsuisfourre
            If random(1, 5) >= 2
                Player.stripOne()
            EndIf
            Player(Shocked)::"WTF! Help, I'm under attack!"
            "I try to defend myself and screams..."
            Actor99 = generatePersonTemporary()
            Actor99.hide()
            Player.animate(fightlost)
            Player(Evil)::"THAT <Actor.GUY_or_GIRL>, WANTS TO BEAT ME!"
            "As a matter of fact, everyone turns around and I hear someone say <Actor99.he_or_she> called the police..."
            Actor.hide()
            Actor.delete()
            If random(50, 100) > 50
                PoliceMan = generatePersonTemporary()
                Actor1 = generatePersonTemporary()
                PoliceMan.dressUniform(Police)
                PoliceMan.show(2)
                Actor1.dressUniform(Police)
                Actor1.show(4)
                "Sure enough, the cops promptly arrived at the scene."
                PoliceMan(Furious)::"'Hands in the air, now! You're under arrest for assaulting a civilian"
                Actor.animate(fightlost)
                Actor(Scared):: "Please, don't shoot!"
                "<Actor.He_or_She> puts <Actor.his_or_her> hands up and get surrendered by the overwhelming number of cops."
                mood += 5
            Else
                Actor1.hide()
                PoliceMan.hide()
                "<Actor.He_or_She> managed to lose the cops. Damn..."
                mood -= 2
                energy -= 2
                If HungerEnable > 0
                    Player.modifyActorVar(rk_VB_Hunger, -2)
                EndIf
                Actor.hide()
            EndIf
            If Flavor_Fight == 1
                rk_VB_EthnicFlavor_Fight.setGlobal(0)
                rk_VB_EthnicFlavor_NPID.setGlobal(0)
            EndIf
        EndIf
        If Flavor_Fight == 1
            "The pimp pushed me violently inside my house and the battle began..."
        ElseIf NpcBeat == 1
            "I got pushed violently inside and the battle began..."
        EndIf
        If isModEnabled(rk_vin_Base) || isModEnabled(rk_MoreInteractions)
            Roundcount = 0
            FightInAction = true
            TEnerg1 = Actor:fitness + Actor:muscle + Actor:martial
            TEnerg = TEnerg1/3
            MEnerg1 = fitness + muscle + martial
            MEnerg2 = MEnerg1/100
            TEnerg2 = TEnerg1/100
            If TEnerg < 25
                TEnerg = TEnerg + random(20, 40)
            EndIf
            rk_VB_ActorEnergy.setGlobal(TEnerg)
            While FightInAction && energy > 10
                faceEachOther(Player, Actor)
                AEnerg = rk_VB_ActorEnergy.getGlobal()
                AEnerg1 = AEnerg - (1 + MEnerg2)
                AEnerg2 = AEnerg - (2 + MEnerg2)
                AEnerg3 = AEnerg - (3 + MEnerg2)
                AEnerg5 = AEnerg - (5 + MEnerg2)
                Actor.show()
                FightAction = random(0, 2)
                FightAction = FightAction.round()
                BlockAction = random(0, 3)
                BlockAction = BlockAction.round()
                JFightAction = random(0, 1)
                JFightAction = JFightAction.round()
                JFightHit = random(3, 6)
                "What should I do?"
                0:: Roundcount > 5::"Try to stop the fight"
                1:: "Hit <Actor.him_or_her>"

                If 0
                    Player(Pain)::"C'mon, let's stop that fight?"
                    If Roundcount >= 20 || AEnerg < 50 && Roundcount >= 5
                        Actor(Pain)::"Ok for now, consider yourself lucky...!"
                        FightInAction = false
                        FiniLeShow = true
                    Else
                        Actor(Evil)::"Fuck off little pussy...c'mon come..."
                    EndIf
                Else
                    Roundcount += 1
                    If FightAction == 0
                        Actor.moveToPersonStand(Player, 25)
                        faceEachOther(Actor, Player)
                        Player.animate(martialart)
                        Actor.animate(martialart)
                        "You completely missed your attack ... <Actor.name> blocked your move!"
                        energy -= 1
                    ElseIf FightAction == 1
                        Actor.moveToPersonStand(Player, 25)
                        faceEachOther(Actor, Player)
                        Player.animate(martialart)
                        Actor.animate(martialart)
                        If BlockAction == 0
                            Random
                                "You manage to hit <Actor.him_or_her> in the face."
                                "You manage to hit <Actor.him_or_her> in <Actor.his_or_her> genitals."
                                "You manage to hit <Actor.him_or_her> in <Actor.his_or_her> rib cage."
                                "You manage to hit <Actor.him_or_her> with a front kick."
                                "You manage to hit <Actor.him_or_her> with a knee kick." 
                            EndRandom
                            rk_VB_ActorEnergy.setGlobal(AEnerg5)
                        ElseIf BlockAction == 1
                            Random
                                "You manage to hit <Actor.him_or_her> in the face."
                                "You manage to hit <Actor.him_or_her> in <Actor.his_or_her> genitals."
                                "You manage to hit <Actor.him_or_her> in <Actor.his_or_her> rib cage."
                                "You manage to hit <Actor.him_or_her> with a front kick."
                                "You manage to hit <Actor.him_or_her> with a knee kick." 
                            EndRandom
                            rk_VB_ActorEnergy.setGlobal(AEnerg3)
                        ElseIf BlockAction == 2
                            Random
                                "You manage to hit <Actor.him_or_her> in the face."
                                "You manage to hit <Actor.him_or_her> in <Actor.his_or_her> genitals."
                                "You manage to hit <Actor.him_or_her> in <Actor.his_or_her> rib cage."
                            EndRandom
                            rk_VB_ActorEnergy.setGlobal(AEnerg2)
                        ElseIf BlockAction == 3
                            "You manage to hit <Actor.him_or_her> in the face."
                            rk_VB_ActorEnergy.setGlobal(AEnerg1)
                        EndIf
                        AEnerg = rk_VB_ActorEnergy.getGlobal()
                        If JFightAction > 0
                            Actor.animate(martialart)
                            DefendHit = random(0, 4)
                            DefendHit = DefendHit.round()
                            If DefendHit == 0
                                "<Actor.name> respond with <Actor.his_or_her> fist in your face!"
                                energy -= JFightHit 
                            ElseIf DefendHit == 1
                                "<Actor.name> respond with a hit in your genitals."
                                energy -= JFightHit + 2
                            ElseIf DefendHit == 2
                                "<Actor.name> respond with a hit in your rib cage."
                                energy -= JFightHit + 1
                            ElseIf DefendHit == 3
                                "<Actor.name> respond with a front kick."
                                energy -= JFightHit + 3
                            ElseIf DefendHit == 4
                                "<Actor.name> respond with a knee kick." 
                                energy -= JFightHit + 3
                            ElseIf DefendHit >= 5
                                "<Actor.name> gets back into fighting position."
                            EndIf
                        EndIf
                        AEnerg = rk_VB_ActorEnergy.getGlobal()
                    ElseIf FightAction == 2
                        BlockAction = random(0, 5) //Typeofhits
                        BlockAction = BlockAction.round()
                        Actor.moveToPersonStand(Player, 25)
                        faceEachOther(Actor, Player)
                        Player.animate(martialart)
                        Actor.animate(martialart)
                        If BlockAction == 0
                            Random
                                "<Actor.name> manage to hit you in your genitals."
                                "<Actor.name> manage to hit you in your rib cage."
                                "<Actor.name> manage to hit you with a nice uppercut punch."
                                "<Actor.name> manage to give you a good punch in the throat." 
                            EndRandom
                            energy -= 5 + TEnerg2
                        ElseIf BlockAction == 1
                            Random
                                "<Actor.name> manage to hit you with a double punch in the face."
                                "<Actor.name> manage to hit you with a front kick."
                                "<Actor.name> manage to hit you with a knee kick." 
                            EndRandom
                            energy -= 3 + TEnerg2
                        ElseIf BlockAction == 2
                            Random
                                "<Actor.name> manage to hit you with an elbow to the face."
                                "<Actor.name> manage to hit you with a good palm strike."
                            EndRandom
                            energy -= 2 + TEnerg2
                        ElseIf BlockAction == 3
                            "<Actor.name> manage to hit you with a straight punch in the face."
                            energy -= 1 + TEnerg2
                        Else
                            Actor.moveToPersonStand(Player, 25)
                            faceEachOther(Actor, Player)
                            Player.animate(martialart)
                            Actor.animate(martialart)
                            "<Actor.name> completely missed <Actor.his_or_her> attack ... You managed to block <Actor.his_or_her> move!"
                            rk_VB_ActorEnergy.setGlobal(SegT)
                        EndIf
                        AEnerg = rk_VB_ActorEnergy.getGlobal()
                        If JFightAction > 0
                            Actor.animate(martialart)
                            DefendHit = random(0, 7)
                            DefendHit = DefendHit.round()
                            Substr = AEnerg - JFightHit
                            TSubstr1 = JFightHit + 1
                            TSubstr2 = JFightHit + 2
                            TSubstr3 = JFightHit + 3
                            Substr1 = AEnerg - TSubstr1
                            Substr2 = AEnerg - TSubstr2
                            Substr3 = AEnerg - TSubstr3
                            If DefendHit == 0
                                "You respond with your fist in <Actor.his_or_her> face!"
                                rk_VB_ActorEnergy.setGlobal(Substr)
                            ElseIf DefendHit == 1
                                "I respond with a hit in <Actor.his_or_her> genitals."
                                rk_VB_ActorEnergy.setGlobal(Substr2)
                            ElseIf DefendHit == 2
                                "I respond with a hit in <Actor.his_or_her> rib cage."
                                rk_VB_ActorEnergy.setGlobal(Substr1)
                            ElseIf DefendHit == 3
                                "I respond with a front kick."
                                rk_VB_ActorEnergy.setGlobal(Substr3)
                            ElseIf DefendHit == 4
                                "I respond with a knee kick." 
                                rk_VB_ActorEnergy.setGlobal(Substr3)
                            ElseIf DefendHit >= 5
                                "I gets back into fighting position."
                            EndIf
                        EndIf
                        AEnerg = rk_VB_ActorEnergy.getGlobal()
                    EndIf
                EndIf
                If energy < 10
                    FightingLost = true
                    FightInAction = false
                ElseIf AEnerg < 10
                    IlAPerdu = true
                    FightInAction = false
                EndIf
            EndWhile
            AEnerg = rk_VB_ActorEnergy.getGlobal()
            If energy < 10
                FightingLost = true
                FightInAction = false
            ElseIf AEnerg < 10
                IlAPerdu = true
                FightInAction = false
            EndIf
            TempStatA = AEnerg
            TempStatP = energy
            TempStatA > TempStatP
            If FightingLost && TempStatA > TempStatP
                VraiLoser = true
            ElseIf FightingLost && TempStatP > TempStatA
                IlAPerdu = true
            ElseIf TempStatA > TempStatP
                VraiLoser = true
            Else TempStatP > TempStatA
                IlAPerdu = true
            EndIf
            If !FiniLeShow
                If VraiLoser
                    Actor.animate()
                    "<Actor.name> win the fight, <Actor.he_or_she> beat me all the way..."
                    "Suddenly everything goes black ... you lost your consciousness."
                    Player.animate(knockedout)
                    Actor:rapportwithplayer -= 5
                    Actor:attractiontoplayer -= 1
                    If isModEnabled(vin_NonConsensual) && Actor:arousal > 10 && Actor:perversion > 50
                        Actor(Angry)::"I'm not done with you, <Player.scum_or_bitch>!"
                        "<Actor.name> stripped off all my clothes and started fucking me right here!"
                        Player.strip()
                        Actor.dressExcept(Outerwear, Bottom, Bottom_Under)
                        Filter(Aggressive)
                        SexNoAffair(Actor, Player)
                        If HungerEnable > 0
                            Player.modifyActorVar(rk_VB_Hunger, -3)
                        EndIf
                        passTime(0.50, 1.50)
                        Actor.hide()
                        "After a few minutes, I woke up but I'm still a little stunned…"
                        Player.animate()
                        "As you try to stand up you notice that you are naked ... and your whole body hurts. It feels like you have been beaten up."
                        Player.show()
                        "You feel something running down your <Player.ass_or_pussy>..."
                        "You touch your <Player.ass_or_pussy> to see what it is ..."
                        "It's cum, a lot of cum! It gushes literally out of your <Player.ass_or_pussy>, running down both legs ..."
                        Player(Disgusted)::"WTF..."
                        "I wiped a bit and put my clothes back on..."
                        Player.dress()
                        mood => 0
                        energy => 5
                    ElseIf random(0, 100) > 60
                        ActorLooting = random(1, 10)
                        ActorLooting = ActorLooting.round()
                        ActorLootingCash = random(10, 200)
                        ActorLootingCash_loc = ActorLootingCash.convertToLocalCurrency()
                        If ActorLooting > 6
                            "<Actor.name> stole you <ActorLootingCash_loc> from your pockets."
                            money -= ActorLootingCash
                        EndIf
                        Actor.hide()
                        Actor:rapportwithplayer -= 50
                        Actor:attractiontoplayer -= 50
                        passTime(0.15, 0.50)
                    Else
                        "After a few minutes, I woke up but I'm still a little stunned…"
                    EndIf
                    If Flavor_Fight == 1
                        rk_VB_EthnicFlavor_Fight.setGlobal(0)
                        rk_VB_EthnicFlavor_NPID.setGlobal(0)
                    ElseIf NpcBeat == 1
                        rk_VB_polySibling_Fight.setGlobal(0)
                        rk_VB_polySibling_npdID.setGlobal(0)
                    ElseIf SharkF == 1
                        rk_VB_Shark_Fight.setGlobal(0)
                        rk_VB_Shark_npdID.setGlobal(0)
                    EndIf
                    Player.closeEyes(false)
                    Player.animate()
                    mood => 5
                    energy => 5
                    If WHERE != home && WHERE != fraternity && WHERE != brothel && WHERE != stripclub && WHERE != prison
                        "Going back home..."
                        moveTo(home)
                    EndIf
                    SceneEnd()
                EndIf
                If IlAPerdu
                    If Flavor_Fight == 1
                        rk_VB_EthnicFlavor_Fight.setGlobal(0)
                        rk_VB_EthnicFlavor_NPID.setGlobal(0)
                    ElseIf NpcBeat == 1
                        rk_VB_polySibling_Fight.setGlobal(0)
                        rk_VB_polySibling_npdID.setGlobal(0)
                    ElseIf SharkF == 1
                        rk_VB_Shark_Fight.setGlobal(0)
                        rk_VB_Shark_npdID.setGlobal(0)
                    EndIf
                    JeLoot = false
                    JeFuck = false
                    "I win the fight, <Actor.he_or_she> will stay quiet for a few..."
                    Actor.animate(knockedout)
                    Actor.closeEyes(true)
                    IlAPerduKnock = true
                    While IlAPerduKnock
                        "What do I do?"
                        0::!JeLoot::"Loot <Actor.him_or_her>"
                        1::!JeFuck::"Fuck <Actor.him_or_her>"
                        99::"Nothing"
                                        
                        If 0
                            FindMoney = random(5, 500)
                            FindMoney_Loc = FindMoney.convertToLocalCurrency()
                            FindWeedg = random(2, 7) 
                            WeedVar = random(1, 4)
                            WeedVar = WeedVar.round()
                            If WeedVar == 1
                                VarWeed = "<FindWeedg>g of Sunset Sherbet"
                                Player.modifyActorVar(stock_SSweed, FindWeedg)
                            ElseIf WeedVar == 2
                                divideWeed = FindWeedg/2
                                divideWeed2 = FindWeedg/2
                                VarWeed = "<divideWeed>g of Bruce Banner and <divideWeed2>g of Gorilla Glue"
                                Player.modifyActorVar(stock_BBweed, divideWeed)
                                Player.modifyActorVar(stock_GGweed, divideWeed2)
                            ElseIf WeedVar == 3
                                divideWeed = FindWeedg/2
                                divideWeed1 = FindWeedg/2
                                divideWeed2 = FindWeedg/2
                                VarWeed = "<divideWeed>g of Sunset Sherbet, <divideWeed1>g of AK 47 and <divideWeed2>g of Gorilla Glue"
                                Player.modifyActorVar(stock_SSweed, divideWeed)
                                Player.modifyActorVar(stock_GGweed, divideWeed2)
                                Player.modifyActorVar(stock_AK47weed, divideWeed1)
                            ElseIf WeedVar == 4
                                divideWeed = FindWeedg/2
                                divideWeed1 = FindWeedg/2
                                divideWeed2 = FindWeedg/2
                                divideWeed3 = FindWeedg/2
                                VarWeed = "<divideWeed>g of Sunset Sherbet, <divideWeed3>g of Pineapple Express, <divideWeed1>g of AK 47 and <divideWeed2>g of Gorilla Glue"
                                Player.modifyActorVar(stock_SSweed, divideWeed)
                                Player.modifyActorVar(stock_AK47weed, divideWeed1)
                                Player.modifyActorVar(stock_GGweed, divideWeed2)
                                Player.modifyActorVar(stock_PEweed, divideWeed3)
                            EndIf
                            "You find <FindMoney_Loc> and <FindWeedg>g of weeds! <VarWeed>."
                            mood += 1
                            money += FindMoney
                            JeLoot = true
                        ElseIf 1
                            perversion += random(1, 2)
                            masochist += random(0, 1)
                            JeFuck = true
                            Player.dressExcept(Outerwear, Bottom)
                            Actor.strip()
                            Filter(Aggressive)
                            SexNoAffair(Player, Actor)
                            If HungerEnable > 0
                                Player.modifyActorVar(rk_VB_Hunger, -2)
                            EndIf
                            passTime(0.50, 1.50)
                        Else
                            IlAPerduKnock = false
                        EndIf
                    EndWhile
                EndIf
            EndIf
        EndIf
        If Flavor_Fight == 1
            rk_VB_EthnicFlavor_Fight.setGlobal(0)
            rk_VB_EthnicFlavor_NPID.setGlobal(0)
        ElseIf NpcBeat == 1
            rk_VB_polySibling_Fight.setGlobal(0)
            rk_VB_polySibling_npdID.setGlobal(0)
        ElseIf SharkF == 1
            rk_VB_Shark_Fight.setGlobal(0)
            rk_VB_Shark_npdID.setGlobal(0)
        EndIf
        If WHERE != prison
            Actor.hide()
        EndIf
    SceneEnd()
    timeout(500, rk_MI_NPC_fight)