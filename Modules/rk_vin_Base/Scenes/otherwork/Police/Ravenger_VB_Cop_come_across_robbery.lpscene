WHAT: Cop_Street_work
WHERE: all
WHEN: 0 - 24
WHO: none
OTHER: Random(0, 100) < firearms

    SceneStart()
        
        Hunger = Player.getActorVar(rk_VB_Hunger)
        HungerEnable = rk_VB_EnableHunger.getGlobal()
        setBackground(street)
        Actor = generatePersonTemporary()
        Actor.dress()
        Actor.show(2)
        Victim = generatePersonTemporary()
        Victim.dress()
        Victim.show(3)
            
        Actor(Furious):: "Give me all your money now! Or I'll kill you."
        Victim(Scared):: "Please, don't hurt me. Here, take my money."
            
        "Someone is being robbed! What should I do?"   
        0:: "Freeze!"
        1:: "Attack the robber"
        
        If 0
            karma += 2.5
            Player.animate(gun)
            "Freeze! Put your hands up!"
            If Actor:fitness > 50        
                Victim.hide()
                "The thug is making a run for it!"
                0:: "Shoot"
                1:: "Chase"
                    
                If 0
                    "POW"
                    If firearms > 70
                        "Shot them in the leg."
                        "They would live to see jail time."
                        jobperformance += 10
                    Else
                        Actor.hide()
                        "Clean kill."
                        jobperformance += Random(0, 5)
                        Actor.Delete()
                    Endif
                    
                Else
                    "I give chase."
                    If fitness > Actor:fitness
                        "Thug didn't get very far. Because I soon arrest them."
                        jobperformance += 20
                    Else
                        Actor.hide()
                        "Shit, I lost them."
                        jobperformance -= Random(0, 5)
                    Endif   
                Endif
            Else
                "The thief gave up very quickly."
                jobperformance += 30
                Victim.makePermanent()
                Victim.show(2)
                Victim:attractiontoplayer += Random(0, 20)
                Victim:rapportwithplayer += Random(0, 20)
                Victim(Sad):: "Oh my god, you were so brave. I have no idea how I can thank you ..."
                0:: "No need for reward"
                1:: "Ask for <Victim.his_or_her> number"
                2:: isModEnabled(vin_VanillaPorn) && perversion > 20:: "Ask for sex"
                    
                If 0
                    Player(Happy):: "That's okay. I only did what was right, not for any rewards."
                    Victim:attractiontoplayer += Random(0, 5)
                    Victim:rapportwithplayer += Random(0, 5)
                    karma += 2.5
                Elseif 1
                    Player(Happy):: "I would love nothing more than to get your number. I'd quite like to get to know you better."
                    Victim(Happy):: "Of course!"
                    exchangeContact(Victim)
                Else
                    If Victim:perversion + Victim:attractiontoplayer > 100
                        Victim(Flirty):: "You mean ... right here? Oh well, if that's what you want. You're my savior after all."
                        Sex(Player, Victim)
                        perversion += Random(0, 0.5)
                        If HungerEnable > 0
                            Player.modifyActorVar(rk_VB_Hunger, -1)
                        EndIf
                    
                    Else
                        Victim(Angry):: "No way! You might have saved me from a robber, but I'm not about to give my body away so easily."
                        Victim:attractiontoplayer -= Random(0, 15)
                        Victim:rapportwithplayer -= Random(0, 15)                
                    Endif
                Endif
                
            Endif
            
        Else
            Victim.makePermanent()
            Player.animate(martialart)
            Player.moveToPersonStand(Actor, 100)
            Player(Furious):: "Hey, stop right there!"
            karma += 2.5
            masochist -= Random(0, 2)
            "I tackled the robber and we began an intense struggle."
            Player.animate()
            Actor.animate()
            If martial > Actor:martial
                Actor.animate(fightlost)
                "After a while, I managed to deliver the final blow to the robber. <Robber.He_or_She> couldn't take it anymore and fell unconscious."
                "A few minutes later, the police arrived and arrested the badly injured robber."
            Else
                Player.animate(fightlost)
                "Unfortunately for me, the robber was a far better fighter than I was. After a brief struggle, the robber managed to knock me to the ground and then proceeded to kick me mercilessly in the face."
                Actor.hide()
                "Thankfully, eventually the police arrived and the robber had to flee the scene before <Actor.he_or_she> caused me more damage. I was quickly taken to the hospital."
                attractiveness -= Random(0, 5)
                fitness -= Random(0, 10)
                martial -= Random(0, 10)
                mood -= 100
                energy -= 100
                Player.animate()
                setBackground(hospital)
            Endif
                    
            Victim.show(2)
            Victim:attractiontoplayer += Random(0, 20)
            Victim:rapportwithplayer += Random(0, 20)
            Victim(Sad):: "Oh my god, you were so brave. I have no idea how I can thank you ..."
            0:: "No need for reward"
            1:: "Ask for <Victim.his_or_her> number"
            2:: isModEnabled(vin_VanillaPorn) && perversion > 20:: "Ask for sex"
                    
            If 0
                Player(Happy):: "That's okay. I only did what was right, not for any rewards."
                Victim:attractiontoplayer += Random(0, 5)
                Victim:rapportwithplayer += Random(0, 5)
                karma += 2.5
            Elseif 1
                Player(Happy):: "I would love nothing more than to get your number. I'd quite like to get to know you better."
                Victim(Happy):: "Of course!"
                exchangeContact(Victim)
            Else
                If Victim:perversion + Victim:attractiontoplayer > 100
                    Victim(Flirty):: "You mean ... right here? Oh well, if that's what you want. You're my savior after all."
                    Sex(Player, Victim)
                    perversion += Random(0, 0.5)
                    If HungerEnable > 0
                        Player.modifyActorVar(rk_VB_Hunger, -1)
                    EndIf
                    
                Else
                    Victim(Angry):: "No way! You might have saved me from a robber, but I'm not about to give my body away so easily."
                    Victim:attractiontoplayer -= Random(0, 15)
                    Victim:rapportwithplayer -= Random(0, 15)                
                Endif
            Endif
        Endif
    
    SceneEnd() // Edited by Raddeck
    timeout(500, Ravenger_VB_Cop_come_across_robbery)