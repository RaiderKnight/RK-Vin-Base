WHAT: all
WHERE: university:school, university:work
WHEN: 0-24
WHO: Actor = getSpecific(Major_Teach); Actor2 = getSpecific(Coursemate); If !Actor.isDating() && !Actor2.isDating() && Actor2.isInterestedIn(Actor) && Actor.isInterestedIn(Actor2) && Actor:perversion + Actor2:perversion > Random(75, 150)
OTHER: none

    SceneStart()

        Major_Teach = rk_VB_Major_Teacher.getGlobal()
        Actor = getSpecific(Major_Teach)
        Hunger = Player.getActorVar(rk_VB_Hunger)
        HungerEnable = rk_VB_EnableHunger.getGlobal()
        personal_vids = Player.getActorVar(rk_VB_personal_vids)
        Actor2.dress()
        Actor2.show(3)
        dressFormal()
        Actor.dress()
        Actor.show(2)
    
        If WHERE == university:school
            "Wait, is that my coursemate <Actor2.name> and Dr <Actor.name_last> walking together back to <Actor.his_or_her> office?"
        Else
            "Wait, is that my student <Actor2.name> and Dr <Actor.name_last> walking together back to <Actor.his_or_her> office?"
        Endif
        "What should I do?"
        0:: "Follow them"
        1:: "No big deal"
        
        If 0
            If WHERE == university:school
                "Could they be having an affair? Having sex with a lecturer, <Actor2.name> is such a <Actor2.stud_or_slut>!"
            Else
                "Could they be having an affair? Having sex with a student, <Actor.name> is such a <Actor.stud_or_slut>!"
            Endif
            "What should I do now?"
            0:: "Peep"
            1:: "Leave it"
            
            If 0
                "Do I film them to blackmail them later?" // Edit Raddeck
                0:: "Yes"
                1:: "No"
                
                If 0
                    Player.animate(camera)
                    "I decided to film them..."
                    filmed = true
                Endif
                
                SneakGame()
                If Random(0, 100) < sneak
                    sneak += 1
                    "Luckily, they forgot to lock the door behind them, leaving me an easy opening to have a peek."
                    Sex(Actor, Actor2)
                    Actor.hide()
                    Actor2.hide()
                    If filmed // Edit Raddeck
                        "One more video added to my personnal xxx videos collection."
                        Player.modifyActorVar(rk_VB_personal_vids, 1)
                        Player.animate()
                    Endif
                    Player.show(0)
                    If HungerEnable > 0
                        Player.modifyActorVar(rk_VB_Hunger, -1)
                    EndIf
                    
                Else
                    "Unfortunately, they locked the door as soon as they went inside the office and I couldn't see a thing."
                    mood -= 1
                Endif
            Endif
            
            "Now, what should I do about what I saw?"
            0:: "Tell everyone"
            2:: "Offer to join them"
            1:: "Stay silent"
            
            If 0
            
                karma -= 10
                If WHERE == university:school
                    "I decided to spread the rumour to the rest of the course, which <Actor2.name> firmly denied."
                Else
                    "I decided to spread the rumour to the rest of the Department, which <Actor.name> firmly denied."        
                Endif
                Actor:rapportwithplayer -= Random(0, 5)
                Actor2:rapportwithplayer -= Random(0, 10)
            Elseif 2
                Player(Flirty):: "Looks like you guys are having some fun there? Mind if I join?"
                If Actor.isInterestedIn(Player) || Actor2.isInterestedIn(Player)
                    Actor(Flirty):: "Of course, my <Player.brother_or_sister>. Come on and join us then, what are you waiting for?"
                    Sex(Actor, Actor2, Player)
                    If HungerEnable > 0
                        Player.modifyActorVar(rk_VB_Hunger, -3)
                    EndIf
                    Actor:rapportwithplayer += Random(0, 10)
                    Actor:attractiontoplayer += Random(0, 10)
                    Actor2:rapportwithplayer += Random(0, 10) // Edit Raddeck
                    Actor2:attractiontoplayer += Random(0, 10) // Edit Raddeck
                    Player:perversion += Random(0, 1)
                Else  // Start edit Raddeck
                    Actor(Shocked):: "What are you doing here? Get out and close the door pervert!"
                    Actor:rapportwithplayer -= Random(0, 5)
                    Actor:attractiontoplayer -= Random(0, 5)
                    Player:perversion += Random(0, 1)
                    sneak -= 1
                    "What I should do?"
                    0::"Get out and close the door"
                    1:: filmed ::"Blackmail them"
                    
                    If 1
                        A1M = Actor:masochist
                        A2M = Actor2:masochist
                        TotalM = A1M + A2M
                        Player(Grin)::"No problem if you are not interested but I filmed everything with my phone, so if you don't want me to join you I will publish this nice video on XXX tubes."
                        masochist -= 0.5
                        
                        If Player:masochist < TotalM
                            Actor(Evil)::"You're such a jerk, come here so I can beat your stupid face!"
                            Actor.moveToPersonStand(Player, 50)
                            Actor.animate(martialart)
                            "I receive a punch in the face without having time to retaliate"
                            If Actor:martial > Player:martial
                                Player.animate(fightlost)
                                "A punch so intense that I fell down"
                                Player.animate(knockedout)
                                "<Actor.name> take time to erased all my personnal xxx videos collection."
                                Player.setActorVar(rk_VB_personal_vids, 0)
                            Else
                                Player.animate(martialart)
                                "The fight begin..."
                                Player.moveToPersonStand(Actor, 50)
                                faceEachOther(Actor, Player)
                                
                                Roundcount = 0
                                FightInAction = 0
                                
                                While FightInAction < 1 && choice == 1 && Player:energy > 10
                                    FightAction = Random(0, 2)
                                    FightAction = FightAction.round()
                                    // 0 = miss
                                    // 2 = small hit
                                    // 4 = big hit
                                    BlockAction = Random(0, 2)
                                    BlockAction = BlockAction.round()
                                    // 0 = miss
                                    // 2 = small hit
                                    // 4 = big hit
                                    JFightAction = Random(0, 1)
                                    JFightAction = JFightAction.round()
                                    JFightHit = Random(3, 6)
                                    "What should I do?"
                                    0:: Roundcount > 5::"Try to stop the fight"
                                    1:: "Hit <Actor.him_or_her>"
                                    
                                    If 0
                                        Player(Pain)::"C'mon <Actor.name>, let's stop that fight?"
                                        If Roundcount >= 20 || Actor:energy < 50 && Roundcount >= 5
                                            Actor(Pain)::"Ok for now, consider yourself lucky...!"
                                            Actor(Pain)::"But please delete that video...!"
                                            Player(Embarassed)::"Ok, Fine!"
                                            Player.modifyActorVar(rk_VB_personal_vids, -1)
                                            FightInAction = 1
                                        Else
                                            Actor(Evil)::"Fuck off little pussy...c'mon come..."
                                            FightInAction = 0
                                        EndIf
                                    Else
                                        Roundcount += 1
                                        If FightAction == 0
                                            
                                            Actor.moveToPersonStand(Player, 25)
                                            faceEachOther(Actor, Player)
                                            Player.animate(martialart)
                                            Actor.animate(martialart)
                                            "You completely missed your attack ... <Actor.name> blocked your move!"
                                            FightInAction = 0
                                            
                                        ElseIf FightAction == 1
                                            
                                            Actor.moveToPersonStand(Player, 25)
                                            faceEachOther(Actor, Player)
                                            Player.animate(martialart)
                                            Actor.animate(martialart)
                                            
                                            If martial > Actor:martial && muscle > Actor:muscle && fitness > Actor:fitness
                                                Random
                                                    "You manage to hit John in the face."
                                                    "You manage to hit John in his genitals."
                                                    "You manage to hit John in his rib cage."
                                                    "You manage to hit John with a front kick."
                                                    "You manage to hit John with a knee kick." 
                                                EndRandom
                                                Actor:energy -= 5
                                            
                                            ElseIf martial > Actor:martial && muscle > Actor:muscle
                                                Random
                                                    "You manage to hit John in the face."
                                                    "You manage to hit John in his genitals."
                                                    "You manage to hit John in his rib cage."
                                                    "You manage to hit John with a front kick."
                                                    "You manage to hit John with a knee kick." 
                                                EndRandom
                                                Actor:energy -= 3
                                            
                                            ElseIf muscle > Actor:muscle
                                                Random
                                                    "You manage to hit John in the face."
                                                    "You manage to hit John in his genitals."
                                                    "You manage to hit John in his rib cage."
                                                EndRandom
                                                Actor:energy -= 2
                                            
                                            Else
                                                "You manage to hit <Actor.name> in the face."
                                                Actor:energy -= 1
                                            EndIf
                                                
                                            If JFightAction > 0
                                                
                                                Actor.animate(martialart)
                                                DefendHit = Random(0, 4)
                                                DefendHit = DefendHit.round()
                                                
                                                If 0
                                                    "<Actor.name> respond with his fist in your face!"
                                                    Player:energy -= JFightHit 
                                                    
                                                ElseIf 1
                                                
                                                    "<Actor.name> respond with a hit in your genitals."
                                                    Player:energy -= JFightHit + 2
                                                    
                                                ElseIf 2
                                                
                                                    "<Actor.name> respond with a hit in your rib cage."
                                                    Player:energy -= JFightHit + 1
                                                    
                                                ElseIf 3
                                                
                                                    "<Actor.name> respond with a front kick."
                                                    Player:energy -= JFightHit + 3
                                                    
                                                ElseIf 4
                                                
                                                    "<Actor.name> respond with a knee kick." 
                                                    Player:energy -= JFightHit + 3
                                                    
                                                EndIf
                                                
                                            EndIf

                                            FightInAction = 0
                                            
                                        ElseIf FightAction == 2
                                            
                                            Actor.moveToPersonStand(Player, 25)
                                            faceEachOther(Actor, Player)
                                            Player.animate(martialart)
                                            Actor.animate(martialart)
                                                    
                                            If martial > Actor:martial && muscle > Actor:muscle && fitness > Actor:fitness
                                                Random
                                                    "You manage to hit John in the face."
                                                    "You manage to hit John in his genitals."
                                                    "You manage to hit John in his rib cage."
                                                    "You manage to hit John with a front kick."
                                                    "You manage to hit John with a knee kick." 
                                                EndRandom
                                                Actor:energy -= 15
                                            
                                            ElseIf martial > Actor:martial && muscle > Actor:muscle
                                                Random
                                                    "You manage to hit John in the face."
                                                    "You manage to hit John in his genitals."
                                                    "You manage to hit John in his rib cage."
                                                    "You manage to hit John with a front kick."
                                                    "You manage to hit John with a knee kick." 
                                                EndRandom
                                                Actor:energy -= 12
                                            
                                            ElseIf muscle > Actor:muscle
                                                Random
                                                    "You manage to hit John in the face."
                                                    "You manage to hit John in his genitals."
                                                    "You manage to hit John in his rib cage." 
                                                EndRandom
                                                Actor:energy -= 8
                                            
                                            Else
                                                "You manage to hit <Actor.name> in the face."
                                                Actor:energy -= 4
                                            EndIf
                                                
                                            If JFightAction > 0
                                                
                                                Actor.animate(martialart)
                                                DefendHit = Random(0, 4)
                                                DefendHit = DefendHit.round()
                                                
                                                If 0
                                                    "<Actor.name> respond with his fist in your face!"
                                                    Player:energy -= JFightHit 
                                                    
                                                ElseIf 1
                                                
                                                    "<Actor.name> respond with a hit in your genitals."
                                                    Player:energy -= JFightHit + 2
                                                    
                                                ElseIf 2
                                                
                                                    "<Actor.name> respond with a hit in your rib cage."
                                                    Player:energy -= JFightHit + 1
                                                    
                                                ElseIf 3
                                                
                                                    "<Actor.name> respond with a front kick."
                                                    Player:energy -= JFightHit + 3
                                                    
                                                ElseIf 4
                                                
                                                    "<Actor.name> respond with a knee kick." 
                                                    Player:energy -= JFightHit + 3
                                                    
                                                EndIf
                                                    
                                            EndIf

                                            FightInAction = 0
                                            
                                        EndIf
                                            
                                    EndIf
                                EndWhile
                            Endif
                        Else
                            perversion += 1
                            Actor(Annoyed)::"Ok come join us!"
                            Actor:rapportwithplayer -= Random(0, 5)
                            Actor:attractiontoplayer += Random(0, 5)
                            Actor2:rapportwithplayer -= Random(0, 3)
                            Actor2:attractiontoplayer += Random(0, 5)
                            masochist -= Random(0, 3)
                            mood += 1
                            Player.strip()
                            Sex(Actor, Actor2, Player)
                            If HungerEnable > 0
                                Player.modifyActorVar(rk_VB_Hunger, -3)
                            EndIf
                        Endif
                        If Player:energy < 10

                            Actor.animate()
                            "Suddenly everything goes black ... you lost your consciousness."
                            Player.animate(knockedout)
                            Actor:rapportwithplayer -= 5
                            Actor:attractiontoplayer -= 1
                            
                            If isModEnabled(vin_NonConsensual)
                                Player.strip()
                                Actor.dressExcept(Outerwear, Bottom)
                                Filter(Aggressive)
                                SexNoAffair(Actor, Player)

                                passTime(0.50, 1.50)
                            Endif
                            Actor.hide()
                            "After a few minutes, I woke up but I'm still a little stunnedâ€¦"
                            Player.animate()
                            If isModEnabled(vin_NonConsensual)
                                "As you try to stand up you notice that you are naked ... and your whole body hurts. It feels like you have been beaten up."
                                Player.show()
                                If Actor.isMale()
                                    "You feel something running down your <Player.ass_or_pussy>..."
                                    "You touch your <Player.ass_or_pussy> to see what it is ..."
                                    "It's cum, a lot of cum! It gushes literally out of your <Player.ass_or_pussy>, running down both legs ..."
                                    Player(Disgusted)::"WTF..."
                                    "I wiped a bit and put my clothes back on..."
                                Endif
                                Teacher = generatePersonTemporary()
                                Player.dress()
                                mood => 0
                                energy => 5
                                Teacher.show()
                                Teacher(Wink)::"Hey my friend! Are you ok! Do you want a glass of water before you go?"
                                "Do I accept or I'm going home?"
                                0::"Yeah sure, that'll wake me up a bit more..."
                                1::"No thanks, I think I will go home instead..."
                                        
                                If 0
                                    RapeChance = Random(0, 10)
                                    If Teacher.isInterestedIn(Player) && RapeChance > 7
                                        "I think <Teacher.he_or_she> put some drug inside the drink because I feel dizzy..."
                                        "The teacher take off my clothes, but I can barely move or say anything... WTF..."
                                        intoxication += 75
                                        Player.strip()
                                        Teacher.strip()
                                        Filter(Aggressive)
                                        SexNoAffair(Teacher, Player)
                                        "That's really not my day..."
                                        "Now my holes are red and in real bad shapes,.... fuck!"
                                        "I'm going home right now!"
                                        intoxication => 15
                                        energy => 10
                                    Else
                                        "I drink my glass with difficulty..."
                                        energy += 10
                                        "Once my drink is finished, I go straight home..."
                                        mood += 2
                                    EndIf
                                    "I decided to go back home..."
                                    moveTo(home)
                                Else
                                    "Going back home..."
                                    moveTo(home)
                                EndIf
                            Else
                                "I decided to go back home..."
                                moveTo(home)
                            EndIf
                        Else
                            "I win the fight, <Actor.he_or_she> will stay quiet for a few..."
                            "<Actor2.name> get scared and runs away..."
                            
                            If Actor:energy < 10
                                Actor.animate(knockedout)
                                "What should I do?"
                                0::"Loot <Actor.him_or_her>"
                                1:: isModEnabled(vin_NonConsensual) ::"Fuck <Actor.him_or_her>"
                                99::"Nothing"

                                If 0

                                    FindMoney = Random(100, 2000)
                                    FindMoney_Loc = FindMoney.convertToLocalCurrency()
                                    FindWeedg = Random(4, 200) 
                                    WeedVar = Random(1, 4)
                                    If isModEnabled(rk_WeedShop) || isModEnabled(rk_ShopAddons) || isModEnabled(rk_ShopAddons_UK) || isModEnabled(rk_vin_Base)
                                        If WeedVar == 1
                                                
                                            VarWeed = "<FindWeedg>g of Sunset Sherbet"
                                            Player.modifyActorVar(stock_SSweed, FindWeedg)
                                                
                                        ElseIf WeedVar == 2
                                                
                                            divideWeed = FindWeedg/2
                                            divideWeed2 = FindWeedg/2
                                            VarWeed = "<divideWeed>g of Bruce Banner and <divideWeed2>g of Gorilla Glue"
                                            Player.modifyActorVar(stock_BBweed, divideWeed)
                                            Player.modifyActorVar(stock_GGweed, divideWeed2)
                                                
                                        ElseIf WeedVar == 3
                                                
                                            divideWeed = FindWeedg/3
                                            divideWeed1 = FindWeedg/3
                                            divideWeed2 = FindWeedg/3
                                            VarWeed = "<divideWeed>g of Sunset Sherbet, <divideWeed1>g of AK 47 and <divideWeed2>g of Gorilla Glue"
                                            Player.modifyActorVar(stock_SSweed, divideWeed)
                                            Player.modifyActorVar(stock_GGweed, divideWeed2)
                                            Player.modifyActorVar(stock_AK47weed, divideWeed1)
                                                
                                        ElseIf WeedVar == 4
                                                
                                            divideWeed = FindWeedg/4
                                            divideWeed1 = FindWeedg/4
                                            divideWeed2 = FindWeedg/4
                                            divideWeed3 = FindWeedg/4
                                            VarWeed = "<divideWeed>g of Sunset Sherbet, <divideWeed3>g of Pineapple Express, <divideWeed1>g of AK 47 and <divideWeed2>g of Gorilla Glue"
                                            Player.modifyActorVar(stock_SSweed, divideWeed)
                                            Player.modifyActorVar(stock_AK47weed, divideWeed1)
                                            Player.modifyActorVar(stock_GGweed, divideWeed2)
                                            Player.modifyActorVar(stock_PEweed, divideWeed3)
                                                
                                        EndIf
                                        "You find <FindMoney_Loc> and <FindWeedg>g of weeds! <VarWeed>."
                                    Else
                                        "You find <FindMoney_Loc>!"
                                    EndIf
                                    money += FindMoney
                                ElseIf 1
                                    Player(Grin)::"You will remember this day!"
                                    Player.strip()
                                    Actor.strip()
                                    Filter(Aggressive)
                                    SexNoAffair(Player, Actor)
                                    passTime(0.50, 1.50)

                                EndIf
                            EndIf
                        EndIf
                    Endif
                Endif
            Else
            
                If WHERE == university:school
                    "Let's be honest: I would totally bang a lecturer myself if I have the chance. I feel for <Actor2.name> here. Let's not destroy <Actor2.his_or_her> reputation and Dr <Actor.name_last>'s career."
                Else
                    "Let's be honest: I would totally bang a student myself if I have the chance. I feel for <Actor.name> here. Let's not destroy <Actor.his_or_her> career and <Actor2.name>'s reputation."            
                Endif
                
            Endif
            
        Else
        
            "Who cares? <Actor.name> is probably just asking for help with coursework."
            
        Endif
    
    SceneEnd() // Improved by Raddeck
    timeout(500, coursemate_affair)