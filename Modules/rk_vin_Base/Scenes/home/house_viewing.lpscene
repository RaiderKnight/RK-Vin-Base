WHAT: none
WHERE: none
WHEN: 0-24
WHO: none
OTHER: none

    Difficulty = Random(0.25, 2)
    Salary = getSalary()
    Rent = Random(800, 1500)*CostOfLiving+Difficulty*Salary*0.25
    RentConverted = Rent.convertToLocalCurrency(true)
    Price = Rent*120

    sceneStart()

        houseviewing = rk_VB_houseviewing.getGlobal()
        Hunger = Player.getActorVar(rk_VB_Hunger)
        HungerEnable = rk_VB_EnableHunger.getGlobal()
        "I was looking for a new place to live, I discovered a nice place that might just fit my budget. The rent per month being advertised, including utility bills, is around <RentConverted>. However, I reckon I can try to negotiate that down."
        
        If Rent > money 
        
            "I'm not entirely sure it's a good idea considering my current financial situation." 
            
        Else
        
            "This rent seems reasonable and might just fit in my budget."
            
        Endif
        
        "Should I arrange for a viewing?"
        0:: "Yes"
        1:: "No"
        
        If 0
        
            Landlord = generatePerson()
            Landlord.dress()
            Landlord.show(2)
            Landlord.moveToPersonStand(Player, 50)
            faceEachOther(Player, Landlord)
            Landlord.animate(socialize)
            Landlord(Excited):: "So that's the apartment. It's available for just <RentConverted> a month, including bills. You won't get a better deal anywhere else! What do you think? Are you going to go for it? I can prepare the lease contract right away."
            choice = 2
            Knowledge = false
            Charm = false
            Seduce = false
            LoweredPrice = false
            Bought = false
            Vanilla = IsModEnabled(vin_VanillaRealistic)
            GonnaGetFucked = false
            CopsWantToFucked = false
            While choice > 1
                
                "What should I do?"
                0:: money > Rent::"Sign the lease"
                1:: "Look elsewhere"
                2:: !Knowledge && !Seduce:: "Use your knowledge to negotiate"
                3:: !Charm && !Seduce:: "Use your charm to haggle"
                4:: !Seduce:: "Use your sex appeal"
                5:: !Bought && money > Price:: "Offer to buy"
                
                If 0
                
                    If Rent > Salary*0.7
        
                        "I'm not entirely sure if this is really affordable considering my current financial situation." 
                        Player(Sad):: "Actually, I don't think I can afford to rent the apartment right now."
                        
                        SceneEnd()
            
                    Else
        
                        "This rent seems reasonable and might just fit in my budget."
                        Player(Happy):: "Actually, I think I can afford to rent this apartment outright."
            
                    Endif
                    
                    Landlord.animate(socialize)
                    Player.animate(write)
                    "I decided to sign the lease at the current rent. It wasn't too bad a deal after all."
                    MoveHome()
                    Landlord.setLandlord()
                    Rent.setRent()
                    If TfGame() && Player.isMale()
                        followUp(tf_afterlandlord)
                    Elseif TfGame() && Player.isFemale()
                        followUp(rk_VB_tff_afterlandlord)
                    Endif
                    Player.animate()
                    Landlord.animate()
                    mood += 3
                    
                    Landlord(Happy)::"See you soon, otherwise I'll come see you the first of next month ..."
                    Landlord:rapportwithplayer += Random(0, 2)
                    
                Elseif 1
                
                    "It was too expensive at this current rent so I had no choice but to look elsewhere. I thanked the landlord for <Landlord.his_or_her> time and left."
                    
                Elseif 5
                
                    PriceConverted = Price.convertToLocalCurrency(true)
                    Landlord.animate(socialize)
                    Player.animate(socialize)
                    Landlord(Surprised):: "Oh really? You know what: I'm prepared to sell it to you at <PriceConverted>."
                    
                    If money < Price
        
                        "I'm not entirely sure if this is really affordable considering my current financial situation." 
                        Player(Sad):: "Actually, I don't think I can afford to buy the home right now."
                        SceneEnd()
            
                    Else
        
                        "This price seems reasonable and might just fit in my budget."
                        Player(Happy):: "Actually, I think I can afford to buy the home outright."
            
                    Endif
                    
                    "What should I do?"
                    0:: "Go for it"
                    1:: "That's too expensive"
                    
                    If 0
                    
                        Bought = true
                        MoveHome()
                        money => money - Price
                        Zero = 0
                        Zero.setRent()
                        Player.setLandlord()
                        "I now own my home ... It's a wonderful feeling and now I don't have to worry about paying rent each month."
                        mood += Random(0, 100)
                        If TfGame() && Player.isMale()
                            followUp(tf_afterlandlord)
                        Elseif TfGame() && Player.isFemale()
                            followUp(rk_VB_tff_afterlandlord)
                        Endif
                        
                    Else
                    
                        choice = 5
                        
                    Endif
                    
                Elseif 2 && Random(0,100)*Difficulty < intelligence
                
                    "I used my research about the market rate of rent in the surrounding area to show the landlord that I had alternatives."
                    Rent /= 1.1
                    RentConverted = Rent.convertToLocalCurrency(true)
                    Landlord(Sarcastic):: "Alright, alright. You're a smart cookie - you should become a landlord yourself someday. How about <RentConverted> a month? That's surely lower than the going rate around."
                    Knowledge = true  
                    
                Elseif 3 && Random(0,100)*Difficulty < interpersonal
                
                    "I used all my smooth talking to charm the landlord into giving me a discount."
                    Rent /= 1.1
                    RentConverted = Rent.convertToLocalCurrency(true)
                    Landlord(Happy):: "Okay then, you seems like a nice enough person. I can give you the apartment for just <RentConverted> a month, but you'd better not tell my other tenants about it."
                    Charm = true
                    
                Elseif 4 && Landlord.IsInterestedIn(Player) && Landlord:perversion + Landlord:attractiontoplayer > Random(0,100)*Difficulty
                
                    "I flirted with the landlord while trying to look as sexy as possible. <Landlord.He_or_She> seemed receptive to my advances."
                    Rent /= 1.1
                    RentConverted = Rent.convertToLocalCurrency(true)
                    Landlord(Flirty):: "Okay, just for a good-looking tenant like you, I can drop the rent to <RentConverted> a month. But that's the lowest I'm going to go today ..."
                    Seduce = true
                    
                    If Landlord.IsDominantSex(Player) && Landlord:perversion > Random(30, 100)
                    
                        Landlord(Flirty):: "... unless you want to use that sexy mouth of yours for something better than negotiating"
                        0:: "No"
                        1:: Vanilla && perversion > 20:: "Fuck <Landlord.him_or_her>"
                        
                        If 0
                        
                            Player(Angry):: "I'm not doing that! Not in a million years."
                            Landlord(Flirty):: "Oh well, I'm not forcing anything on you. It was you who flirted with me first. I simply got the wrong signal, don't mind me."
                            
                        Else
                        
                            Player(Flirty):: "You'd better give me one hell of a deal for this ..."
                            Filter(Blowjob)
                            Sex(Landlord, Player)
                            Landlord.show(2)
                            perversion += Random(0, 1.5)
                            Rent /= 1.2
                            RentConverted = Rent.convertToLocalCurrency(true)
                            Landlord(Flirty):: "Well, now that we've got to know each other on a more ... personal level, you can have the apartment for just <RentConverted>. Trust me, I never gave anyone such a good offer in all my years."
                            If HungerEnable > 0
                                Player.modifyActorVar(rk_VB_Hunger, -2)
                            EndIf
                        
                        Endif
                        
                    Else
                    
                        0:: "Thank <Landlord.him_or_her>"
                        1:: Vanilla && perversion > 30:: "Offer sex"
                        
                        If 1
                        
                            Player(Flirty):: "Surely you can change your mind and go even lower if I go down on you?"
                            
                            If TfGame() && Landlord.isMale()
                            
                                "When I was a man I used to hold the moral high ground and somewhat looked down on women who use their bodies to get advantages in life. Here I am, offering my body in exchange of rent discount. I'm such a hypocrite after all."
                            
                            Elseif TfGame() && Landlord.isFemale()
                            
                                "When I was a female I used to hold the moral high ground and somewhat looked down on men who use their looks to get advantages in life. Here I am, offering my body in exchange of rent discount. I'm such a hypocrite after all."
                            
                            Endif
                            
                            If Landlord:perversion > Random(20, 100)
                            
                                Landlord(Flirty):: "Oh? If that's on offer, then yes, perhaps I can change my mind indeed"
                                Sex(Landlord, Player)
                                Landlord.show(2)
                                perversion += Random(0, 2)
                                Rent /= 1.2
                                RentConverted = Rent.convertToLocalCurrency(true)
                                Landlord(Flirty):: "Well, now that we've got to know each other on a more ... personal level, you can have the apartment for just <RentConverted>. Trust me, I never gave anyone such a good offer in all my years."
                                If HungerEnable > 0
                                    Player.modifyActorVar(rk_VB_Hunger, -2)
                                EndIf
                            
                            Else
                            
                                Landlord(Angry):: "What? Who do you take me for? I'm running a serious business, not a brothel. I already told you it's the lowest I could go for the rent. Take it or leave it!"
                            
                            Endif
                            
                        Endif
                        
                    Endif
                    
                    choice = 4
                    
                Else
                
                    Landlord(Annoyed):: "I already told you this is the best deal I can give you."
                    "My negotiations failed miserably. All it did was annoying the landlord. I probably shouldn't try to haggle more, or <Landlord.he_or_she> will refuse to even rent me the apartment."
                    Seduce = true
                    
                Endif
                    
                If Player.isNaked()
                    
                    GonnaGetFucked = true
                    
                Endif
                
            endWhile
            
            If Bought && !isWithCompanion()
            
                Landlord(Flirty):: "Do you want to celebrate the purchase of your new home together? You look like alone ..."
                "What should I say?"
                0::"Yes"
                1::"No"
                
                If 0
                
                    Player(Happy)::"Sure, ..."
                    Landlord(Flirty):: "Come to my place, we will be more comfortable?"
                    setBackground3D(Modules/rk_vin_Base/World/Vim_RoofOfficeBedroom.lpworld)
                    "I walk into <Landlord.his_or_her> house and we start talking about life ... while <Landlord.he_or_she> takes out alcohol, drinks and different drugs ..."

                    choice = -1    
                    ate = false
                    hadSex = false
                    Chatting = false
                    Drink1 = false
                    
                    While choice < 5
                        Kissed = false
                        "What should I suggest to do?"
                        0:: "Chat"
                        1:: !ate :: "Eat something together"
                        2:: "Drink alcohol"
                        3:: "Smoke weed"
                        4:: !hadSex:: "Kiss <Landlord.him_or_her>"
                        5:: [Chatting && Drink1] || hadSex ::"Politely leave"
                    
                        If 5
                        
                            "We said goodbye and went our ways."
                            If HungerEnable > 0
                        
                                Player.modifyActorVar(rk_VB_Hunger, -1)
                            
                            EndIf
                            
                        Else
                        
                            If 0
                                
                                Player.animate(socialize)
                                Landlord.animate(socialize)
                                "We simply sat and chat for a while ..."
                                mood += 1
                                Landlord:attractiontoplayer += 1
                                Landlord:rapportwithplayer += 1
                                passTime(0.1, 0.2)
                                Chatting = true
                                Player.animate()
                                Landlord.animate()
                                    
                            Elseif 1
                                
                                "We made some quick snacks and enjoyed them together ..."
                                ate = true
                                If HungerEnable > 0
                        
                                    Player.modifyActorVar(rk_VB_Hunger, 5)
                            
                                EndIf
                                Landlord:attractiontoplayer += 1
                                Landlord:rapportwithplayer += 1
                                mood += 1
                                energy += 5
                                passTime(0.2, 0.4)
                                    
                            Elseif 2

                                Player.animate(drinkglass)
                                Landlord.animate(drinkglass)
                                "We had a drink alcohol together ..."
                                Player:intoxication += Random(5,15)
                                Landlord:intoxication += Random(5,15)
                                passTime(0.1, 0.2)
                                Player.animate()
                                Landlord.animate()
                                If UrgeToPeeEnable > 0
                                    Player.modifyActorVar(rk_VB_UrgeToPee, 1)
                                EndIf
                                Drink1 = true
                                    
                            Elseif 3
                                
                                "We smoked weed together ..."
                                Player.animate(smoke)
                                Landlord.animate(smoke)
                                Player:intoxication += Random(3,15)
                                Landlord:intoxication += Random(3,15)
                                Player:mood += Random(3,10)
                                Landlord:mood += Random(3,10)
                                Landlord:attractiontoplayer += 1
                                Landlord:rapportwithplayer += 5
                                If HungerEnable > 0
                        
                                    Player.modifyActorVar(rk_VB_Hunger, -1)
                            
                                EndIf
                                energy -= 1
                                passTime(1, 2)
                                Player.animate()
                                Landlord.animate()
                                    
                            Elseif 4
                                Kissed = true
                            Endif
            
                            If Kissed || [Landlord.isInterestedIn(Player) && !hadSex && Landlord:attractiontoplayer > Random(0, 200)]
                                AnimatePair(Player, Landlord, Kissing)
                                Player(Kiss):: "..."
                                Landlord(Kiss):: "..."
                                If Dating
                                    "We kissed. It started slow but soon became more passionate. It was obvious what we both wanted ..."
                                Else
                                    "We had a kiss, an awkward one at first, but soon moving towards a more passionate direction."
                                Endif
                                "Should I let this escalate further?"
                                0:: Vanilla:: "Make out"
                                1:: "Stop"
                                
                                If 0
                                        
                                    If Landlord.isDating() || [Landlord.isInterestedIn(Player) && [Landlord.IsDominantSex(Player) || Landlord:attractiontoplayer + Landlord:perversion > Random(50, 200) || Landlord:intoxication > 80]]
                                            
                                        "Our kiss got more and more steamy and soon we were making out, our hands all over each other."
                                            
                                        If TfGame() && Landlord.isMale()
                                            "I'm a man trapped inside a woman's body. I don't think I'm gay, but here I am, about to hook up with my male date."
                                        Endif
                                            
                                        hadSex = true
                                        Player:perversion += Random(0, 1)
                                        Sex(Player, Landlord)
                                        Landlord.show(2)
                                        "The sex was amazing. We put our clothes back on afterwards and continued our date."
                                        If HungerEnable > 0
                        
                                            Player.modifyActorVar(rk_VB_Hunger, -1)
                            
                                        EndIf
                                        passTime(0.2, 0.5)
                                            
                                    Else
                                        
                                        "Unfortunately for me, <Landlord.name> didn't seem interested in letting things escalate any further and pulled away."
                                            
                                    Endif
                                        
                                Else
                                    
                                    "I decided to stop it there and not go any further."
                                        
                                Endif
                                    
                            Elseif Random(0, 100) < 20
                            
                                Player(Happy):: "I've gotta go now. Thank you for inviting me."
                                Landlord(Happy):: "Alright. Thank you for staying. Goodbye!"
                                    
                                "Should I ask to exchange our numbers?"
                                0::"Yes"
                                1::"No"
                    
                                If 0
                                    Player(Happy)::"Can I have your phone number, maybe we can hang out another day?"
                                    If Landlord.isInterestedIn(Player)
                                        Landlord(Happy)::"Yeah sure ..."
                                        exchangeContact(Landlord)
                                        "We exchanged numbers and parted ways."
                                    Else
                                        Random
                                            Landlord(Happy):: "Sorry, but I don't feel like I know you well enough to share such personal information just yet."
                                            Landlord(Happy):: "It's gonna be a no, I'm afraid. Another day perhaps."
                                            Landlord(Irritated):: "Sorry, but I don't normally exchange numbers with someone I've just met."
                                        EndRandom
                                    Endif
                                Endif 
                                
                                choice = 5            
                            Endif  
                                
                        Endif
                            
                    Endwhile

                Else
                
                    Player(Sad)::"No thanks, I'm a bit tired today ..."
                    "Should I ask to exchange our numbers?"
                    0::"Yes"
                    1::"No"
                    
                    If 0
                        Player(Happy)::"But, can I have your phone number, maybe we can hang out another day?"
                        If Landlord.isInterestedIn(Player)
                            Landlord(Happy)::"Yeah sure ..."
                            exchangeContact(Landlord)
                            "We exchanged numbers and parted ways."
                        Else
                            Random
                                Landlord(Happy):: "Sorry, but I don't feel like I know you well enough to share such personal information just yet."
                                Landlord(Happy):: "It's gonna be a no, I'm afraid. Another day perhaps."
                                Landlord(Irritated):: "Sorry, but I don't normally exchange numbers with someone I've just met."
                            EndRandom
                        Endif
                    Endif
                
                Endif
                
                Landlord.hide()
                GonnaGetFucked = false
                
            Endif
            
            If GonnaGetFucked
            
                WantToFucked = 0
                If Landlord:arousal > 25 && Landlord:pervevrsion > 50 && Landlord.IsInterestedIn(Player)
                
                    HornyLandlordTxt = "horny and I only think about fucking your holes...."
                    Landlord:perversion += 1
                    Landlord:arousal += 1
                    WantToFucked += 1
                
                Elseif Landlord.IsInterestedIn(Player)
                
                    HornyLandlordTxt = "uncomfortable and I think you should wear something before someone rape you..."
                    Landlord:attractiontoplayer += Random(0, 2)
                    Landlord:rapportwithplayer += Random(0, 2)
                    Landlord:arousal += 1
                
                Else
                
                    HornyLandlordTxt = "very uncomfortable and I think you should consult a doctor... now leave before I call the cops!"
                    Landlord:attractiontoplayer -= Random(0, 5)
                    Landlord:rapportwithplayer -= Random(0, 5)
                    CopsWantToFucked = true
                
                Endif
            
                Landlord(Curious):: "Quick question before you leave, can you tell me why you're naked, it's making me <HornyLandlordTxt>"
                "What should I say?"
                0::"I love playing with strangers!"
                1::"I'm a naturist that's why!"
                2::"Strike back!"
                99::"Just leave!"
                
                If 0
                
                    If WantToFucked > 0
                        
                        Landlord:perversion += 1
                        perversion += 1
                        Landlord(Flirty)::"So I'm I... Let's play!"
                        "Do I want to play with <New_Person.him_or_her>?"
                        0::"Yes"
                        1::"No"
                        
                        If 0
                            "We stripped right away and start caressing each other"
                            sex(Player, New_Person)
                            If HungerEnable > 0
                                Player.modifyActorVar(rk_VB_Hunger, -2)
                            EndIf
                        Else
                            Player(Sad)::"Sorry but I've got important things to do first! Maybe next time ..."
                        EndIf
                        Player.animate()
                        
                    Elseif Landlord.IsInterestedIn(Player)
                    
                        Landlord(Happy)::"You are cute but I should leave before someone see us together ...!"
                        Landlord:attractiontoplayer += Random(0, 2)
                        Landlord:rapportwithplayer += Random(0, 2)
                        Landlord:arousal += 1
                        Landlord.hide()
                        Player.animate()
                        
                    Else
                    
                        Landlord(Annoyed)::"Get out you annoying me...pervert!"
                        Landlord:attractiontoplayer -= Random(0, 2)
                        Landlord:rapportwithplayer -= Random(0, 2)
                        Player.animate()
                        
                    Endif

                Elseif 1
                    
                    If WantToFucked > 0
                    
                        Landlord(Flirty)::"So ... if you're naked it's because you want to get fucked?"
                        0::"I love playing with strangers!"
                        1::"Ew! Not really!"
                        
                        If 0
                        
                            Landlord:perversion += 1
                            perversion += 1
                            "We stripped right away and start caressing each other"
                            sex(Player, Landlord)
                            If HungerEnable > 0
                                Player.modifyActorVar(rk_VB_Hunger, -2)
                            EndIf
                            Player.animate()
                            
                        Endif
                    
                    Elseif Landlord.IsInterestedIn(Player)
                    
                        Landlord(Happy)::"Interesting..."
                        Landlord:attractiontoplayer += Random(0, 2)
                        Landlord:rapportwithplayer += Random(0, 2)
                        Landlord:arousal += 1
                        Player.animate()
                        
                    Else
                    
                        Landlord(Annoyed)::"Get out perv..."
                        Landlord:attractiontoplayer -= Random(0, 2)
                        Landlord:rapportwithplayer -= Random(0, 2)
                        Player.animate()
                        
                    Endif
                
                Elseif 2 //CopsWantToFucked
                
                    Player(Angry)::"Go on call the cops, that's my body and I'm proud to expose it to people..."
                    Landlord(Annoyed)::"Cool, if it's what you want..."
                    
                    rk_VB_houseviewing.setGlobal(1)
                    followUp(rk_VB_public_indecency)
                
                Endif
                
            Endif
            
        Else
        
            "I decided not to arrange a viewing with the landlord. This isn't really suitable accommodation for me right now."
            
        Endif

        passTime(0.5, 1.5)
    sceneEnd() // Scene improved by Raddeck