WHAT: sleep, sleep_hotel, nap, nap_hotel
WHERE: all
WHEN: 0-24
WHO: none
OTHER: !Player.isMale() && isModEnabled(vin_NonConsensual)

    SceneStart()
        
        IBuyaASys = rk_VB_IBuyaASys.getGlobal()
        AlarmEnable = rk_VB_AlarmEnable.getGlobal()
        DogGuardianStats = Player.getActorVar(DogGuardianStat)
        If DogGuardianStats > 75
            DRisk = 25
        ElseIf DogGuardianStats < 75
            DRisk = 20
        ElseIf DogGuardianStats > 50
            DRisk = 15
        ElseIf DogGuardianStats > 25
            DRisk = 10
        EndIf
        If IBuyaASys > 0
            KRisk = 0
            If IBuyaASys == 1
                KRisk = 50
            Elseif IBuyaASys == 2
                KRisk = 75
            Elseif IBuyaASys == 3
                KRisk = 90
            Endif
        Endif
        TRisk = KRisk + DRisk
        KidnapAttemp = random(0, 100)
        Actor2 = getCreature(Dog)
        If [TRisk > KidnapAttemp] && AlarmEnable > 0
            If Actor2.isValid()
                Actor2(Angry):: "Warf, warf, warf, grrrr...!"
            EndIf
            "All of a sudden the alarm system starts ringing."
            Player(Curious):: "WTF, well, let's go see what's going on!"
            Player(Curious):: "Hum, I can't see anything!"
            Player(Curious):: "Let's hope it was just an animal..."
        Else
            fightStart = false
            Hunger = Player.getActorVar(rk_VB_Hunger)
            HungerEnable = rk_VB_EnableHunger.getGlobal()
            UrgeToPeeEnable = rk_VB_UrgeToPeeEnable.getGlobal()
            UrgeToPee = Player.getActorVar(rk_VB_UrgeToPee)
            Player.closeEyes(true)
            "I'm deep in my sleep ..."
            If Actor2.isValid()
                Actor2(Angry):: "Warf, warf, warf, grrrr...!"
            EndIf
            WokeUp = true
            If Actor2.isValid()
                Actor2.show()
                WokeUp = false
                If DogGuardianStats > 50 || 50 > Random(1, 100)
                    Actor = generatePersonTemporary()
                    While !Player.isInterestedIn(Actor)
                        Actor = generatePersonTemporary()
                    Endwhile
                    Actor.makeInterestedIn(Player)
                    Actor.show()
                    bonus = Random(1, 5)
                    "Before things get further out of control, my trusty guard dog <Actor2.name> came to my rescue."
                    "<Actor2.name> aggressively attacked the home invader."
                    Actor2(Angry):: "Warf, warf, warf, grrrr...!"
                    Actor2.moveToPersonStand(Actor, 30)
                    Actor(Pain):: "Ah! Fuck,.... Ahhhhh!"
                    
                    If DogGuardianStats < 70
                        "The home invader managed to knock down my dog..."
                        mood -= 5
                        Actor2:energy => 25
                        Player.modifyActorVar(DogGuardianStat, -1)
                        DGetFuck = true
                    Else
                        "After a few painful bites, the thug panicked and fled." 
                        Actor.hide() // Edit Vin
                        Player(Happy):: "Oh my God, <Actor2.name>, you saved me!"
                        Player.modifyActorVar(DogGuardianStat, bonus)
                        If isModEnabled(vin_Bestiality) && Player.isInterestedIn(Actor2)
                            CookieForDog = true
                        Else
                            Player(Happy):: "Good dog! Here some cookies and a big bowl of your best meal."
                            Actor2(Happy):: "Wouf..."
                            Actor2:energy += 25
                            Actor2:rapportWithPlayer += 1
                        Endif
                    Endif
                Else
                    fightStart = true
                Endif
            Endif

            If WokeUp || fightStart
                Actor = generatePersonTemporary()
                While !Player.isInterestedIn(Actor)
                    Actor = generatePersonTemporary()
                Endwhile
                Actor.makeInterestedIn(Player)
                Actor.show()
                Actor.moveToPersonStand(Player)
                // setBackground3D(Modules/vin_Base/World/rk_VB__dungeon.lpworld)
                "Unbeknown to me, I was kidnapped and taken to some sort of dungeon ..."
                Player.dressBondage()
                Player.dressBondage(Handcuffs)
                "My kidnapper put some bondage clothes on me to restrain me ... <Actor.He_or_She> was clearly getting off on this."
                Player.closeEyes(false)
                Actor(Happy):: "Wakey, wakey, <Player.handsome_or_beautiful>!"
                Player(Curious):: "What!? Where am I?"
                Actor(Happy):: "In my dungeon my dear, now it's time to get fucked ..."
                0:: "Struggle out of my restrains"
                1:: "Submit"
                
                If 0 && Random(0, 200) < fitness + martial
                    Player.clearBondage()
                    "I managed to break free of the most important restrains holding me in place ..."
                    Actor.hide()
                    If energy < 50 && random(0, 10) > 6
                        "I then ran away to managed to leave my kidnapper far behind ..."
                        "But I fell,... I was too exhausted to run."
                        "The noise immediately attracted the attention of the kidnapper, who arrived right away to take me back and fuck me as <Actor.he_or_she> had promised before!"
                        Sex(Actor, Player)
                        If HungerEnable > 0
                            Player.modifyActorVar(rk_VB_Hunger, -3)
                        EndIf
                        mood -= 5
                        masochist += 1
                        sneak -= 1
                    Else
                        sneak += 1
                        "I then ran away and after a while I managed to leave my kidnapper far behind ..."
                        "Phew, that was a close call ..."
                    Endif
                Else
                    "Unfortunately, the bondage gear that my kidnapper put on me held me tightly in place and despite my best effort, I couldn't break free ..."
                    "I have no choice but endure a night with my kidnapper, letting <Actor.him_or_her> do whatever <Actor.he_or_she> wants ..."
                    If isModEnabled(vin_Bestiality) && 50 > Random(0, 100)
                        Actor69 = generateCreatureTemporary()
                        While !Player.isInterestedIn(Actor69)
                            Actor69 = generatePersonTemporary()
                        Endwhile
                        Actor69.show()
                        Sex(Actor, Actor69, Player)
                        If HungerEnable > 0
                            Player.modifyActorVar(rk_VB_Hunger, -3)
                        EndIf
                    Else
                        Sex(Actor, Player)
                        If HungerEnable > 0
                            Player.modifyActorVar(rk_VB_Hunger, -3)
                        EndIf
                    EndIf
                    mood -= 5
                    masochist += 1
                Endif
            Endif
            If CookieForDog
                "I can't help but notice that the fight with the home invader seemed to have brought out the animalistic instinct in <Actor2.name>. <Actor2.He_or_She> seems 'excited'." // Edit Vin
                0:: "Reward my hero dog with sex"
                1:: "Some dog treats are good enough rewards"
                
                If 0
                    "A hero saving the damsel in distress deserves to get laid. That hero not being human shouldn't matter."
                    Player.strip()
                    Sex(Actor2, Player)
                    If HungerEnable > 0
                        Player.modifyActorVar(rk_VB_Hunger, -3)
                    EndIf
                Endif
            EndIf
        Endif
    SceneEnd() // scene improved by Raddeck
    timeout(500, bdsm_kidnapped)