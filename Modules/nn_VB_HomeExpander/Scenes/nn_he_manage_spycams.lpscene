WHAT: none
WHERE: none
WHEN: 0 - 24
WHO: none
OTHER: none

    SceneStart()
        If PlayerHasHome()
            // Hide tenants
            secTenantID = RE_second_Tenant.getGlobal()
            thirdTenantID = RE_third_Tenant.getGlobal()
            TenantA = getSpecific(secTenantID)
            TenantB = getSpecific(thirdTenantID)
            
            If TenantA.isValid()
                TenantA.hide()
                TenantA.saveAndDelete()
            EndIf
            If TenantB.isValid()
                TenantB.hide()
                TenantB.saveAndDelete()
            EndIf
            
            hasLivingroom = RE_has_lvingroom.getGlobal()
            hasKitchen = RE_has_kitchen.getGlobal()
            hasOfficeroom = RE_has_officeroom.getGlobal()
            hasSecBedroom = RE_has_secondbedroom.getGlobal()
            hasThirdBedroom = RE_has_thirdbedroom.getGlobal()
            
            stayInMenu = true
            While stayInMenu
                bathroomCam = RE_has_spy_cam_bathroom.getGlobal()
                bedroomCam = RE_has_spy_cam_bedroom.getGlobal()
                bedroom2Cam = RE_has_spy_cam_second_room.getGlobal()
                bedroom3Cam = RE_has_spy_cam_third_room.getGlobal()
                livroomCam = RE_has_spy_cam_living_room.getGlobal()
                kitchenCam = RE_has_spy_cam_kitchen.getGlobal()
                officeCam = RE_has_spy_cam_office.getGlobal()
                
                masterSpyQuest = HE_masterspy_quest_active.getGlobal()
                If masterSpyQuest>0
                    
                    If bathroomCam>0 && bedroomCam>0 && bedroom2Cam>0 && bedroom3Cam>0 && livroomCam>0 && kitchenCam>0 && officeCam>0
                    
                        HE_masterspy_quest_active.setGlobal(0)
                        questEnd()
                        
                        reward = 20000
                        rewardLocal = reward.convertToLocalCurrency()
                        
                        "Congratulations! You just finished the 'Master spy' quest by installing the last spy cam!"
                        "Here is your reward! <rewardLocal> were just added to your account!"
                        money+=reward
                    EndIf
                EndIf
                
                txtBathroom = " (not installed)"
                If bathroomCam>0
                    txtBathroom=" (online)"
                EndIf
                
                txtBedroom = " (not installed)"
                If bedroomCam>0
                    txtBedroom=" (online)"
                EndIf
                
                txtBedroom2 = " (not installed)"
                If bedroom2Cam>0
                    txtBedroom2=" (online)"
                EndIf
                If hasSecBedroom <= 0
                    txtBedroom2 = " (room not build)"
                EndIf
                
                txtBedroom3 = " (not installed)"
                If bedroom3Cam>0
                    txtBedroom3=" (online)"
                EndIf
                If hasThirdBedroom <= 0
                    txtBedroom3 = " (room not build)"
                EndIf
                
                txtLivroom = " (not installed)"
                If livroomCam>0
                    txtLivroom=" (online)"
                EndIf
                If hasLivingroom <= 0
                    txtLivroom = " (room not build)"
                EndIf
                
                txtKitchen = " (not installed)"
                If kitchenCam>0
                    txtKitchen=" (online)"
                EndIf
                If hasKitchen <= 0
                    txtKitchen = " (room not build)"
                EndIf
                
                txtOffice = " (not installed)"
                If officeCam>0
                    txtOffice=" (online)"
                EndIf
                If hasOfficeroom <= 0
                    txtOffice = " (room not build)"
                EndIf
                
                0::"Manage personal bedroom spy cam<txtBedroom>"
                6::"Manage bathroom spy cam<txtBathroom>"
                1::hasSecBedroom>0::"Manage second bedroom spy cam<txtBedroom2>"
                2::hasThirdBedroom>0::"Manage third bedroom spy cam<txtBedroom3>"
                3::hasLivingroom>0::"Manage living room spy cam<txtLivroom>"
                4::hasKitchen>0::"Manage kitchen spy cam<txtKitchen>"
                5::hasOfficeroom>0::"Manage office spy cam<txtOffice>"
                99::"Exit"
                
                If 0||1||2||3||4||5||6
                    selectedCam = choice
                    
                    priceCam = 2000
                    priceCamLocal = priceCam.convertToLocalCurrency()
                    hasCam = 0
                    txtCam = ""
                    
                    If selectedCam == 0
                        // personal bedroom
                        txtCam = "personal bedroom cam"
                        hasCam = bedroomCam
                    ElseIf selectedCam == 1
                        // 2nd bedroom
                        txtCam = "second bedroom cam"
                        hasCam = bedroom2Cam
                    ElseIf selectedCam == 2
                        // 3rd bedroom
                        txtCam = "third bedroom cam"
                        hasCam = bedroom3Cam
                    ElseIf selectedCam == 3
                        // Living room
                        txtCam = "living room cam"
                        hasCam = livroomCam
                    ElseIf selectedCam == 4
                        // Kitchen
                        txtCam = "kitchen cam"
                        hasCam = kitchenCam
                    ElseIf selectedCam == 5
                        // Office
                        txtCam = "office cam"
                        hasCam = officeCam
                    ElseIf selectedCam == 6
                        // Bathroom
                        txtCam = "bathroom cam"
                        hasCam = bathroomCam
                    EndIf
                    
                    0::"*** managing <txtCam> ***"
                    1::hasCam==0&&money>2000::"Install camera (<priceCamLocal>, 2hrs)"
                    2::hasCam==1::"Remove camera (1hrs)"
                    99::"Return"
                    
                    If 1
                        If !isAtHome() && PlayerHasHome()
                            moveTo(home)
                        EndIf 
                        
                        If selectedCam == 0
                            // personal bedroom
                            RE_has_spy_cam_bedroom.setGlobal(1)
                        ElseIf selectedCam == 1
                            // 2nd bedroom
                            RE_has_spy_cam_second_room.setGlobal(1)
                        ElseIf selectedCam == 2
                            // 3rd bedroom
                            RE_has_spy_cam_third_room.setGlobal(1)
                        ElseIf selectedCam == 3
                            // Living room
                            RE_has_spy_cam_living_room.setGlobal(1)
                        ElseIf selectedCam == 4
                            // Kitchen
                            RE_has_spy_cam_kitchen.setGlobal(1)
                        ElseIf selectedCam == 5
                            // Office
                            RE_has_spy_cam_office.setGlobal(1)
                        ElseIf selectedCam == 6
                            // Bathroom
                            RE_has_spy_cam_bathroom.setGlobal(1)
                        EndIf
                        money -= priceCam
                        passTime(1.5 , 2.5)
                    ElseIf 2
                        If selectedCam == 0
                            // personal bedroom
                            RE_has_spy_cam_bedroom.setGlobal(0)
                        ElseIf selectedCam == 1
                            // 2nd bedroom
                            RE_has_spy_cam_second_room.setGlobal(0)
                        ElseIf selectedCam == 2
                            // 3rd bedroom
                            RE_has_spy_cam_third_room.setGlobal(0)
                        ElseIf selectedCam == 3
                            // Living room
                            RE_has_spy_cam_living_room.setGlobal(0)
                        ElseIf selectedCam == 4
                            // Kitchen
                            RE_has_spy_cam_kitchen.setGlobal(0)
                        ElseIf selectedCam == 5
                            // Office
                            RE_has_spy_cam_office.setGlobal(0)
                        ElseIf selectedCam == 6
                            // Bathroom
                            RE_has_spy_cam_bathroom.setGlobal(0)
                        EndIf
                        passTime(.5 , 1.5)
                    EndIf
                    
                Else
                    stayInMenu=false
                EndIf
            EndWhile
        Else
            "You need to find a personal home first!"
        EndIf   //PlayerHasHome()
    SceneEnd()