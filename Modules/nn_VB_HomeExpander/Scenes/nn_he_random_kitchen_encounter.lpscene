WHAT: none
WHERE: none
WHEN: 0 - 24
WHO: none
OTHER: !isWithCompanion 

    secTenantID = RE_second_Tenant.getGlobal()
    thirdTenantID = RE_third_Tenant.getGlobal()
    TenantA = getSpecific(secTenantID)
    TenantB = getSpecific(thirdTenantID)
    
    // Randomly both tenants are in the kitchen, otherwise one
    Tenant = 0
    chance = Random(0,5)
    If chance >= 4 
        If TenantA.isValid()
            Tenant = TenantA
            // TenantB will be used by the script below
        Else
            Tenant = TenantB
        EndIf
    Else
        cnt = 0
        While !Tenant.isValid() && cnt < 20
            Random
                Tenant = TenantA
                Tenant = TenantB
            EndRandom
            cnt += 1
        EndWhile
        TenantB = 0 // Invalidate to prevent using it (only one tenant is in the kitchen)
    EndIf
    
    If Tenant.isValid()
        SceneStart()
            // Move to the room
            setBackground3D(Modules/nn_HomeExpander/Rooms/re_kitchen.lpworld)
            Player.show(7,40,0)  // show up at the door
            cameraMove(5,42,800)
            cameraFocus(0,0,600)
            
            // Show Tenant
            chance = Random(0,5)
            If chance <=1
                // Show up in underwear
                If Tenant.isMale()
                    Tenant.dressExcept(Outerwear, Top, Bottom, Foot, Headwear)
                Else
                    // dressExcept produces ugly results for girls in version 3.17 at least
                    Random
                        Tenant.dress(Cool-Bra_1_F,Cool-Panties_1_F)
                        Tenant.dress(Cool-Bra_1_F,Cool-Panties_2_F)
                        Tenant.dress(Cool-Bra_1_F,Appealing-Panties_1_F)
                        Tenant.dress(Cool-Bra_1_F,Appealing-Panties_2_F)
                        Tenant.dress(Cool-Bra_1_F,Appealing-Panties_3_F)
                        Tenant.dress(Cool-Bra_1_F,Appealing-Panties_4_F)
                        Tenant.dress(Cool-Bra_2_F,Cool-Panties_1_F)
                        Tenant.dress(Cool-Bra_2_F,Cool-Panties_2_F)
                        Tenant.dress(Cool-Bra_2_F,Appealing-Panties_1_F)
                        Tenant.dress(Cool-Bra_2_F,Appealing-Panties_1_F,Stockings_2_F)
                        Tenant.dress(Cool-Bra_2_F,Appealing-Panties_2_F)
                        Tenant.dress(Cool-Bra_2_F,Appealing-Panties_2_F,Stockings_2_F)
                        Tenant.dress(Cool-Bra_2_F,Appealing-Panties_3_F)
                        Tenant.dress(Cool-Bra_2_F,Appealing-Panties_3_F,Stockings_2_F)
                        Tenant.dress(Cool-Bra_2_F,Appealing-Panties_4_F)
                        Tenant.dress(Cool-Bra_2_F,Appealing-Panties_4_F,Stockings_2_F)
                        Tenant.dress(Cool-Bra_3_F,Cool-Panties_1_F)
                        Tenant.dress(Cool-Bra_3_F,Cool-Panties_2_F)
                        Tenant.dress(Cool-Bra_3_F,Appealing-Panties_1_F)
                        Tenant.dress(Cool-Bra_3_F,Appealing-Panties_2_F)
                        Tenant.dress(Cool-Bra_3_F,Appealing-Panties_3_F)
                        Tenant.dress(Cool-Bra_3_F,Appealing-Panties_4_F)
                    EndRandom
                EndIf
            Else
                Tenant.dress()    
            EndIf
            Tenant.show()        // show up randomly
            Tenant.animate()
            
            // "DEBUG: <Tenant.Name>: arousal=<Tenant:arousal> rapport=<Tenant:rapportwithplayer> perversion=<Tenant:perversion> sub-maso=<Tenant:masochist>"
            
            // Show tenant B
            If TenantB.isValid()
                chance = Random(0,5)
                If chance <=1
                    // Show up in underwear
                    If TenantB.isMale()
                        TenantB.dressExcept(Outerwear, Top, Bottom, Foot, Headwear)
                    Else
                        // dressExcept produces ugly results for girls in version 3.17 at least
                        Random
                            TenantB.dress(Cool-Bra_1_F,Cool-Panties_1_F)
                            TenantB.dress(Cool-Bra_1_F,Cool-Panties_2_F)
                            TenantB.dress(Cool-Bra_1_F,Appealing-Panties_1_F)
                            TenantB.dress(Cool-Bra_1_F,Appealing-Panties_2_F)
                            TenantB.dress(Cool-Bra_1_F,Appealing-Panties_3_F)
                            TenantB.dress(Cool-Bra_1_F,Appealing-Panties_4_F)
                            TenantB.dress(Cool-Bra_2_F,Cool-Panties_1_F)
                            TenantB.dress(Cool-Bra_2_F,Cool-Panties_2_F)
                            TenantB.dress(Cool-Bra_2_F,Appealing-Panties_1_F)
                            TenantB.dress(Cool-Bra_2_F,Appealing-Panties_1_F,Stockings_2_F)
                            TenantB.dress(Cool-Bra_2_F,Appealing-Panties_2_F)
                            TenantB.dress(Cool-Bra_2_F,Appealing-Panties_2_F,Stockings_2_F)
                            TenantB.dress(Cool-Bra_2_F,Appealing-Panties_3_F)
                            TenantB.dress(Cool-Bra_2_F,Appealing-Panties_3_F,Stockings_2_F)
                            TenantB.dress(Cool-Bra_2_F,Appealing-Panties_4_F)
                            TenantB.dress(Cool-Bra_2_F,Appealing-Panties_4_F,Stockings_2_F)
                            TenantB.dress(Cool-Bra_3_F,Cool-Panties_1_F)
                            TenantB.dress(Cool-Bra_3_F,Cool-Panties_2_F)
                            TenantB.dress(Cool-Bra_3_F,Appealing-Panties_1_F)
                            TenantB.dress(Cool-Bra_3_F,Appealing-Panties_2_F)
                            TenantB.dress(Cool-Bra_3_F,Appealing-Panties_3_F)
                            TenantB.dress(Cool-Bra_3_F,Appealing-Panties_4_F)
                        EndRandom
                    EndIf
                Else
                    TenantB.dress()    
                EndIf
                TenantB.show()        // show up randomly
                TenantB.animate()
                
                // "DEBUG: SECOND <TenantB.Name>: arousal=<TenantB:arousal> rapport=<TenantB:rapportwithplayer> perversion=<TenantB:perversion> sub-maso=<TenantB:masochist>"
            EndIf
            
            If TenantB.isValid()
                "As you enter the kitchen you see that <Tenant.Name> and <TenantB.Name> are in the kitchen as well."
            Else
                "As you move into the kitchen you see <Tenant.Name> is in the kitchen as well."
            EndIf
            
            "What do you want to do?"
            0::"Just grab a drink/snack and leave"
            1::"Stay and make smalltalk"
            99::"Go back to your room"
            
            If 0
                chance = Random(0,2)
                txtItem = "eat"
                If chance >1
                    txtItem="drink"
                    Random
                        Player.animate(drinkglass)
                        Player.animate(drinkbottle)
                    EndRandom
                Else
                    Random
                        Player.animate(eat)
                    EndRandom
                EndIf
                
                // TODO: Add more text here
                If TenantB.isValid()
                    Random
                        Player(Serene)::"Hey <TenantB.Name> and <Tenant.Name>! I'll just get myself something to <txtItem>!"
                        Player(Serene)::"Hey <Tenant.Name> and <TenantB.Name>! I'm just grabbing something to <txtItem> for me!"
                    EndRandom
                Else
                    Random
                        Player(Serene)::"Hey <Tenant.Name>! I'll just get myself something to <txtItem>!"
                        Player(Serene)::"Hey <Tenant.Name>! I'm just grabbing something to <txtItem> for me!"
                    EndRandom
                EndIf
                
                Random
                    Player(Serene)::"See you later!"
                    Player(Serene)::"See you later around!"
                    Player(Serene)::"See ya!"
                EndRandom
            ElseIf 1 
                If TenantB.isValid()
                    Random
                        Player(Serene)::"Hey <TenantB.Name> and <Tenant.Name>! How are you?"
                        Player(Serene)::"Hi <Tenant.Name> and <TenantB.Name>! Cool to have you both here! Whats up?"
                        Player(Serene)::"Hey <Tenant.Name> and <TenantB.Name>! Whats up?"
                        Player(Serene)::"Hey you two! Any news?"
                        Player(Serene)::"Woha full house! Whats up?"
                    EndRandom
                Else
                    Random
                        Player(Serene)::"Hey <Tenant.Name>! How are you?"
                        Player(Serene)::"Hey <Tenant.Name>! How are you doing?"
                        Player(Serene)::"Hi <Tenant.Name>! Any news?"
                        Player(Serene)::"Hey whats up <Tenant.Name>?"
                        Player(Serene)::"Hey nice to see you <Tenant.Name>!"
                    EndRandom
                EndIf
                
                "THIS SCENE NEEDS TO BE CONTINUED!"
            EndIf
        SceneEnd()
    EndIf
